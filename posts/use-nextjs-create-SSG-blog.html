<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>LWDW!</title><meta name="description" content="ä½ çš„é™æ€åšå®¢ï¼Œä½•å¿…æ˜¯hexo"/><meta property="og:title" content="ä½ çš„é™æ€åšå®¢ï¼Œä½•å¿…æ˜¯hexo"/><meta property="og:description" content="hexoä¸€ç›´æ˜¯é™æ€åšå®¢çš„é¦–é€‰ä¹‹ä¸€ï¼Œå®ƒå¼€ç®±å³ç”¨çš„ç‰¹ç‚¹ä»¥åŠç›¸å¯¹ä¸°å¯Œçš„ä¸»é¢˜é€‰æ‹©è®©ä½¿ç”¨è€…å¯ä»¥èšç„¦äºåšå®¢å†…å®¹çš„ç¼–å†™ï¼ŒåŒæ—¶æ‹¥æœ‰ä¸€ä¸ªç›¸å¯¹ç¾è§‚çš„ç•Œé¢ã€‚ä½†å¦‚æœä½ æ˜¯ä¸€ä¸ªå¯¹åšå®¢å†…å®¹æœ‰é«˜åº¦è‡ªå®šä¹‰éœ€æ±‚çš„å¼€å‘è€…ï¼Œä¸”å¹¶æ²¡æœ‰åˆ†äº«åšå®¢......"/><meta name="next-head-count" content="6"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#ffffff"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#000"/><meta property="og:type" content="website"/><meta property="og:image" content="https://s2.loli.net/2023/01/18/42YTZxzePtR7jy9.png"/><meta property="og:url" content="https://b-sirius.github.io"/><link rel="preload" href="/_next/static/css/aef510c8abf24c2c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aef510c8abf24c2c.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-673a4fae4a27af6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0da236044dc4e5fc.js" defer=""></script><script src="/_next/static/chunks/664-1b4479b4462ded63.js" defer=""></script><script src="/_next/static/chunks/332-e879213584d084bf.js" defer=""></script><script src="/_next/static/chunks/740-8163689fd2f6810b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-52d68f4345545d9e.js" defer=""></script><script src="/_next/static/ebQpUXIPak7dk5fUIaYsa/_buildManifest.js" defer=""></script><script src="/_next/static/ebQpUXIPak7dk5fUIaYsa/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-b711fa3b-0 dxGMRG"><div class="sc-7fa12c98-0 iqAzDm"><div class="sc-357ac6e1-1 blSmbb"><div class="sc-357ac6e1-0 fqUBXX"><a class="sc-357ac6e1-2 gfNIvm" href="/">[<!-- -->Home<!-- -->]</a><a class="sc-357ac6e1-2 gfNIvm" href="/posts">[<!-- -->Posts<!-- -->]</a><a class="sc-357ac6e1-3 eNeEmH" rel="noopener noreferrer" target="_blank" href="https://github.com/B-sirius">[<!-- -->Github<!-- -->]</a><a class="sc-357ac6e1-3 eNeEmH" rel="noopener noreferrer" target="_blank" href="https://b-sirius.github.io/rss.xml">[<!-- -->RSS<!-- -->]</a></div><div class="sc-f5ce872-0 drvesR"><h1 class="sc-f5ce872-1 jPBPjm">LWDW!</h1><p class="sc-f5ce872-2 djaGsH">Learn the work from doing the workğŸº</p></div></div><div class="sc-920e94b6-0 sc-20291786-0 cMfBpD eCERES"><div><div class="sc-6a240bda-0 gspkRs"><div class="sc-6a240bda-2 bnlUwj">ä½ çš„é™æ€åšå®¢ï¼Œä½•å¿…æ˜¯hexo</div><div class="sc-6a240bda-3 hZSIRN">Posted on <!-- -->2023-01-18</div></div></div></div><div class="sc-920e94b6-0 cMfBpD"><div><div class="sc-6a240bda-1 bymzAy"><div class="sc-29ea8e37-0 bjoUyc"></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"use-nextjs-create-SSG-blog","title":"ä½ çš„é™æ€åšå®¢ï¼Œä½•å¿…æ˜¯hexo","date":"2023-01-18","mdText":"\nhexoä¸€ç›´æ˜¯é™æ€åšå®¢çš„é¦–é€‰ä¹‹ä¸€ï¼Œå®ƒå¼€ç®±å³ç”¨çš„ç‰¹ç‚¹ä»¥åŠç›¸å¯¹ä¸°å¯Œçš„ä¸»é¢˜é€‰æ‹©è®©ä½¿ç”¨è€…å¯ä»¥èšç„¦äºåšå®¢å†…å®¹çš„ç¼–å†™ï¼ŒåŒæ—¶æ‹¥æœ‰ä¸€ä¸ªç›¸å¯¹ç¾è§‚çš„ç•Œé¢ã€‚ä½†å¦‚æœä½ æ˜¯ä¸€ä¸ªå¯¹åšå®¢å†…å®¹æœ‰é«˜åº¦è‡ªå®šä¹‰éœ€æ±‚çš„å¼€å‘è€…ï¼Œä¸”å¹¶æ²¡æœ‰åˆ†äº«åšå®¢ä¸»é¢˜çš„è¯‰æ±‚ï¼Œhexoçš„ä¸»é¢˜å¼€å‘ä¼šæ˜¯ä¸€å®šçš„æŒ‘æˆ˜ï¼Œå› ä¸ºä½ éœ€è¦åœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œä¸»é¢˜æ¨¡ç‰ˆå¼€å‘ï¼Œè€Œä¸èƒ½è‡ªç”±é€‰æ‹©å¿ƒä»ªçš„æŠ€æœ¯æ ˆã€‚\n\næœ¬æ–‡å°†ä»é™æ€åšå®¢çš„æ ¸å¿ƒåŸç†å‡ºå‘ï¼Œä»¥æˆ‘ä¸ªäººçš„åšå®¢ä¸ºä¾‹ï¼Œé˜è¿°å¦‚ä½•é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆï¼Œæ¥æ­å»ºä¸€ä¸ªæœ€åŸºç¡€çš„é™æ€åšå®¢åº”ç”¨ã€‚\n\næœ¬æ–‡å‚è€ƒä»“åº“ï¼š[b-sirius.github.io](https://github.com/B-sirius/b-sirius.github.io/tree/0.1.0)\n\n---\n\nç›®å½•ï¼š\n\n- [é™æ€åšå®¢ä»å“ªé‡Œæ¥](#é™æ€åšå®¢ä»å“ªé‡Œæ¥)\n- [åšå®¢åŠŸèƒ½](#åšå®¢åŠŸèƒ½)\n  - [æ–‡ç« åˆ—è¡¨](#æ–‡ç« åˆ—è¡¨)\n  - [é¢„æ¸²æŸ“çš„åŠ¨æ€è·¯ç”±](#é¢„æ¸²æŸ“çš„åŠ¨æ€è·¯ç”±)\n  - [æ–‡ç« è¯¦æƒ…](#æ–‡ç« è¯¦æƒ…)\n  - [RSSæ”¯æŒ](#rssæ”¯æŒ)\n- [åšå®¢ä½“éªŒ](#åšå®¢ä½“éªŒ)\n- [å‚è€ƒé“¾æ¥](#å‚è€ƒé“¾æ¥)\n\n## é™æ€åšå®¢ä»å“ªé‡Œæ¥\n\né¦–å…ˆï¼Œé™æ€åšå®¢æ˜¯ä»€ä¹ˆï¼Ÿ\n\nåšå®¢ï¼Œä¸€èˆ¬è‡³å°‘æ¶‰åŠä¸¤ä¸ªé¡µé¢ï¼ˆæ¨¡å—ï¼‰ï¼šæ–‡ç« åˆ—è¡¨é¡µã€æ–‡ç« è¯¦æƒ…é¡µã€‚\n\né™æ€ï¼Œæ„å‘³ç€ä¸ä¾èµ–æœåŠ¡ç«¯ï¼Œæ„å‘³ç€ç”¨æˆ·è®¿é—®çš„å†…å®¹ï¼Œå°±æ˜¯ä¸€å †å·²ç»æ¿ä¸Šé’‰é’‰å†™æ­»çš„htmlã€cssã€jsä»£ç ã€‚\n\nè¿™å †ä»£ç ä»å“ªé‡Œæ¥ï¼Ÿäº’è”ç½‘çš„è›®è’æ—¶ä»£ï¼Œå¯èƒ½æ˜¯äººä»¬ä¸€ä¸ªä¸ªæ‰‹å†™çš„ï¼Œä½†ç°åœ¨æ˜¾ç„¶ä¸æ˜¯ï¼Œå®ƒä»¬å¿…ç„¶æ˜¯ç¼–è¯‘äº§ç‰©ã€‚\n\nä¸ºäº†èƒ½å¤Ÿè®¾è®¡æˆ‘ä»¬è‡ªå·±çš„åšå®¢ï¼Œæˆ‘ä»¬ä¸å¦¨ä»hexoå…¥æ‰‹ï¼Œå…ˆçœ‹çœ‹hexoçš„ç¼–è¯‘äº§ç‰©æ˜¯ä»€ä¹ˆâ€”â€”\n\n![hexoçš„ç¼–è¯‘äº§ç‰©](https://s2.loli.net/2023/01/04/LxVfBwpvloub93X.png)\n\nä¸Šå›¾æ˜¯å…¸å‹çš„hexoçš„ç¼–è¯‘äº§ç‰©ï¼Œæˆ‘ä»¬å…³æ³¨ä¸€ä¸‹htmlçš„å…¥å£æ–‡ä»¶ï¼š\n\n- è“æ¡†éƒ¨åˆ†ï¼Œæ˜¯åšå®¢çš„â€œå½’æ¡£â€åŠŸèƒ½ï¼Œä¸å±äºä¸Šé¢æåˆ°çš„åšå®¢åŸºæœ¬é¡µé¢ï¼Œå°±å…ˆæ— è§†ã€‚\n- çº¢æ¡†éƒ¨åˆ†ï¼Œé¦–å…ˆæ˜¯ä¸€ä¸ª`index.html`ï¼Œè¿™æ˜¯åšå®¢åˆ—è¡¨é¡µï¼›å…¶æ¬¡æ˜¯`${date}/${title}/index.html`ï¼Œè¿™æ˜¯ä¸¤ä¸ªåšå®¢è¯¦æƒ…é¡µï¼Œå¯¹åº”ç€ä¸¤ç¯‡åšæ–‡ã€‚\n\nè€Œåœ¨hexoé¡¹ç›®ä¸­ï¼Œä½ éœ€è¦è‡ªå®šä¹‰çš„å†…å®¹å¾ˆç®€å•ï¼Œè‡ªç„¶å°±æ˜¯åšå®¢å†…å®¹markdownæ–‡ä»¶ï¼Œéƒ½å­˜æ”¾åœ¨`source/_posts`ç›®å½•ä¸­ã€‚\n\n![hexoçš„åšå®¢å­˜æ”¾ç›®å½•](https://s2.loli.net/2023/01/04/rDgzhAdBL2Tf4y1.png)\n\nå› æ­¤ï¼Œhexoçš„åŸºæœ¬æ€è·¯å°±æ˜¯ï¼Œå°†æ–‡ä»¶å¤¹å†…çš„ä¸€ç³»åˆ—markdownæ–‡ä»¶ï¼Œæ„å»ºæˆç”¨æˆ·æœ€ç»ˆè®¿é—®çš„æ–‡ç« åˆ—è¡¨é¡µä¸æ–‡ç« è¯¦æƒ…é¡µã€‚æœ€åéƒ¨ç½²çš„å°±æ˜¯è¿™ä»½æ„å»ºäº§ç‰©ã€‚\n\nä»¥ä¸‹ä¸ºä¸€ä¸ªå…¸å‹çš„ä½¿ç”¨hexoæ­å»ºé™æ€åšå®¢çš„æµç¨‹ï¼š\n\n![hexoæµç¨‹](https://s2.loli.net/2023/01/13/4jVvm1eoY7sOMLK.png)\n\né‚£ä¹ˆhexoæ˜¯ä¸å¯æ›¿ä»£çš„ä¹ˆï¼Ÿ\n\nå½“ç„¶ä¸æ˜¯ï¼Œä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œhexoæ˜¯ä¸€ä¸ªSSGæ¡†æ¶ï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰SSGï¼Œå¯ä»¥å…ˆå»äº†è§£ä¸€ä¸‹[CSRï¼ŒSSRå’ŒSSGæ˜¯ä»€ä¹ˆ](https://juejin.cn/post/7039151040188383268)ã€‚\n\nå› æ­¤ï¼Œåªè¦æ˜¯æ”¯æŒSSGçš„æ¡†æ¶éƒ½å¯ä»¥ç”¨äºé™æ€åšå®¢çš„å¼€å‘ã€‚æˆ‘ä¸ªäººé€‰æ‹©äº†Reactç³»çš„[Next.js](https://nextjs.org/)ï¼Œå…¶ä»–æ¡†æ¶å¦‚[vue-ssg](https://vue-ssg.jamstacks.net/)ä¹Ÿéƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚\n\n## åšå®¢åŠŸèƒ½\n\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†é™æ€åšå®¢å¤§ä½“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä¹Ÿç¡®å®šäº†ä½¿ç”¨çš„æ¡†æ¶ã€‚\n\né¡¹ç›®åˆå§‹åŒ–å®Œæ¯•ï¼Œé¢å¯¹ç€hello-worldçš„ä¸€å¼ ç™½çº¸ï¼Œè¯¥è€ƒè™‘å¦‚ä½•å®ç°åšå®¢çš„å…·ä½“åŠŸèƒ½äº†ã€‚\n\n### æ–‡ç« åˆ—è¡¨\n\n![](https://s2.loli.net/2023/01/17/bMrK3mC8cDXo512.png)\n\nFeature list:\n\n1. åˆ—è¡¨ç”±ä¸€ä¸ªä¸ªæ–‡ç« æè¿°çš„å¡ç‰‡å †å è€Œæˆã€‚\n2. æ¯ä¸ªå¡ç‰‡çš„å†…å®¹æœ‰ï¼šæ ‡é¢˜ã€æ–‡ç« å‘å¸ƒæ—¶é—´ã€æ–‡ç« æè¿°ã€‚\n3. åˆ—è¡¨ä¸ºæŒ‰æ—¶é—´å€’åºæ’åºã€‚\n4. ç‚¹å‡»å¡ç‰‡åï¼Œå¯ä»¥è·³è½¬åˆ°æ–‡ç« çš„è¯¦æƒ…é¡µã€‚\n\nè€Œæˆ‘ä»¬çš„åŸææ–™åªæœ‰æ–‡ä»¶å¤¹å†…çš„ä¸€å †mdæ–‡ä»¶ï¼Œæ˜¾ç„¶æˆ‘ä»¬ä¼šéå†è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶è¯»å–å„ä¸ªæ–‡ä»¶ï¼Œä»¥è·å¾—ä¿¡æ¯ã€‚\n\nä¸”ç”±äºSSGçš„ç‰¹æ€§ï¼Œè¿™ä¸ªæ­¥éª¤ä¼šåœ¨å¼€å‘è€…æœ¬åœ°æˆ–æœåŠ¡ç«¯ï¼ˆå³éæµè§ˆå™¨ç«¯ã€å®¢æˆ·ç«¯ï¼‰å®Œæˆï¼Œå› æ­¤éœ€è¦ç”¨åˆ°nodeã€‚\n\n**è¯»å–æ–‡ä»¶ä¿¡æ¯**\n\nè¯»å–æ–‡ä»¶ï¼Œè‡ªç„¶è¦ç”¨åˆ°nodeçš„`fs`ï¼Œç”±äº`fs`ä¸æ”¯æŒPromiseï¼Œé¢å¤–å¼•å…¥[fs-extra](https://www.npmjs.com/package/fs-extra)ä¹Ÿæ˜¯ä¸é”™çš„ã€‚\n\n```javascript\nconst fse = require('fs-extra');\n\nconst postFileNames = await fse.readdir('./_posts'); // postFileNamesä¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ååˆ—è¡¨\n```\n\næœ‰äº†æ–‡ä»¶ååˆ—è¡¨ï¼Œå°±å¯ä»¥ç»„è£…å‡ºæ¯ä¸ªæ–‡ä»¶çš„è®¿é—®è·¯å¾„ï¼ˆä½¿ç”¨[process.cwd](https://www.geeksforgeeks.org/node-js-process-cwd-method/)è·å–å½“å‰è·¯å¾„ï¼‰ã€‚\n\n```javascript\nconst path = require('path');\n\nconst mdPathList = postFileNames.map((name) =\u003e ({\n  name,\n  path: path.join(process.cwd(), '_posts', name)\n}))\n```\n\näºæ˜¯æˆ‘ä»¬å°±å¯ä»¥éå†è®¿é—®åˆ°æ¯ä¸ªæ–‡ä»¶çš„å…·ä½“ä¿¡æ¯ã€‚\n\n```javascript\nconst matter = require('gray-matter');\n\nfor (const { name, path } of mdPathList) {\n        const mdData = await fse.readFile(path);\n        const { data: mdInfo, content } = matter(mdData);\n        const { title, date, skip = false } = mdInfo;\n  // ...\n}\n```\n\nè¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·`gray-matter`ï¼Œå®ƒå¯ä»¥è¯»å–å‡ºæ–‡ä»¶çš„front-matterï¼Œå³yamlæ ¼å¼çš„ä¸€æ®µæ–‡æœ¬ã€‚\n\n![front-matter](https://s2.loli.net/2023/01/17/JNlPTeR6dIfhkqF.png)\n\näºæ˜¯æˆ‘ä»¬è·å¾—äº†æ¯ç¯‡åšå®¢çš„æ ‡é¢˜ä¸æ—¥æœŸã€‚\n\n**è·å–åšå®¢çš„æ¦‚è¦æè¿°**\n\nå½“ç„¶ï¼Œæ¦‚è¦æè¿°ä¹Ÿæ˜¯å¯ä»¥å†™åœ¨front-matterä¸­ï¼Œå°¤å…¶æ˜¯æ¦‚è¦ä¸æ­£æ–‡å†…å®¹ç›¸äº’ç‹¬ç«‹çš„æ—¶å€™ã€‚\n\nä½†å¦‚æœæ˜¯åƒæˆ‘è¿™æ ·çš„æ‡’äººï¼Œåªæƒ³ç”¨æ­£æ–‡ä¸­çš„ä¸€æ®µè¯å½“æ¦‚è¦ï¼Œè‡ªç„¶è¿™ä¸ªæ—¶å€™è¦ä»æ­£æ–‡å†…å®¹ä¸­å»è¯»å–å¹¶æˆªå–æ–‡æœ¬äº†ã€‚\n\nç”±äºæˆ‘ä»¬è¯»å–åˆ°çš„æ–‡ä»¶æ˜¯markdownçš„åŸå§‹å†…å®¹ï¼Œä¼šæœ‰`## ---`è¿™æ ·çš„æ ‡è®°ç¬¦å·ï¼Œä¸”æˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›æè¿°æ˜¯ä¸€ä¸ªäºŒçº§æ ‡é¢˜ï¼Œè€Œæ˜¯æ­£æ–‡æ–‡æœ¬ï¼Œæ‰€ä»¥å°±éœ€è¦ç”¨åˆ°ä¸€äº›æ­£åˆ™åŒ¹é…ï¼Œæ¥è·å–åˆ°ä¸€æ®µçº¯æ–‡æœ¬æè¿°ã€‚\n\nä»¥ä¸‹æ–¹æ³•æ¥è‡ªäº[stackoverflow](https://stackoverflow.com/a/69656654)ï¼Œå¯ä»¥ç”¨äºå‚è€ƒã€‚\n\n```javascript\nfunction getDescription(md) {\n    // æ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼è¿™äº›éƒ½æ˜¯æˆ‘ä»¬ä¸æƒ³ç”¨äºæè¿°çš„ï¼Œéœ€è¦é€šè¿‡æ­£åˆ™è¿‡æ»¤æ‰\n    const regex = {\n        title: /^#\\s+.+/,\n        heading: /^#+\\s+.+/,\n        custom: /\\$\\$\\s*\\w+/,\n        ol: /\\d+\\.\\s+.*/,\n        ul: /\\*\\s+.*/,\n        task: /\\*\\s+\\[.]\\s+.*/,\n        blockQuote: /\u003e.*/,\n        table: /\\|.*/,\n        image: /!\\[.+\\]\\(.+\\).*/,\n        url: /\\[.+\\]\\(.+\\).*/,\n        codeBlock: /`{3}\\w+.*/,\n    };\n\n    const isTitle = (str) =\u003e regex.title.test(str);\n    const isHeading = (str) =\u003e regex.heading.test(str);\n    const isCustom = (str) =\u003e regex.custom.test(str);\n    const isOl = (str) =\u003e regex.ol.test(str);\n    const isUl = (str) =\u003e regex.ul.test(str);\n    const isTask = (str) =\u003e regex.task.test(str);\n    const isBlockQuote = (str) =\u003e regex.blockQuote.test(str);\n    const isImage = (str) =\u003e regex.image.test(str);\n    const isUrl = (str) =\u003e regex.url.test(str);\n    const isCodeBlock = (str) =\u003e regex.codeBlock.test(str);\n\n    if (!md) return \"\";\n    const tokens = md.split(\"\\n\").filter(item =\u003e !!item); // å»é™¤äº†ç©ºè¡Œ\n    for (let i = 0; i \u003c tokens.length; i++) {\n        if (\n            isTitle(tokens[i]) ||\n            isHeading(tokens[i]) ||\n            isCustom(tokens[i]) ||\n            isOl(tokens[i]) ||\n            isUl(tokens[i]) ||\n            isTask(tokens[i]) ||\n            isBlockQuote(tokens[i]) ||\n            isImage(tokens[i]) ||\n            isUrl(tokens[i]) ||\n            isCodeBlock(tokens[i])\n        )\n            continue;\n\n      \t// è¿”å›ç¬¬ä¸€ä¸ªéä¸Šè¿°åŒ¹é…çš„å†…å®¹\n        return `${tokens[i].slice(0, 100)}......`;\n    }\n    return \"\"\n}\n```\n\n**ç”Ÿæˆåšå®¢id**\n\nå¯¹äºæ¯ä¸€ç¯‡åšå®¢ï¼Œæˆ‘ä»¬æœ€ç»ˆéƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„idï¼Œä¸€ç§æ–¹æ³•æ˜¯ç›´æ¥ç”¨æ ‡é¢˜ä½œidï¼ˆåšå®¢æ ‡é¢˜æ˜¾ç„¶ä¸åº”è¯¥é‡å¤ï¼‰ã€‚ä¸è¿‡æˆ‘ä»¬ä¸€èˆ¬éœ€è¦åšä¸€äº›encodeï¼ˆ[encodeURIComponent](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)ï¼‰ï¼Œå¦åˆ™ä¸­æ–‡åœ¨urlä¸­å¾ˆå®¹æ˜“å‡ºé—®é¢˜ã€‚\n\nåªä¸è¿‡è¿™ç§æ–¹å¼ç”Ÿæˆçš„URIä¸€èˆ¬ä¼šè¶…çº§è¶…çº§é•¿ï¼Œæ‰€ä»¥æˆ‘ä¸ªäººç”¨ä¸€äº›ç®€å•çš„æ–¹æ³•ç”Ÿæˆäº†æ•°å­—idï¼Œå¹¶æœ€ç»ˆå­˜å‚¨ä¸ºåœ¨ä¸€ä¸ªjsonæ–‡ä»¶ä¸­ã€‚\n\næœ€åæˆ‘ç”Ÿæˆäº†ä¸€ä¸ªjsonæ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨è¿™äº›æè¿°ä¿¡æ¯ã€‚\n\n![](https://s2.loli.net/2023/01/17/7t9CfVzwLnW4y5l.png)\n\n### é¢„æ¸²æŸ“çš„åŠ¨æ€è·¯ç”±\n\næ—¢ç„¶æˆ‘ä»¬äº‹å…ˆå°±çŸ¥é“åšå®¢æœ‰å“ªäº›ï¼Œä¸”æœ‰äº†ä¸€ä»½jsonæ–‡ä»¶æ˜ å°„å¥½äº†idä¸æ–‡ä»¶çš„å…³ç³»ï¼Œå› æ­¤åŠ¨æ€è·¯ç”±è‡ªç„¶æ˜¯å¯ä»¥é¢„æ¸²æŸ“çš„ã€‚\n\nä¸‹é¢æ˜¯next.jsä¸­é¢„æ¸²æŸ“çš„æ–¹æ³•ï¼š[getStaticProps](https://nextjs.org/docs/basic-features/data-fetching/get-static-props)ã€‚\n\n```javascript\n// postMapæ˜¯ä¸Šæ–‡ä¸­ç”Ÿæˆçš„jsonæ–‡ä»¶\nexport async function getStaticPaths() {\n    return {\n        // pathå³é¢„æ¸²æŸ“çš„è·¯ç”±\n        paths: Object.keys(postMap).map(id =\u003e ({\n            params: { id }\n        })),\n        fallback: false\n    }\n}\n\nexport async function getStaticProps(context) {\n    // æ­¤å¤„çš„idå°±æ˜¯ä¸Šé¢çš„id\n    const { id } = context.params;\n    const { name, title, date } = postMap[id];\n    const mdData = await fse.readFile(`${postsDirPath}/${name}`);\n    const { content: mdText } = matter(mdData);\n    return {\n        props: {\n            id,\n            title,\n            date,\n            mdText,\n        }\n    }\n}\n```\n\n### æ–‡ç« è¯¦æƒ…\n\næ–‡ç« è¯¦æƒ…ä¸­çš„å…³é”®ç‚¹æ˜¯ï¼Œå¦‚ä½•å°†markdownæ¸²æŸ“ä¸ºç”¨æˆ·å‹å¥½çš„Htmlï¼Œä½ å¯èƒ½ä¼šéœ€è¦åšä»¥ä¸‹å‡ ä»¶äº‹ï¼š\n\n**Markdown to Html**\n\nè¿™é‡Œå¯ä»¥ç”¨[React-Markdown](https://github.com/remarkjs/react-markdown)æ¥å®ç°ï¼Œæ˜¾ç„¶å®ƒReactå‹å¥½ã€‚å…·ä½“çš„ç”¨æ³•å°±ä¸èµ˜è¿°äº†ã€‚\n\nä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒReact-Markdownéœ€è¦åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ç›´æ¥å°†å…¶å†™åœ¨renderä¸­ï¼Œè€Œæ˜¯è¦å¼‚æ­¥æ¸²æŸ“ï¼ˆå¯ä»¥ä½¿ç”¨useEffectï¼‰ã€‚\n\n**é«˜äº®code**\n\nåŒæ ·æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ä»¥é…å¥—ä½¿ç”¨çš„packageï¼š[react-syntax-highlighter](https://github.com/react-syntax-highlighter/react-syntax-highlighter)ã€‚\n\né…åˆReactMarkdownçš„`components`å±æ€§ï¼Œå¯ä»¥å¯¹codeè¿›è¡Œå®šåˆ¶ã€‚\n\n**æ”¯æŒé”šç‚¹**\n\nå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ç›®å½•å¯¼èˆªï¼Œæ ‡é¢˜çš„é”šç‚¹å°±éå¸¸é‡è¦äº†ã€‚\n\nåŒæ ·åœ¨ReactMarkdownçš„`components`å±æ€§ï¼Œå¯ä»¥å¯¹`h2`ï¼Œ`h3`ç­‰è¿›è¡Œå®šåˆ¶ï¼Œåœ¨è¿™é‡Œæ·»åŠ ç”Ÿæˆé”šç‚¹çš„é€»è¾‘ã€‚\n\n**æ”¯æŒhtml in markdown**\n\nå¦‚æœä½ è¦åœ¨markdownä¸­æ’å…¥codepenã€sandboxä¹‹ç±»çš„ä»£ç ç¤ºä¾‹ï¼Œä¸€èˆ¬éƒ½éœ€è¦é‡‡ç”¨html in markdownçš„æ–¹å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ReactMarkdownä¼šå°†æ‰€æœ‰htmlæ ‡ç­¾éƒ½æ— å®³åŒ–å¤„ç†ï¼Œæƒ³è¦è®©è¿™äº›htmlç”Ÿæ•ˆï¼Œå¯ä»¥ä½¿ç”¨[rehype-raw](https://github.com/rehypejs/rehype-raw)ã€‚\n\n**å®Œæ•´ä»£ç **\n\nè¯·è§[github](https://github.com/B-sirius/b-sirius.github.io/blob/0.1.0/pages/posts/%5Bid%5D.js)ã€‚\n\n### RSSæ”¯æŒ\n\nRSSçš„æœ¬è´¨å…¶å®å¾ˆç®€å•ï¼Œå®ƒæ˜¯ä¸€ä»½æŒ‰ç…§è§„åˆ™å®šåˆ¶çš„é™æ€xmlæ–‡ä»¶ï¼Œå†…å®¹æ˜¯éœ€è¦é˜…è¯»çš„å†…å®¹çš„åŸºç¡€ä¿¡æ¯ã€‚æˆ‘ä»¬ä¹‹å‰å·²ç»å¤„ç†è¿‡æ–‡ç« åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«çš„ä¿¡æ¯æ°æ°å°±æ˜¯åšå®¢çš„RSSåº”è¯¥åŒ…å«çš„ï¼šæ ‡é¢˜ã€æ—¥æœŸã€ç®€ä»‹ã€è·³è½¬åœ°å€ã€‚è€ŒRSSè®¢é˜…æºä¼šé€šè¿‡è¿™ä¸ªxmlçš„æ–‡ä»¶åœ°å€æ¥è¿›è¡Œæ‹‰å–ã€‚\n\nå½“ç„¶ï¼Œæœ‰[RSS](https://www.npmjs.com/package/rss)è¿™ä¸ªåŒ…å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆè¿™ä¸ªxmlæ–‡ä»¶ï¼Œå¹¶ä¸å¤æ‚ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒ[ä»£ç ](https://github.com/B-sirius/b-sirius.github.io/blob/0.1.0/server/generateRSSFeed.js)ã€‚\n\n## åšå®¢ä½“éªŒ\n\nåœ¨ä¸Šé¢æåˆ°çš„[CSRï¼ŒSSRå’ŒSSGæ˜¯ä»€ä¹ˆ](https://juejin.cn/post/7039151040188383268)ï¼Œå…¶ä¸­æåˆ°äº†SSGçš„æ€§èƒ½æ˜¯å¾ˆå¥½çš„ã€‚ä½†çœŸæ­£å½±å“åšå®¢ä½“éªŒçš„è¦ç´ æ˜¯å¾ˆå¤šçš„ï¼Œæˆ‘è§‰å¾—å¯ä»¥ä»ä»¥ä¸‹å‡ æ–¹é¢æ¥è€ƒè™‘ï¼š\n\n1. ç†è®ºæ€§èƒ½ã€ä½“éªŒï¼Œå¯ä»¥ç”¨Chromeçš„Lighthouseæ¥æµ‹è¯•ï¼Œé€‚åˆä½œä¸ºå‚è€ƒã€‚\n2. bundleæ˜¯å¦åˆç†ï¼Œå¯ä»¥ä½¿ç”¨`@next/bundle-analyzer`ä¹‹ç±»çš„åº“æ¥å¸®åŠ©åˆ†æã€‚\n3. è®¾å¤‡é€‚é…æ€§ï¼šå¤§è‡´ä»ç§»åŠ¨ç«¯ã€å¹³æ¿ã€ç”µè„‘è¿™å‡ ç§è®¾å¤‡ç±»å‹æ¥è€ƒè™‘ã€‚\n   1. è§†è§‰æ˜¯å¦åˆç†ï¼›\n   2. äº¤äº’æ˜¯å¦åˆç†ï¼›\n   3. è¯·æ±‚èµ„æºæ˜¯å¦åˆç†ï¼ˆå¦‚è¯·æ±‚çš„å›¾ç‰‡å°ºå¯¸ï¼‰ï¼›\n4. ç½‘ç»œç¯å¢ƒï¼Œå¯ä»¥ç”¨[ç«™é•¿å·¥å…·çš„ç½‘ç«™æµ‹é€Ÿå·¥å…·](https://tool.chinaz.com/sitespeed)ï¼Œæ£€æŸ¥å¯¹å¤§é™†ç”¨æˆ·æ˜¯å¦å‹å¥½ã€‚\n5. ç¤¾äº¤å¹³å°åˆ†äº«å‹å¥½ï¼Œæ˜¯å¦æœ‰favicon.icoï¼Œæ˜¯å¦æœ‰ç›¸åº”çš„metadataé…ç½®ã€‚\n6. SEOä¼˜åŒ–ï¼ŒåŒæ ·å¯ä»¥ç”¨ç«™é•¿å·¥å…·å¸®åŠ©æ£€æŸ¥ã€‚\n\n---\n\nä»¥ä¸ŠåŸºæœ¬å°±æ˜¯æˆ‘åœ¨æ­å»ºè‡ªå·±çš„é™æ€åšå®¢æ—¶ï¼Œæ‰€è€ƒè™‘åˆ°çš„ä¸œè¥¿ã€‚è®¸å¤šæåˆ°çš„å¯ä¼˜åŒ–é¡¹æˆ–è®¸è¿˜æ²¡æœ‰å®æ–½ï¼Œä½†è¿˜æ˜¯æ¬¢è¿æ¥è®¿é—®æˆ‘çš„åšå®¢[LWDW!](https://b-sirius.github.io/posts)ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æŸ¥çœ‹[æˆ‘çš„githubä»“åº“](https://github.com/B-sirius/b-sirius.github.io/tree/0.1.0)ï¼Œä½œä¸ºå®ç°çš„å‚è€ƒã€‚\n\n## å‚è€ƒé“¾æ¥\n\n1. [CSRï¼ŒSSRå’ŒSSGæ˜¯ä»€ä¹ˆ](https://juejin.cn/post/7039151040188383268)\n2. [Next.js](https://nextjs.org/)\n3. [vue-ssg](https://vue-ssg.jamstacks.net/)\n4. [fs-extra](https://www.npmjs.com/package/fs-extra)\n5. [process.cwd](https://www.geeksforgeeks.org/node-js-process-cwd-method/)\n6. [Extract first p and h1 tag content from markdown](https://stackoverflow.com/a/69656654)\n7. [encodeURIComponent](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)\n8. [getStaticProps](https://nextjs.org/docs/basic-features/data-fetching/get-static-props)\n9. [React-Markdown](https://github.com/remarkjs/react-markdown)\n10. [react-syntax-highlighter](https://github.com/react-syntax-highlighter/react-syntax-highlighter)\n11. [rehype-raw](https://github.com/rehypejs/rehype-raw)\n12. [LWDW!](https://b-sirius.github.io/posts)\n13. [b-sirius.github.io](https://github.com/B-sirius/b-sirius.github.io/tree/0.1.0)\n\n","description":"hexoä¸€ç›´æ˜¯é™æ€åšå®¢çš„é¦–é€‰ä¹‹ä¸€ï¼Œå®ƒå¼€ç®±å³ç”¨çš„ç‰¹ç‚¹ä»¥åŠç›¸å¯¹ä¸°å¯Œçš„ä¸»é¢˜é€‰æ‹©è®©ä½¿ç”¨è€…å¯ä»¥èšç„¦äºåšå®¢å†…å®¹çš„ç¼–å†™ï¼ŒåŒæ—¶æ‹¥æœ‰ä¸€ä¸ªç›¸å¯¹ç¾è§‚çš„ç•Œé¢ã€‚ä½†å¦‚æœä½ æ˜¯ä¸€ä¸ªå¯¹åšå®¢å†…å®¹æœ‰é«˜åº¦è‡ªå®šä¹‰éœ€æ±‚çš„å¼€å‘è€…ï¼Œä¸”å¹¶æ²¡æœ‰åˆ†äº«åšå®¢......"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"use-nextjs-create-SSG-blog"},"buildId":"ebQpUXIPak7dk5fUIaYsa","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>