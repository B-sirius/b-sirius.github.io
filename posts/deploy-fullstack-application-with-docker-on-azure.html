<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>LWDW!</title><meta name="description" content="ä»Devåˆ°DevOpsï¼Œå€ŸåŠ©Dockeråœ¨Azureä¸Šéƒ¨ç½²ä½ çš„ç¬¬ä¸€ä¸ªå…¨æ ˆåº”ç”¨"/><meta property="og:title" content="ä»Devåˆ°DevOpsï¼Œå€ŸåŠ©Dockeråœ¨Azureä¸Šéƒ¨ç½²ä½ çš„ç¬¬ä¸€ä¸ªå…¨æ ˆåº”ç”¨"/><meta property="og:description" content="æœ¬åœ°åº”ç”¨å¦‚ä½•éƒ¨ç½²çº¿ä¸Šï¼Œdockerå¦‚ä½•å¸®ä½ è§£æ”¾åŒæ‰‹ï¼Œäº‘æœåŠ¡ç©¶ç«Ÿé•¿ä½œä»€æ ·ï¼Œæœ¬æ–‡å¸¦ä½ ä¸€æ¢ç©¶ç«Ÿï¼"/><meta name="next-head-count" content="6"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#ffffff"/><meta name="color-scheme" content="dark light"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#000"/><meta property="og:type" content="website"/><meta property="og:image" content="https://s2.loli.net/2023/01/18/42YTZxzePtR7jy9.png"/><meta property="og:url" content="https://b-sirius.github.io"/><link rel="preload" href="/_next/static/css/aef510c8abf24c2c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aef510c8abf24c2c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b51a0fb142b75fa0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b51a0fb142b75fa0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-165611dbf69200d4.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-673a4fae4a27af6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0da236044dc4e5fc.js" defer=""></script><script src="/_next/static/chunks/332-751efa0ececa7b8e.js" defer=""></script><script src="/_next/static/chunks/664-1b4479b4462ded63.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-2b4aeb585f50200f.js" defer=""></script><script src="/_next/static/DHSDf10hmJmuXZS4WGULG/_buildManifest.js" defer=""></script><script src="/_next/static/DHSDf10hmJmuXZS4WGULG/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-9d615c10-0 gPcDhw"><div class="sc-868660b6-0 hptnUW"><div class="sc-bbc62a17-1 bGsVUC"><div class="sc-bbc62a17-0 dSoHmK"><a class="sc-bbc62a17-2 gGxkic" href="/">[<!-- -->Home<!-- -->]</a><a class="sc-bbc62a17-2 gGxkic" href="/posts">[<!-- -->Posts<!-- -->]</a><a class="sc-bbc62a17-3 bMRVsR" rel="noopener noreferrer" target="_blank" href="https://github.com/B-sirius">[<!-- -->Github<!-- -->]</a><a class="sc-bbc62a17-3 bMRVsR" rel="noopener noreferrer" target="_blank" href="https://b-sirius.github.io/rss.xml">[<!-- -->RSS<!-- -->]</a></div><div class="sc-f71203c5-0 cEuFcK"><h1 class="sc-f71203c5-1 BdBtZ">LWDW!</h1><p class="sc-f71203c5-2 gXENPI">Learn the work from doing the workğŸº</p></div></div><div class="sc-87e76b53-0 sc-77cf2bd4-0 hkJmkj dxfnCq"><div><div class="sc-ba46d312-0 hOKWax"><div class="sc-ba46d312-2 ibvPNw">ä»Devåˆ°DevOpsï¼Œå€ŸåŠ©Dockeråœ¨Azureä¸Šéƒ¨ç½²ä½ çš„ç¬¬ä¸€ä¸ªå…¨æ ˆåº”ç”¨</div><div class="sc-ba46d312-3 hcdRzS">Posted on <!-- -->2024-05-24</div></div></div></div><div class="sc-87e76b53-0 hkJmkj"><div><div class="sc-ba46d312-1 dmDrcr"><div class="sc-e9ca5221-0 czeavQ"><h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<p>ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éƒ½å·²ç»å¾ˆç†Ÿæ‚‰æœ¬åœ°å¼€å‘ç¯å¢ƒäº†ï¼Œä½†å¦‚ä½•å°†ä¸€ä¸ªæœ¬åœ°åº”ç”¨éƒ¨ç½²åˆ°çº¿ä¸Šï¼Œæˆ–è®¸è¿˜æ˜¯è§¦åŠåˆ°äº†ä½ çš„ä¸€äº›çŸ¥è¯†ç›²åŒºã€‚</p>
<p><img src="https://s2.loli.net/2024/05/16/ge3lIN4HRYBDQUL.png" alt="æœ¬åœ°ä¸€åˆ‡çˆ½ï¼Œçº¿ä¸Šç«è‘¬åœº"/></p>
<p>æœ¬æ–‡å°†ä¸€æ­¥æ­¥çš„å¸¦ä½ éƒ¨ç½²ä¸€ä¸ªåŒ…å«ç‹¬ç«‹å‰åç«¯çš„å®Œæ•´åº”ç”¨åˆ°<strong>Azure</strong>ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©ä½ ç†è§£éƒ¨ç½²åº”ç”¨åˆ°çº¿ä¸Šçš„å¤§è‡´æ€è·¯ã€‚</p>
<p>æœ¬æ–‡æ‰€æ¶‰åŠçš„åº”ç”¨ä»¥åŠworkflowçš„æºä»£ç ï¼š<a href="https://github.com/B-sirius/fullstack-demo" target="_blank" rel="noreferrer">fullstack-demo</a></p>
<h2 id="ä¸»è§’ç™»åœº">ä¸»è§’ç™»åœº</h2>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œä»‹ç»ä¸€ä¸‹æœ¬æ–‡çš„ä¸»è§’ä»¬ï¼š</p>
<ul>
<li>åº”ç”¨æ„æˆ<!-- -->
<ul>
<li>å‰ç«¯ï¼šReact</li>
<li>åç«¯ï¼šNodejs</li>
<li>ORMï¼šPrisma</li>
<li>æ•°æ®åº“ï¼šPostgresQL</li>
</ul>
</li>
<li>ä»£ç æ‰˜ç®¡ï¼šGithub</li>
<li>CICDï¼šGithub Actions</li>
<li>å®¹å™¨æŠ€æœ¯ï¼šDocker</li>
<li>å®¹å™¨é•œåƒæ‰˜ç®¡ï¼šDocker Hub</li>
<li>åå‘ä»£ç†ï¼šNginx</li>
<li>äº‘æœåŠ¡ï¼šAzure<!-- -->
<ul>
<li>App Service</li>
<li>æ•°æ®åº“æœåŠ¡ï¼šAzure Database for PostgreSQL flexible server</li>
</ul>
</li>
</ul>
<p>å¥½ï¼Œåœä¸€ä¸‹ï¼Œçœ‹åˆ°è¿™é‡Œå…¶å®ä¸éš¾çœ‹å‡ºæ­¤æ¬¡æ•™ç¨‹çš„å¤§è‡´æ€è·¯ï¼Œè®©æˆ‘æ‹‰ä¸€å¼ å›¾ç»™ä½ æ„Ÿå—ä¸€ä¸‹ï¼š</p>
<p><img src="https://s2.loli.net/2024/05/16/RkLaJhfApr6giOF.png" alt="pipelineæœ€ç»ˆæ•ˆæœ"/></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„pipelineä»¥å®¹å™¨æŠ€æœ¯ä¸ºæ ¸å¿ƒï¼Œå¦‚æœä½ å¯¹dockerä¸€ç±»çš„å®¹å™¨æŠ€æœ¯è¿˜ä¸ç†Ÿæ‚‰ï¼Œå»ºè®®å…ˆå»è‡ªè¡Œäº†è§£ä¸‹ã€‚</p>
<p>å¦å¤–ï¼Œè¯¥æµç¨‹ç»éçº¿ä¸Šéƒ¨ç½²çš„<strong>æœ€ä½³å®è·µ</strong>ï¼Œåªæ˜¯æä¾›ä¸€ç§åŸºäºå®¹å™¨çš„éƒ¨ç½²æ€è·¯ï¼Œä¸”è¯¥æµç¨‹ä¹Ÿç¼ºä¹å¾ˆå¤šproductionç¯å¢ƒåº”è¯¥è€ƒè™‘çš„éƒ¨åˆ†ï¼Œè¿˜è¯·å¤§å®¶ä»…ä½œå­¦ä¹ å‚è€ƒã€‚</p>
<p>æœ€åï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰ä»¥ä¸Šçš„æŸä¸ªå…·ä½“çš„æœåŠ¡ï¼Œä¹Ÿä¸è¦ç´§ï¼Œå› ä¸ºå…¶ä¸­ä»»ä½•ä¸€å—éƒ½å¯ä»¥è¢«å…¶ä»–ç±»ä¼¼çš„æœåŠ¡æ›¿ä»£ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>Azure =&gt; AWS</li>
<li>Docker Hub =&gt; Azure Container Registry</li>
<li>Github =&gt; Gitlab</li>
</ul>
<p>å¥½ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±å¼€å§‹ä¸€æ­¥æ­¥çš„å®ç°ä¸Šé¢çš„éƒ¨ç½²æµç¨‹ï¼</p>
<h3 id="åˆ†æä¸€ä¸‹æœ¬æ¬¡è¦éƒ¨ç½²çš„webåº”ç”¨">åˆ†æä¸€ä¸‹æœ¬æ¬¡è¦éƒ¨ç½²çš„Webåº”ç”¨</h3>
<p>åœ¨æƒ³ç€å¦‚ä½•éƒ¨ç½²çº¿ä¸Šä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦å¯¹åº”ç”¨æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼š</p>
<ol>
<li>ç”±å“ªäº›æœåŠ¡æ„æˆ</li>
<li>è¿™äº›æœåŠ¡åœ¨æœ¬åœ°æ˜¯å¦‚ä½•å¯åŠ¨çš„</li>
<li>ç¡®ä¿èƒ½å¤Ÿåœ¨æœ¬åœ°å°†åº”ç”¨å®Œæ•´çš„è¿è¡Œèµ·æ¥</li>
</ol>
<p>æœ¬æ¬¡è¦éƒ¨ç½²çš„åº”ç”¨æ˜¯ä¸€ä¸ªBBSï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸Šé¢å®Œæˆå‘å¸–ï¼Œé¡¶å¸–ï¼Œè¸©è´´è¿™æ ·éå¸¸åŸºç¡€çš„åŠŸèƒ½ã€‚</p>
<p>è¿™ä¸ªåº”ç”¨ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li>Reactæ­å»ºçš„å®¢æˆ·ç«¯</li>
<li>Nodejsæ­å»ºçš„æœåŠ¡ç«¯</li>
<li>postgresæ•°æ®åº“æœåŠ¡ï¼ŒæœåŠ¡ç«¯å°†ä½¿ç”¨Prismaä¸å…¶äº¤äº’</li>
</ol>
<p>æ˜¯éå¸¸å…¸å‹çš„å‰åç«¯åˆ†ç¦»åº”ç”¨ã€‚</p>
<h3 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h3>
<p>æˆ‘ä»¬å…ˆçœ‹å®¢æˆ·ç«¯çš„éƒ¨åˆ†ï¼Œå®ƒæœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li>ä½¿ç”¨webpackæ„å»ºçš„Reactåº”ç”¨</li>
<li>æ„å»ºäº§ç‰©ä¸ºçº¯é™æ€èµ„æº</li>
</ul>
<p>å®ƒæœ¬åœ°å¯åŠ¨çš„æ–¹å¼ï¼Œåœ¨<code>package.json</code>ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p>
<pre class="language-json"><code class="language-json"><span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --mode development&quot;</span>
</code></pre>
<p><code>webpack-dev-server</code>ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ˜¯ç”¨äºæœ¬åœ°å¼€å‘çš„æœåŠ¡ï¼Œè™½ç„¶æˆ‘ä»¬ä¸ä¼šåœ¨çº¿ä¸Šä½¿ç”¨å®ƒï¼Œä½†æ˜¯æœ‰å¿…è¦çœ‹çœ‹å®ƒçš„ç›¸å…³é…ç½®ï¼Œäºæ˜¯æˆ‘ä»¬å°±ç‚¹å¼€äº†<code>webpack.config.ts</code>ï¼Œå¯»æ‰¾å…¶ä¸­çš„<code>devServer</code>å­—æ®µï¼š</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">router</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token string">&quot;http://localhost:8000&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// remove path</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªé‡è¦ä¿¡æ¯ï¼Œåœ¨æœ¬åœ°å¼€å‘æ—¶ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯åº”ç”¨ä¼šè¢«æš´éœ²åœ¨localhost:3000</li>
<li>webpackçš„åå‘ä»£ç†åŠŸèƒ½åšäº†ä¸¤ä»¶äº‹ï¼š<!-- -->
<ol>
<li>å°†/apiæ¥æºçš„è¯·æ±‚æŒ‡å‘äº†localhost:8000</li>
<li>é‡å†™äº†pathï¼Œè·¯å¾„ä¸­çš„<code>/api</code>éƒ¨åˆ†è¢«ç§»é™¤äº†</li>
</ol>
</li>
</ol>
<p>ä¸éš¾çŒœæµ‹ï¼Œ8000ç«¯å£æš´éœ²çš„å°±æ˜¯æˆ‘ä»¬æœ¬åœ°çš„æœåŠ¡ç«¯åº”ç”¨ã€‚</p>
<p>æ‰€ä»¥å®¢æˆ·ç«¯åœ¨æœ¬åœ°æ˜¯è¿™æ ·å·¥ä½œçš„ï¼š</p>
<p><img src="https://s2.loli.net/2024/05/17/nzPAakJ6RDcHdNu.png" alt="å®¢æˆ·ç«¯çš„è¿ä½œæ–¹å¼"/></p>
<h3 id="æœåŠ¡ç«¯">æœåŠ¡ç«¯</h3>
<p>æœåŠ¡ç«¯æ˜¯ä¸€ä¸ªNode.jsåº”ç”¨ï¼Œæ›´å‡†å»çš„è¯´æ˜¯Nest.jsåº”ç”¨ï¼ˆä¸€ä¸ªåŸºäºNode.jsçš„æ¡†æ¶ï¼‰ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ƒåœ¨æœ¬åœ°æ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼š</p>
<pre class="language-json"><code class="language-JSON"><span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nest start&quot;</span>
</code></pre>
<p>ä¸æ˜¯å¾ˆæœ‰è¥å…»ï¼Œæ—¢ç„¶è¿™é‡Œæ²¡æœ‰é¢å¤–çš„å‚æ•°ï¼Œé‚£æˆ‘ä»¬å°±çœ‹çœ‹Nestjsçš„å…¥å£æ–‡ä»¶<code>main.ts</code>ï¼š</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword control-flow">await</span> app<span class="token punctuation">.</span><span class="token method function property-access">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>æ‰€ä»¥æœåŠ¡ç«¯æ˜¯åœ¨æœ¬åœ°8000ç«¯å£è¿è¡Œçš„ï¼Œç¬¦åˆæˆ‘ä»¬ä¸Šé¢çš„æ¨æµ‹ã€‚</p>
<h3 id="æ•°æ®åº“">æ•°æ®åº“</h3>
<p>æœ€åæˆ‘ä»¬çœ‹ä¸€ä¸‹æ•°æ®åº“ï¼Œæ•°æ®åº“çš„å¯åŠ¨éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>docker-compose</code>ä¸­çœ‹åˆ°ï¼Œè¿™é‡Œä½¿ç”¨äº†postgreså®˜æ–¹é•œåƒï¼Œå¹¶ä¼ å…¥äº†ä¸€äº›å¿…è¦çš„å‚æ•°ç”¨äºæœ¬åœ°å¯åŠ¨ã€‚å¯ä»¥çœ‹å‡ºæ•°æ®åº“æœåŠ¡å¯åŠ¨åœ¨5432ç«¯å£ã€‚</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token comment"># Postgres container</span>
<span class="token key atrule">postgres</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span><span class="token number">15</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> POSTGRES_USER=myuser
    <span class="token punctuation">-</span> POSTGRES_PASSWORD=mypassword
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> postgres<span class="token punctuation">:</span>/var/lib/postgresql/data
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&#x27;5432:5432&#x27;</span>
</code></pre>
<h3 id="åœ¨æœ¬åœ°å°†æ‰€æœ‰çš„æœåŠ¡è·‘èµ·æ¥">åœ¨æœ¬åœ°å°†æ‰€æœ‰çš„æœåŠ¡è·‘èµ·æ¥</h3>
<p>é™¤äº†ä¸Šè¿°çš„å‘½ä»¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é¢å¤–åšä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li><strong>è®¾ç½®ç¯å¢ƒå˜é‡<code>DATABASE_URL</code></strong>ï¼Œè®©æœåŠ¡ç«¯èƒ½å¤Ÿè®¿é—®æ•°æ®åº“</li>
<li><strong>ä½¿ç”¨Prisma Migrateæ•°æ®åº“</strong>ï¼Œå¦åˆ™æœ¬åœ°æ•°æ®åº“å°†æ— æ³•åŒæ­¥æˆ‘ä»¬çš„æœåŠ¡ç«¯å°†è¦è®¿é—®çš„databaseï¼Œtablesç­‰ç­‰</li>
</ol>
<p>å®Œæ•´çš„æ­¥éª¤å¯ä»¥å‚è€ƒç¤ºä¾‹ä»£ç çš„<a href="https://github.com/B-sirius/fullstack-demo?tab=readme-ov-file#local-setup" target="_blank" rel="noreferrer">README</a>ã€‚</p>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>æˆ‘ä»¬çš„åº”ç”¨åœ¨æœ¬åœ°æ˜¯å¦‚æ­¤è¿è¡Œçš„ï¼Œå…¶å®å¹¶ä¸å¤æ‚ï¼š</p>
<p><img src="https://s2.loli.net/2024/05/20/nBX6bf9zOekjELF.png" alt="how-client-works-full.png"/></p>
<h2 id="å°†ä¸€åˆ‡æ¬åˆ°çº¿ä¸Š">å°†ä¸€åˆ‡æ¬åˆ°çº¿ä¸Š</h2>
<p><img src="https://s2.loli.net/2024/05/16/RkLaJhfApr6giOF.png" alt="pipelineæœ€ç»ˆæ•ˆæœ"/></p>
<p>è®©æˆ‘ä»¬å†æ¬¡å›é¡¾ä¸€ä¸‹è¿™å¼ å›¾ï¼Œå°†ä»£ç åŒæ­¥åˆ°Githubæƒ³å¿…ä¸ä¼šéš¾å€’ä½ ï¼Œé‚£å‰©ä¸‹è¦åšçš„äº‹æƒ…å¤§è‡´è¿˜æœ‰è¿™ä¹ˆå‡ ä»¶ï¼š</p>
<ul>
<li>å‡†å¤‡å„ä¸ªæœåŠ¡çš„docker image</li>
<li>å‡†å¤‡workflow<!-- -->
<ul>
<li>æ„å»ºå„æœåŠ¡çš„docker imageå¹¶æ¨é€åˆ°docker hub</li>
<li>ä»docker hubæ‹‰å–imageå¹¶éƒ¨ç½²åˆ°Azure</li>
</ul>
</li>
<li>é…ç½®Azureç›¸å…³çš„App servicesç­‰</li>
</ul>
<h3 id="1-å‡†å¤‡docker-image">1. å‡†å¤‡docker image</h3>
<p>è¿™éƒ¨åˆ†å°±ä¸è¿‡å¤šå™è¿°äº†ï¼Œå› ä¸ºå¦‚ä½•ä¸ºä½ çš„æœåŠ¡ç¼–å†™dockerfileå¯ä»¥è¯´æ˜¯ä¸€ä¸ªcase by caseçš„äº‹ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒæˆ‘çš„dockerfileï¼Œç›¸ä¿¡å¹¶ä¸éš¾ç†è§£ã€‚</p>
<p>æ€»çš„æ¥è¯´æˆ‘ä»¬åªéœ€è¦åˆ†åˆ«å‡†å¤‡å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„docker imageï¼Œè€Œçº¿ä¸Šæ•°æ®åº“æœåŠ¡æˆ‘ä»¬å°†ä¼šç›´æ¥ä½¿ç”¨Azureçš„<code>Azure Database for PostgreSQL flexible server</code>ã€‚</p>
<pre class="language-dockerfile"><code class="language-dockerfile"><span class="token comment"># ä»¥clientçš„dockerfileä¸ºä¾‹</span>

<span class="token comment"># stage 1 - build react app first</span>
<span class="token instruction"><span class="token keyword">FROM</span> node:18 <span class="token keyword">AS</span> build</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
<span class="token instruction"><span class="token keyword">COPY</span> package.json yarn.lock ./</span>
<span class="token instruction"><span class="token keyword">RUN</span> yarn install --frozen-lockfile</span>
<span class="token instruction"><span class="token keyword">COPY</span> . .</span>
<span class="token instruction"><span class="token keyword">RUN</span> yarn build</span>

<span class="token comment"># stage 2 - serve the react app on nginx</span>
<span class="token instruction"><span class="token keyword">FROM</span> nginx:latest</span>
<span class="token instruction"><span class="token keyword">USER</span> root</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">build</span></span> /app/build /usr/share/nginx/html</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;nginx&quot;</span>, <span class="token string">&quot;-g&quot;</span>, <span class="token string">&quot;daemon off;&quot;</span>]</span>
</code></pre>
<h3 id="2-æ–°å¢workflowå°†imageæ¨é€åˆ°docker-hub">2. æ–°å¢workflowï¼Œå°†imageæ¨é€åˆ°docker hub</h3>
<p>ç°åœ¨æˆ‘ä»¬å¼€å§‹å‡†å¤‡workflowï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ„å»ºdocker imageï¼Œå¹¶å°†å®ƒä»¬ä¸Šä¼ åˆ°docker hubï¼š</p>
<pre class="language-yml"><code class="language-yml"><span class="token comment"># ä»¥æ„å»ºå¹¶ä¸Šä¼ client imageä¸ºä¾‹</span>

<span class="token key atrule">name</span><span class="token punctuation">:</span> Build and Push Client Docker Image

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> dev
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;client/**&quot;</span> <span class="token comment"># Monitor changes in the client folder</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">environment</span><span class="token punctuation">:</span> dev

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Login to DockerHub
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/login<span class="token punctuation">-</span>action@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">username</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKERHUB_USERNAME <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKERHUB_ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Publish Docker image to Docker Hub
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@v5
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">context</span><span class="token punctuation">:</span> <span class="token string">&quot;{{defaultContext}}:client&quot;</span> <span class="token comment"># the path where dockerfile located</span>
          <span class="token key atrule">push</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token string">&quot;${{ vars.CLIENT_IMAGE }}:latest&quot;</span>
</code></pre>
<p>è¿™é‡Œç”¨åˆ°äº†ä¸¤ä¸ªdockerå®˜æ–¹actionï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒå®ƒä»¬çš„æ–‡æ¡£</p>
<ul>
<li><a href="https://github.com/docker/login-action/tree/v3" target="_blank" rel="noreferrer">docker/login-action</a></li>
<li><a href="https://github.com/docker/build-push-action/tree/v5" target="_blank" rel="noreferrer">docker/build-push-action</a></li>
</ul>
<p>å¦‚æœworkflowå¯ä»¥æˆåŠŸè·‘èµ·æ¥ï¼Œä½ åº”è¯¥èƒ½åœ¨docker hubä¸­çœ‹è§è‡ªå·±çš„image</p>
<p><img src="https://s2.loli.net/2024/05/21/1ug4it7wcMIzXvU.png" alt="docker images"/></p>
<h3 id="3-æ–°å¢azureçš„æ•°æ®åº“">3. æ–°å¢Azureçš„æ•°æ®åº“</h3>
<p>åœ¨ç»§ç»­è¿›è¡Œä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠçº¿ä¸Šçš„æ•°æ®åº“å‡†å¤‡å¥½ã€‚è¿™é‡Œæˆ‘é€‰ç”¨äº†Azureå®˜æ–¹çš„<code>Azure Database for PostgreSQL server</code>ã€‚éœ€è¦æ³¨æ„æ•°æ®åº“æ˜¯ä¼š<strong>äº§ç”Ÿè´¹ç”¨çš„</strong>ã€‚</p>
<p>æ•°æ®åº“åˆ›å»ºæ—¶ï¼ŒéªŒè¯æ‰‹æ®µæˆ‘é€‰ç”¨äº†ä»…PostgreSQLéªŒè¯ï¼ˆPostgreSQL authentication onlyï¼‰ï¼Œè¯·è®°ä½ä½ çš„usernameå’Œpasswordã€‚</p>
<p>åœ¨åˆ›å»ºæˆåŠŸåï¼Œä½ çš„æ•°æ®åº“åº”è¯¥æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„Server Nameä¸ºï¼š<code>&lt;your-database-name&gt;.postgres.database.azure.com</code>ã€‚</p>
<p><img src="https://s2.loli.net/2024/05/21/eQ3cCwyqozVYPXK.png" alt="postgreSQL serviec"/></p>
<p>å¦å¤–ä½ åº”è¯¥å»<code>Networking</code>ä¸­ä¸ºæ•°æ®åº“è®¾ç½®é˜²ç«å¢™è§„åˆ™ï¼Œä»…å…è®¸ä½ å½“å‰çš„å®¢æˆ·ç«¯ipè®¿é—®ã€‚</p>
<p><img src="https://s2.loli.net/2024/05/21/HwMEkDC6r75eG9o.png" alt="firewall rule"/></p>
<p>æ•°æ®åº“å‡†å¤‡å¥½åï¼Œä½ å¯ä»¥å°è¯•ç”¨pgAdminä¸€ç±»çš„å·¥å…·å»è¿æ¥å®ƒï¼Œç¡®ä¿é…ç½®æ²¡æœ‰é—®é¢˜ã€‚</p>
<h3 id="4-é…ç½®azureçš„app-services">4. é…ç½®Azureçš„App Services</h3>
<p>æ•°æ®åº“å‡†å¤‡å¥½åã€‚è®©æˆ‘ä»¬åˆ†åˆ«ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åˆ›å»ºApp Servicesã€‚å¦‚ä½•åˆ›å»ºä¸€ä¸ªApp Serviceè¿™é‡Œä¹Ÿä¸åšèµ˜è¿°ï¼Œæ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ª<code>Web App</code></li>
<li>å¯ä»¥å…ˆéšä¾¿éƒ¨ç½²ä¸€ä¸ªé»˜è®¤é•œåƒï¼ˆæ¯”å¦‚Nginxï¼‰</li>
</ul>
<p>æ¯ä¸ªapp serviceéƒ½ä¼šæœ‰ä¸€ä¸ª<code>default domain</code>ï¼Œæ ¼å¼ä¸º<code>&lt;your-web-app-name&gt;.azurewebsites.net</code>ï¼Œè¿™ä¸ªåœ°å€é»˜è®¤æ˜¯å¯ä»¥åœ¨å…¬ç½‘è®¿é—®çš„ã€‚æˆ‘ç°åœ¨åˆ†åˆ«ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åˆ›å»ºäº†app serviceï¼š</p>
<p><img src="https://s2.loli.net/2024/05/21/Ya7ORDTrQgMijAP.png" alt="app services"/></p>
<h3 id="5-è®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡">5. è®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡</h3>
<p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡ç«¯åº”ç”¨çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ç”¨åˆ°äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ä¹ˆ<code>DATABASE_URL</code>ï¼Ÿè¿™ä¸ªç¯å¢ƒå˜é‡å‘Šè¯‰æœåŠ¡ç«¯ï¼ŒPrismaå¦‚ä½•è¿æ¥æ•°æ®åº“ã€‚åœ¨æœ¬åœ°çš„æ—¶å€™ï¼Œç¯å¢ƒå˜é‡çš„å€¼æ˜¯ï¼š</p>
<pre><code>DATABASE_URL=&quot;postgresql://myuser:mypassword@localhost:5432/mydb?schema=public&quot;
</code></pre>
<p>è¿™ä¸ªå€¼çš„ç»“æ„æ˜¯ï¼š<code>postgresql://&lt;username&gt;:&lt;password&gt;@&lt;server-domain&gt;:&lt;server-port&gt;/&lt;database-name&gt;?schema=public</code></p>
<p>å‡è®¾æˆ‘ä»¬çš„Azure Databaseçš„ä¿¡æ¯æ˜¯è¿™æ ·ï¼š</p>
<ul>
<li>Server Nameï¼štest.postgres.database.azure.com</li>
<li>è´¦å·ï¼štestuser</li>
<li>å¯†ç ï¼šHolyPostgres9876</li>
</ul>
<p>é‚£çº¿ä¸Šçš„<code>DATABASE_URL</code>å°±æ˜¯<code>postgresql://testuser:HolyPostgres9876@test.postgres.database.azure.com:5432/mydb?schema=public</code></p>
<p>é‚£ä¹ˆåœ¨å“ªé‡Œè®¾ç½®è¿™ä¸ªå€¼å‘¢ï¼Ÿç”±äºè¿™ä¸ªå€¼ç°åœ¨æ˜¯æœåŠ¡ç«¯çš„App Serviceè¿è¡Œcontaineræ‰€éœ€è¦çš„ï¼Œæˆ‘ä»¬åº”è¯¥å»å¯¹åº”çš„App Serviceçš„<code>Environment variables</code>å»è®¾ç½®å®ƒï¼š</p>
<p><img src="https://s2.loli.net/2024/05/22/BnUcxqrh2WYOXNT.png" alt="Environment variables"/></p>
<h3 id="6-æ–°å¢workflowè®©azureæ‹‰å–æˆ‘ä»¬çš„docker-imageå¹¶è¿›è¡Œéƒ¨ç½²">6. æ–°å¢workflowï¼Œè®©Azureæ‹‰å–æˆ‘ä»¬çš„docker imageå¹¶è¿›è¡Œéƒ¨ç½²</h3>
<pre class="language-yml"><code class="language-yml"><span class="token comment"># ä»¥éƒ¨ç½²client imageä¸ºä¾‹</span>

<span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy Client Image to Azure App Service

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy to Azure Web App
        <span class="token key atrule">id</span><span class="token punctuation">:</span> deploy<span class="token punctuation">-</span>to<span class="token punctuation">-</span>webapp
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> azure/webapps<span class="token punctuation">-</span>deploy@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">app-name</span><span class="token punctuation">:</span> <span class="token string">&quot;test-fullstack-client&quot;</span>
          <span class="token key atrule">slot-name</span><span class="token punctuation">:</span> <span class="token string">&quot;production&quot;</span>
          <span class="token key atrule">publish-profile</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AZURE_CLIENT_PUBLISH_PROFILE <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">images</span><span class="token punctuation">:</span> <span class="token string">&quot;index.docker.io/${{ vars.CLIENT_IMAGE }}:latest&quot;</span>
</code></pre>
<p>è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªAzureçš„å®˜æ–¹actionï¼š(Azure/webapps-deploy)[https://github.com/Azure/webapps-deploy/tree/v2]ï¼Œå¯ä»¥ç›´æ¥æŠŠå¯¹åº”çš„imageéƒ¨ç½²åˆ°ä½ æŒ‡å®šçš„azure app serviceã€‚</p>
<p>è¯•ç€è¿è¡Œä¸‹ä½ çš„workflowï¼Œå¦‚æœæˆåŠŸçš„è¯ï¼Œåˆ·æ–°Azureåä½ åº”è¯¥èƒ½çœ‹åˆ°<code>Container Image</code>å˜ä¸ºäº†ä½ è‡ªå·±çš„Imageï¼š</p>
<p><img src="https://s2.loli.net/2024/05/21/8swD7kLSUcWhqu4.png" alt="container image updated"/></p>
<h3 id="7-migrate-azureæ•°æ®åº“">7. Migrate Azureæ•°æ®åº“</h3>
<p>å¯¹äºçº¿ä¸Šæ•°æ®åº“ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿéœ€è¦Migrateã€‚</p>
<p>åœ¨æœ¬åœ°è¿è¡Œé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿è¡Œäº†<code>yarn migrate</code>ï¼Œå®ƒå®é™…ä¸Šè°ƒç”¨äº†<code>npx prisma migrate dev</code>ï¼Œprismaä¼šè¯»å–æœ¬åœ°çš„<code>.env</code>ï¼Œè¿æ¥åˆ°æœ¬åœ°æ•°æ®åº“ï¼Œå¹¶è¿›è¡Œmigrateã€‚</p>
<p>å°½ç®¡æˆ‘ä»¬è¿™ä¸èƒ½ç®—ä¸€ä¸ªproductionæ¡ˆä¾‹ï¼Œä½†æ€»çš„æ¥è¯´è¿˜æ˜¯ä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼å»æ“ä½œçº¿ä¸Šæ•°æ®åº“ã€‚å› æ­¤ä¾ç…§<a href="https://www.prisma.io/docs/orm/prisma-client/deployment/deploy-database-changes-with-prisma-migrate" target="_blank" rel="noreferrer">Prismaæ–‡æ¡£</a>çš„å»ºè®®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Deploy Service Imageçš„æ—¶å€™å»Migrateçº¿ä¸Šæ•°æ®åº“ï¼š</p>
<pre class="language-yml"><code class="language-yml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy Server Image to Azure App Service

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">environment</span><span class="token punctuation">:</span> dev

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout repo
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Node
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">&#x27;18&#x27;</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Dependencies
        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> ./server
        <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn

			<span class="token comment"># é‡ç‚¹åœ¨è¿™é‡Œï¼</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Apply all pending migrations to the database
        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> ./server
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npx prisma migrate deploy
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">DATABASE_URL</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DATABASE_URL <span class="token punctuation">}</span><span class="token punctuation">}</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy to Azure Web App
        <span class="token key atrule">id</span><span class="token punctuation">:</span> deploy<span class="token punctuation">-</span>to<span class="token punctuation">-</span>webapp
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> azure/webapps<span class="token punctuation">-</span>deploy@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">app-name</span><span class="token punctuation">:</span> <span class="token string">&quot;test-fullstack-server&quot;</span>
          <span class="token key atrule">slot-name</span><span class="token punctuation">:</span> <span class="token string">&quot;production&quot;</span>
          <span class="token key atrule">publish-profile</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AZURE_SERVER_PUBLISH_PROFILE <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">images</span><span class="token punctuation">:</span> <span class="token string">&quot;index.docker.io/${{ vars.SERVER_IMAGE }}:latest&quot;</span>

</code></pre>
<p>ç°åœ¨æˆ‘ä»¬åœ¨éƒ¨ç½²æœåŠ¡ç«¯é•œåƒæ—¶ï¼Œæ•°æ®åº“ç»“æ„ä¹Ÿèƒ½ä¿æŒæ›´æ–°ã€‚</p>
<h3 id="8-éªŒè¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„çŠ¶æ€">8. éªŒè¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„çŠ¶æ€</h3>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åˆ†åˆ«è®¿é—®å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„é»˜è®¤åŸŸåã€‚</p>
<p>å®¢æˆ·ç«¯åŸŸåæ­¤æ—¶åº”è¯¥å¯ä»¥åŠ è½½å‡ºé¡µé¢ï¼Œå°½ç®¡è¯·æ±‚éƒ½404â€”â€”éå¸¸åˆç†ï¼Œå› ä¸ºè¯·æ±‚ç›®å‰éƒ½æ²¡æœ‰å‘½ä¸­åˆ°åç«¯æœåŠ¡ï¼š</p>
<p><img src="https://s2.loli.net/2024/05/22/TmcA8yVxHfqoUgG.png" alt="request 404"/></p>
<p>è€ŒæœåŠ¡ç«¯åŸŸåæ­¤æ—¶åº”è¯¥å¯ä»¥è¿”å›ä¸€äº›æ¥å£å“åº”äº†ï¼š</p>
<p><img src="https://s2.loli.net/2024/05/22/RQmLkVydwxEOoez.png" alt="server"/></p>
<h3 id="9-é…ç½®nginx">9. é…ç½®Nginx</h3>
<p>åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Webpack Dev Serveræä¾›çš„proxyèƒ½åŠ›ï¼Œè¿æ¥èµ·äº†å‰åç«¯ã€‚èƒ½å¤Ÿåšåˆ°ç±»ä¼¼äº‹æƒ…çš„å¸¸è§æœåŠ¡è¿˜æœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯Nginxï¼</p>
<p>é‚£ä¹ˆå¦‚ä½•åœ¨çº¿ä¸Šè¿è¡Œè¿™æ ·ä¸€ä¸ªNginxæœåŠ¡ï¼Ÿèªæ˜çš„ä½ ä¸€å®šæƒ³åˆ°äº†ï¼Œå†æ‰“ä¸€ä¸ªé•œåƒä¸å°±è¡Œäº†ï¼</p>
<p>æˆ‘ä»¬å…ˆä¾è‘«èŠ¦ç”»ç“¢æ–°å»ºä¸€ä¸ªApp Serviceä¾›Nginxä½¿ç”¨ï¼ŒDefault Domainä¸º<code>test-fullstack.azurewebsites.net</code></p>
<p>ç„¶ååœ¨ä»£ç æ–°å»ºä¸€ä¸ªnginxé…ç½®æ–‡ä»¶ï¼š</p>
<pre class="language-nginx"><code class="language-nginx"><span class="token comment"># nginx.conf</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> &lt;your-nginx-app-service-name&gt;.azurewebsites.net</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">proxy_pass</span> &lt;your-client-app-service-name&gt;.azurewebsites.net</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> /api</span> <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">rewrite</span> /api/(.*) /<span class="token variable">$1</span>  break</span><span class="token punctuation">;</span>
      <span class="token directive"><span class="token keyword">proxy_pass</span> &lt;your-server-app-service-name&gt;.azurewebsites.net</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ä¸€ç›®äº†ç„¶ï¼Œæˆ‘ä»¬çš„nginxæœåŠ¡ä¼šåˆ†åˆ«å°†è·¯ç”±æŒ‡å‘å¯¹åº”çš„æœåŠ¡ï¼Œå’Œwebpack-dev-serverçš„proxyä½œç”¨å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åªè¦ä»¿ç…§å‰é¢çš„æ­¥éª¤å»å°†è¿™ä¸ªé•œåƒæ„å»ºå¹¶æ¨é€åˆ°docker hubï¼Œå¹¶è¿›è¡Œéƒ¨ç½²ã€‚</p>
<p>è¿™ä¸€æ­¥å®Œæˆåï¼Œç›´æ¥è®¿é—®ä½ çš„Nginxçš„Default Domainï¼Œæˆ‘ä»¬çš„æœåŠ¡åº”è¯¥å°±å¯ä»¥æ­£å¸¸åœ¨çº¿ä¸Šè¿è¡Œäº†ï¼</p>
<p><img src="https://s2.loli.net/2024/05/24/fGhBPDpskeIX3jC.png" alt="çº¿ä¸ŠæˆåŠŸè¿è¡Œ"/></p>
<h3 id="10-çº¿ä¸Šæ¶æ„">10. çº¿ä¸Šæ¶æ„</h3>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªåº”ç”¨çš„çº¿ä¸Šæ¶æ„ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œè€Œä¸”ä¸æœ¬åœ°æœåŠ¡ç»“æ„ç±»ä¼¼ï¼š</p>
<p><img src="https://s2.loli.net/2024/05/24/QvESPtTRUKLAbdh.png" alt="å®¢æˆ·ç«¯çº¿ä¸Šæ¶æ„"/></p>
<h2 id="æ€»ç»“æå‡">æ€»ç»“&amp;æå‡</h2>
<p>æœ¬æ–‡çš„æ–¹æ¡ˆéå¸¸çš„å•çº¯ï¼Œæ ¸å¿ƒå°±æ˜¯æŠŠæœ¬åœ°åº”ç”¨éƒ½åˆ†åˆ«é•œåƒåŒ–ï¼Œç„¶åéƒ¨ç½²åˆ°çº¿ä¸Šè€Œå·²ã€‚ä½†æˆ‘ä»¬ç›®å‰çš„åº”ç”¨æœ‰ä¸€ä¸ªæ˜¾ç„¶çš„é—®é¢˜ï¼šå®¢æˆ·ç«¯æœåŠ¡çš„åŸŸåå’ŒæœåŠ¡ç«¯æœåŠ¡çš„åŸŸåéƒ½æ˜¯å¯ä»¥åœ¨å…¬ç½‘è¢«è®¿é—®çš„ï¼è€ƒè™‘åˆ°æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨NginxæœåŠ¡ä½œä¸ºå…¬ç½‘æµé‡çš„å…¥å£ï¼Œå°†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åŸŸåé™åˆ¶åœ¨å†…ç½‘æ‰æ›´ä¸ºåˆç†ã€‚</p>
<p>è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è¯·å‡ºä¸¤ä¸ªå…³é”®çš„æœåŠ¡ï¼š</p>
<ul>
<li>Applicatoin Gateway</li>
<li>Virtual networks</li>
</ul>
<p>é€šè¿‡å°†å‰åç«¯æœåŠ¡é™åˆ¶åœ¨Virtual Networksä¸­ï¼Œå¹¶é€šè¿‡Application Gatewayè®¿é—®ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„æœåŠ¡æ›´åŠ å®‰å…¨ã€‚è€Œä¸”æ˜¾ç„¶Application Gatewayè¿˜æä¾›äº†è®¸å¤šå…¶ä»–åŠŸèƒ½ï¼ˆè´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨æ‰©å®¹ç­‰ç­‰ï¼‰ã€‚åªä¸è¿‡å®ƒæœ‰ç‚¹è´µï¼Œæˆ‘å°è¯•äº†ä¸€ä¸‹ä¸€å¤©å°†è¿‘50å—ï¼ˆè´§å¸å•ä½ä¸ºæ—¥å…ƒï¼‰ï¼š</p>
<p><img src="https://s2.loli.net/2024/05/22/AjYx8kU7aGHMemf.png" alt="åº”ç”¨ç½‘å…³è´¹ç”¨"/></p>
<p>ä½†å¦‚æœä½ å¯¹è¿™éƒ¨åˆ†å†…å®¹æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªæ²¹ç®¡è§†é¢‘ï¼š<a href="https://www.youtube.com/watch?v=1HG_TKG468w" target="_blank" rel="noreferrer">App Service Application Gateway Configuration</a>ã€‚</p>
<p>æœ€åï¼Œæœ¬æ–‡ä½œè€…åœ¨äº‘æœåŠ¡æ–¹é¢å®Œå®Œå…¨å…¨æ˜¯ä¸ªæ–°æ‰‹ï¼Œå¦‚æœä½ é˜…è¯»æœ¬æ–‡åå‘ç°æœ‰é”™è¯¯æˆ–è€…å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œæ„Ÿè°¢ğŸ™</p></div></div></div></div><div class="sc-3304c032-0 fiBoCN"><div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"deploy-fullstack-application-with-docker-on-azure","title":"ä»Devåˆ°DevOpsï¼Œå€ŸåŠ©Dockeråœ¨Azureä¸Šéƒ¨ç½²ä½ çš„ç¬¬ä¸€ä¸ªå…¨æ ˆåº”ç”¨","date":"2024-05-24","mdxSource":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    p: \"p\",\n    img: \"img\",\n    strong: \"strong\",\n    a: \"a\",\n    ul: \"ul\",\n    li: \"li\",\n    h3: \"h3\",\n    ol: \"ol\",\n    code: \"code\",\n    pre: \"pre\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h2, {\n      id: \"ç®€ä»‹\",\n      children: \"ç®€ä»‹\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éƒ½å·²ç»å¾ˆç†Ÿæ‚‰æœ¬åœ°å¼€å‘ç¯å¢ƒäº†ï¼Œä½†å¦‚ä½•å°†ä¸€ä¸ªæœ¬åœ°åº”ç”¨éƒ¨ç½²åˆ°çº¿ä¸Šï¼Œæˆ–è®¸è¿˜æ˜¯è§¦åŠåˆ°äº†ä½ çš„ä¸€äº›çŸ¥è¯†ç›²åŒºã€‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/16/ge3lIN4HRYBDQUL.png\",\n        alt: \"æœ¬åœ°ä¸€åˆ‡çˆ½ï¼Œçº¿ä¸Šç«è‘¬åœº\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æœ¬æ–‡å°†ä¸€æ­¥æ­¥çš„å¸¦ä½ éƒ¨ç½²ä¸€ä¸ªåŒ…å«ç‹¬ç«‹å‰åç«¯çš„å®Œæ•´åº”ç”¨åˆ°\", _jsx(_components.strong, {\n        children: \"Azure\"\n      }), \"ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©ä½ ç†è§£éƒ¨ç½²åº”ç”¨åˆ°çº¿ä¸Šçš„å¤§è‡´æ€è·¯ã€‚\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æœ¬æ–‡æ‰€æ¶‰åŠçš„åº”ç”¨ä»¥åŠworkflowçš„æºä»£ç ï¼š\", _jsx(_components.a, {\n        href: \"https://github.com/B-sirius/fullstack-demo\",\n        children: \"fullstack-demo\"\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"ä¸»è§’ç™»åœº\",\n      children: \"ä¸»è§’ç™»åœº\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"åœ¨å¼€å§‹ä¹‹å‰ï¼Œä»‹ç»ä¸€ä¸‹æœ¬æ–‡çš„ä¸»è§’ä»¬ï¼š\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"åº”ç”¨æ„æˆ\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: \"å‰ç«¯ï¼šReact\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"åç«¯ï¼šNodejs\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"ORMï¼šPrisma\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"æ•°æ®åº“ï¼šPostgresQL\"\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ä»£ç æ‰˜ç®¡ï¼šGithub\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"CICDï¼šGithub Actions\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"å®¹å™¨æŠ€æœ¯ï¼šDocker\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"å®¹å™¨é•œåƒæ‰˜ç®¡ï¼šDocker Hub\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"åå‘ä»£ç†ï¼šNginx\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"äº‘æœåŠ¡ï¼šAzure\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: \"App Service\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"æ•°æ®åº“æœåŠ¡ï¼šAzure Database for PostgreSQL flexible server\"\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å¥½ï¼Œåœä¸€ä¸‹ï¼Œçœ‹åˆ°è¿™é‡Œå…¶å®ä¸éš¾çœ‹å‡ºæ­¤æ¬¡æ•™ç¨‹çš„å¤§è‡´æ€è·¯ï¼Œè®©æˆ‘æ‹‰ä¸€å¼ å›¾ç»™ä½ æ„Ÿå—ä¸€ä¸‹ï¼š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/16/RkLaJhfApr6giOF.png\",\n        alt: \"pipelineæœ€ç»ˆæ•ˆæœ\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„pipelineä»¥å®¹å™¨æŠ€æœ¯ä¸ºæ ¸å¿ƒï¼Œå¦‚æœä½ å¯¹dockerä¸€ç±»çš„å®¹å™¨æŠ€æœ¯è¿˜ä¸ç†Ÿæ‚‰ï¼Œå»ºè®®å…ˆå»è‡ªè¡Œäº†è§£ä¸‹ã€‚\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"å¦å¤–ï¼Œè¯¥æµç¨‹ç»éçº¿ä¸Šéƒ¨ç½²çš„\", _jsx(_components.strong, {\n        children: \"æœ€ä½³å®è·µ\"\n      }), \"ï¼Œåªæ˜¯æä¾›ä¸€ç§åŸºäºå®¹å™¨çš„éƒ¨ç½²æ€è·¯ï¼Œä¸”è¯¥æµç¨‹ä¹Ÿç¼ºä¹å¾ˆå¤šproductionç¯å¢ƒåº”è¯¥è€ƒè™‘çš„éƒ¨åˆ†ï¼Œè¿˜è¯·å¤§å®¶ä»…ä½œå­¦ä¹ å‚è€ƒã€‚\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æœ€åï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰ä»¥ä¸Šçš„æŸä¸ªå…·ä½“çš„æœåŠ¡ï¼Œä¹Ÿä¸è¦ç´§ï¼Œå› ä¸ºå…¶ä¸­ä»»ä½•ä¸€å—éƒ½å¯ä»¥è¢«å…¶ä»–ç±»ä¼¼çš„æœåŠ¡æ›¿ä»£ã€‚æ¯”å¦‚ï¼š\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Azure =\u003e AWS\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Docker Hub =\u003e Azure Container Registry\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Github =\u003e Gitlab\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å¥½ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±å¼€å§‹ä¸€æ­¥æ­¥çš„å®ç°ä¸Šé¢çš„éƒ¨ç½²æµç¨‹ï¼\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"åˆ†æä¸€ä¸‹æœ¬æ¬¡è¦éƒ¨ç½²çš„webåº”ç”¨\",\n      children: \"åˆ†æä¸€ä¸‹æœ¬æ¬¡è¦éƒ¨ç½²çš„Webåº”ç”¨\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"åœ¨æƒ³ç€å¦‚ä½•éƒ¨ç½²çº¿ä¸Šä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦å¯¹åº”ç”¨æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼š\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ç”±å“ªäº›æœåŠ¡æ„æˆ\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"è¿™äº›æœåŠ¡åœ¨æœ¬åœ°æ˜¯å¦‚ä½•å¯åŠ¨çš„\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ç¡®ä¿èƒ½å¤Ÿåœ¨æœ¬åœ°å°†åº”ç”¨å®Œæ•´çš„è¿è¡Œèµ·æ¥\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æœ¬æ¬¡è¦éƒ¨ç½²çš„åº”ç”¨æ˜¯ä¸€ä¸ªBBSï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸Šé¢å®Œæˆå‘å¸–ï¼Œé¡¶å¸–ï¼Œè¸©è´´è¿™æ ·éå¸¸åŸºç¡€çš„åŠŸèƒ½ã€‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¿™ä¸ªåº”ç”¨ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Reactæ­å»ºçš„å®¢æˆ·ç«¯\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Nodejsæ­å»ºçš„æœåŠ¡ç«¯\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"postgresæ•°æ®åº“æœåŠ¡ï¼ŒæœåŠ¡ç«¯å°†ä½¿ç”¨Prismaä¸å…¶äº¤äº’\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ˜¯éå¸¸å…¸å‹çš„å‰åç«¯åˆ†ç¦»åº”ç”¨ã€‚\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"å®¢æˆ·ç«¯\",\n      children: \"å®¢æˆ·ç«¯\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æˆ‘ä»¬å…ˆçœ‹å®¢æˆ·ç«¯çš„éƒ¨åˆ†ï¼Œå®ƒæœ‰ä»¥ä¸‹ç‰¹å¾ï¼š\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ä½¿ç”¨webpackæ„å»ºçš„Reactåº”ç”¨\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"æ„å»ºäº§ç‰©ä¸ºçº¯é™æ€èµ„æº\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"å®ƒæœ¬åœ°å¯åŠ¨çš„æ–¹å¼ï¼Œåœ¨\", _jsx(_components.code, {\n        children: \"package.json\"\n      }), \"ä¸­å¯ä»¥çœ‹åˆ°ï¼š\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-json\",\n      children: _jsxs(_components.code, {\n        className: \"language-json\",\n        children: [_jsx(_components.span, {\n          className: \"token property\",\n          children: \"\\\"start\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"webpack-dev-server --mode development\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"webpack-dev-server\"\n      }), \"ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ˜¯ç”¨äºæœ¬åœ°å¼€å‘çš„æœåŠ¡ï¼Œè™½ç„¶æˆ‘ä»¬ä¸ä¼šåœ¨çº¿ä¸Šä½¿ç”¨å®ƒï¼Œä½†æ˜¯æœ‰å¿…è¦çœ‹çœ‹å®ƒçš„ç›¸å…³é…ç½®ï¼Œäºæ˜¯æˆ‘ä»¬å°±ç‚¹å¼€äº†\", _jsx(_components.code, {\n        children: \"webpack.config.ts\"\n      }), \"ï¼Œå¯»æ‰¾å…¶ä¸­çš„\", _jsx(_components.code, {\n        children: \"devServer\"\n      }), \"å­—æ®µï¼š\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-javascript\",\n      children: _jsxs(_components.code, {\n        className: \"language-javascript\",\n        children: [_jsx(_components.span, {\n          className: \"token literal-property property\",\n          children: \"devServer\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token literal-property property\",\n          children: \"port\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3000\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token literal-property property\",\n          children: \"historyApiFallback\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token boolean\",\n          children: \"true\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token literal-property property\",\n          children: \"proxy\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token string-property property\",\n          children: \"\\\"/api\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token literal-property property\",\n          children: \"target\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"http://localhost:3000\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token function-variable function\",\n          children: \"router\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token arrow operator\",\n          children: \"=\u003e\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"http://localhost:8000\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token comment\",\n          children: \"// remove path\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token literal-property property\",\n          children: \"pathRewrite\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string-property property\",\n          children: \"\\\"^/api\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¿™é‡Œæœ‰ä¸¤ä¸ªé‡è¦ä¿¡æ¯ï¼Œåœ¨æœ¬åœ°å¼€å‘æ—¶ï¼š\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"å®¢æˆ·ç«¯åº”ç”¨ä¼šè¢«æš´éœ²åœ¨localhost:3000\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"webpackçš„åå‘ä»£ç†åŠŸèƒ½åšäº†ä¸¤ä»¶äº‹ï¼š\", \"\\n\", _jsxs(_components.ol, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: \"å°†/apiæ¥æºçš„è¯·æ±‚æŒ‡å‘äº†localhost:8000\"\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [\"é‡å†™äº†pathï¼Œè·¯å¾„ä¸­çš„\", _jsx(_components.code, {\n              children: \"/api\"\n            }), \"éƒ¨åˆ†è¢«ç§»é™¤äº†\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ä¸éš¾çŒœæµ‹ï¼Œ8000ç«¯å£æš´éœ²çš„å°±æ˜¯æˆ‘ä»¬æœ¬åœ°çš„æœåŠ¡ç«¯åº”ç”¨ã€‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ‰€ä»¥å®¢æˆ·ç«¯åœ¨æœ¬åœ°æ˜¯è¿™æ ·å·¥ä½œçš„ï¼š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/17/nzPAakJ6RDcHdNu.png\",\n        alt: \"å®¢æˆ·ç«¯çš„è¿ä½œæ–¹å¼\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"æœåŠ¡ç«¯\",\n      children: \"æœåŠ¡ç«¯\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æœåŠ¡ç«¯æ˜¯ä¸€ä¸ªNode.jsåº”ç”¨ï¼Œæ›´å‡†å»çš„è¯´æ˜¯Nest.jsåº”ç”¨ï¼ˆä¸€ä¸ªåŸºäºNode.jsçš„æ¡†æ¶ï¼‰ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ƒåœ¨æœ¬åœ°æ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼š\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-json\",\n      children: _jsxs(_components.code, {\n        className: \"language-JSON\",\n        children: [_jsx(_components.span, {\n          className: \"token property\",\n          children: \"\\\"start\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"nest start\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ä¸æ˜¯å¾ˆæœ‰è¥å…»ï¼Œæ—¢ç„¶è¿™é‡Œæ²¡æœ‰é¢å¤–çš„å‚æ•°ï¼Œé‚£æˆ‘ä»¬å°±çœ‹çœ‹Nestjsçš„å…¥å£æ–‡ä»¶\", _jsx(_components.code, {\n        children: \"main.ts\"\n      }), \"ï¼š\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-typescript\",\n      children: _jsxs(_components.code, {\n        className: \"language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"token keyword control-flow\",\n          children: \"await\"\n        }), \" app\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token method function property-access\",\n          children: \"listen\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8000\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ‰€ä»¥æœåŠ¡ç«¯æ˜¯åœ¨æœ¬åœ°8000ç«¯å£è¿è¡Œçš„ï¼Œç¬¦åˆæˆ‘ä»¬ä¸Šé¢çš„æ¨æµ‹ã€‚\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"æ•°æ®åº“\",\n      children: \"æ•°æ®åº“\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æœ€åæˆ‘ä»¬çœ‹ä¸€ä¸‹æ•°æ®åº“ï¼Œæ•°æ®åº“çš„å¯åŠ¨éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨\", _jsx(_components.code, {\n        children: \"docker-compose\"\n      }), \"ä¸­çœ‹åˆ°ï¼Œè¿™é‡Œä½¿ç”¨äº†postgreså®˜æ–¹é•œåƒï¼Œå¹¶ä¼ å…¥äº†ä¸€äº›å¿…è¦çš„å‚æ•°ç”¨äºæœ¬åœ°å¯åŠ¨ã€‚å¯ä»¥çœ‹å‡ºæ•°æ®åº“æœåŠ¡å¯åŠ¨åœ¨5432ç«¯å£ã€‚\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-yaml\",\n      children: _jsxs(_components.code, {\n        className: \"language-yaml\",\n        children: [_jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# Postgres container\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"postgres\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"image\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" postgres\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"15\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"restart\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" always\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"environment\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" POSTGRES_USER=myuser\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" POSTGRES_PASSWORD=mypassword\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"volumes\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" postgres\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"/var/lib/postgresql/data\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"ports\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"'5432:5432'\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"åœ¨æœ¬åœ°å°†æ‰€æœ‰çš„æœåŠ¡è·‘èµ·æ¥\",\n      children: \"åœ¨æœ¬åœ°å°†æ‰€æœ‰çš„æœåŠ¡è·‘èµ·æ¥\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"é™¤äº†ä¸Šè¿°çš„å‘½ä»¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é¢å¤–åšä¸¤ä»¶äº‹ï¼š\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsxs(_components.strong, {\n          children: [\"è®¾ç½®ç¯å¢ƒå˜é‡\", _jsx(_components.code, {\n            children: \"DATABASE_URL\"\n          })]\n        }), \"ï¼Œè®©æœåŠ¡ç«¯èƒ½å¤Ÿè®¿é—®æ•°æ®åº“\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"ä½¿ç”¨Prisma Migrateæ•°æ®åº“\"\n        }), \"ï¼Œå¦åˆ™æœ¬åœ°æ•°æ®åº“å°†æ— æ³•åŒæ­¥æˆ‘ä»¬çš„æœåŠ¡ç«¯å°†è¦è®¿é—®çš„databaseï¼Œtablesç­‰ç­‰\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"å®Œæ•´çš„æ­¥éª¤å¯ä»¥å‚è€ƒç¤ºä¾‹ä»£ç çš„\", _jsx(_components.a, {\n        href: \"https://github.com/B-sirius/fullstack-demo?tab=readme-ov-file#local-setup\",\n        children: \"README\"\n      }), \"ã€‚\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"æ€»ç»“\",\n      children: \"æ€»ç»“\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æˆ‘ä»¬çš„åº”ç”¨åœ¨æœ¬åœ°æ˜¯å¦‚æ­¤è¿è¡Œçš„ï¼Œå…¶å®å¹¶ä¸å¤æ‚ï¼š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/20/nBX6bf9zOekjELF.png\",\n        alt: \"how-client-works-full.png\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"å°†ä¸€åˆ‡æ¬åˆ°çº¿ä¸Š\",\n      children: \"å°†ä¸€åˆ‡æ¬åˆ°çº¿ä¸Š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/16/RkLaJhfApr6giOF.png\",\n        alt: \"pipelineæœ€ç»ˆæ•ˆæœ\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è®©æˆ‘ä»¬å†æ¬¡å›é¡¾ä¸€ä¸‹è¿™å¼ å›¾ï¼Œå°†ä»£ç åŒæ­¥åˆ°Githubæƒ³å¿…ä¸ä¼šéš¾å€’ä½ ï¼Œé‚£å‰©ä¸‹è¦åšçš„äº‹æƒ…å¤§è‡´è¿˜æœ‰è¿™ä¹ˆå‡ ä»¶ï¼š\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"å‡†å¤‡å„ä¸ªæœåŠ¡çš„docker image\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"å‡†å¤‡workflow\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: \"æ„å»ºå„æœåŠ¡çš„docker imageå¹¶æ¨é€åˆ°docker hub\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"ä»docker hubæ‹‰å–imageå¹¶éƒ¨ç½²åˆ°Azure\"\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"é…ç½®Azureç›¸å…³çš„App servicesç­‰\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"1-å‡†å¤‡docker-image\",\n      children: \"1. å‡†å¤‡docker image\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¿™éƒ¨åˆ†å°±ä¸è¿‡å¤šå™è¿°äº†ï¼Œå› ä¸ºå¦‚ä½•ä¸ºä½ çš„æœåŠ¡ç¼–å†™dockerfileå¯ä»¥è¯´æ˜¯ä¸€ä¸ªcase by caseçš„äº‹ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒæˆ‘çš„dockerfileï¼Œç›¸ä¿¡å¹¶ä¸éš¾ç†è§£ã€‚\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æ€»çš„æ¥è¯´æˆ‘ä»¬åªéœ€è¦åˆ†åˆ«å‡†å¤‡å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„docker imageï¼Œè€Œçº¿ä¸Šæ•°æ®åº“æœåŠ¡æˆ‘ä»¬å°†ä¼šç›´æ¥ä½¿ç”¨Azureçš„\", _jsx(_components.code, {\n        children: \"Azure Database for PostgreSQL flexible server\"\n      }), \"ã€‚\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-dockerfile\",\n      children: _jsxs(_components.code, {\n        className: \"language-dockerfile\",\n        children: [_jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# ä»¥clientçš„dockerfileä¸ºä¾‹\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# stage 1 - build react app first\"\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"FROM\"\n          }), \" node:18 \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"AS\"\n          }), \" build\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"WORKDIR\"\n          }), \" /app\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"COPY\"\n          }), \" package.json yarn.lock ./\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"RUN\"\n          }), \" yarn install --frozen-lockfile\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"COPY\"\n          }), \" . .\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"RUN\"\n          }), \" yarn build\"]\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# stage 2 - serve the react app on nginx\"\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"FROM\"\n          }), \" nginx:latest\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"USER\"\n          }), \" root\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"COPY\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token options\",\n            children: [_jsx(_components.span, {\n              className: \"token property\",\n              children: \"--from\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"=\"\n            }), _jsx(_components.span, {\n              className: \"token string\",\n              children: \"build\"\n            })]\n          }), \" /app/build /usr/share/nginx/html\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"EXPOSE\"\n          }), \" 80\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token instruction\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"CMD\"\n          }), \" [\", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"nginx\\\"\"\n          }), \", \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"-g\\\"\"\n          }), \", \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"daemon off;\\\"\"\n          }), \"]\"]\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"2-æ–°å¢workflowå°†imageæ¨é€åˆ°docker-hub\",\n      children: \"2. æ–°å¢workflowï¼Œå°†imageæ¨é€åˆ°docker hub\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ç°åœ¨æˆ‘ä»¬å¼€å§‹å‡†å¤‡workflowï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ„å»ºdocker imageï¼Œå¹¶å°†å®ƒä»¬ä¸Šä¼ åˆ°docker hubï¼š\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-yml\",\n      children: _jsxs(_components.code, {\n        className: \"language-yml\",\n        children: [_jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# ä»¥æ„å»ºå¹¶ä¸Šä¼ client imageä¸ºä¾‹\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Build and Push Client Docker Image\\n\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"on\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"push\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"branches\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" dev\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"paths\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"client/**\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# Monitor changes in the client folder\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"workflow_dispatch\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"jobs\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"build\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"runs-on\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" ubuntu\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"latest\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"environment\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" dev\\n\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"steps\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Login to DockerHub\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"uses\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" docker/login\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"action@v3\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"with\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"username\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" $\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \" secrets.DOCKERHUB_USERNAME \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"password\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" $\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \" secrets.DOCKERHUB_ACCESS_TOKEN \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Publish Docker image to Docker Hub\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"uses\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" docker/build\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"push\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"action@v5\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"with\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"context\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"{{defaultContext}}:client\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# the path where dockerfile located\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"push\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token boolean important\",\n          children: \"true\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"tags\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"${{ vars.CLIENT_IMAGE }}:latest\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¿™é‡Œç”¨åˆ°äº†ä¸¤ä¸ªdockerå®˜æ–¹actionï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒå®ƒä»¬çš„æ–‡æ¡£\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/docker/login-action/tree/v3\",\n          children: \"docker/login-action\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/docker/build-push-action/tree/v5\",\n          children: \"docker/build-push-action\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å¦‚æœworkflowå¯ä»¥æˆåŠŸè·‘èµ·æ¥ï¼Œä½ åº”è¯¥èƒ½åœ¨docker hubä¸­çœ‹è§è‡ªå·±çš„image\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/21/1ug4it7wcMIzXvU.png\",\n        alt: \"docker images\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"3-æ–°å¢azureçš„æ•°æ®åº“\",\n      children: \"3. æ–°å¢Azureçš„æ•°æ®åº“\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨ç»§ç»­è¿›è¡Œä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠçº¿ä¸Šçš„æ•°æ®åº“å‡†å¤‡å¥½ã€‚è¿™é‡Œæˆ‘é€‰ç”¨äº†Azureå®˜æ–¹çš„\", _jsx(_components.code, {\n        children: \"Azure Database for PostgreSQL server\"\n      }), \"ã€‚éœ€è¦æ³¨æ„æ•°æ®åº“æ˜¯ä¼š\", _jsx(_components.strong, {\n        children: \"äº§ç”Ÿè´¹ç”¨çš„\"\n      }), \"ã€‚\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ•°æ®åº“åˆ›å»ºæ—¶ï¼ŒéªŒè¯æ‰‹æ®µæˆ‘é€‰ç”¨äº†ä»…PostgreSQLéªŒè¯ï¼ˆPostgreSQL authentication onlyï¼‰ï¼Œè¯·è®°ä½ä½ çš„usernameå’Œpasswordã€‚\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨åˆ›å»ºæˆåŠŸåï¼Œä½ çš„æ•°æ®åº“åº”è¯¥æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„Server Nameä¸ºï¼š\", _jsx(_components.code, {\n        children: \"\u003cyour-database-name\u003e.postgres.database.azure.com\"\n      }), \"ã€‚\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/21/eQ3cCwyqozVYPXK.png\",\n        alt: \"postgreSQL serviec\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"å¦å¤–ä½ åº”è¯¥å»\", _jsx(_components.code, {\n        children: \"Networking\"\n      }), \"ä¸­ä¸ºæ•°æ®åº“è®¾ç½®é˜²ç«å¢™è§„åˆ™ï¼Œä»…å…è®¸ä½ å½“å‰çš„å®¢æˆ·ç«¯ipè®¿é—®ã€‚\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/21/HwMEkDC6r75eG9o.png\",\n        alt: \"firewall rule\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ•°æ®åº“å‡†å¤‡å¥½åï¼Œä½ å¯ä»¥å°è¯•ç”¨pgAdminä¸€ç±»çš„å·¥å…·å»è¿æ¥å®ƒï¼Œç¡®ä¿é…ç½®æ²¡æœ‰é—®é¢˜ã€‚\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"4-é…ç½®azureçš„app-services\",\n      children: \"4. é…ç½®Azureçš„App Services\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ•°æ®åº“å‡†å¤‡å¥½åã€‚è®©æˆ‘ä»¬åˆ†åˆ«ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åˆ›å»ºApp Servicesã€‚å¦‚ä½•åˆ›å»ºä¸€ä¸ªApp Serviceè¿™é‡Œä¹Ÿä¸åšèµ˜è¿°ï¼Œæ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"åˆ›å»ºä¸€ä¸ª\", _jsx(_components.code, {\n          children: \"Web App\"\n        })]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"å¯ä»¥å…ˆéšä¾¿éƒ¨ç½²ä¸€ä¸ªé»˜è®¤é•œåƒï¼ˆæ¯”å¦‚Nginxï¼‰\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æ¯ä¸ªapp serviceéƒ½ä¼šæœ‰ä¸€ä¸ª\", _jsx(_components.code, {\n        children: \"default domain\"\n      }), \"ï¼Œæ ¼å¼ä¸º\", _jsx(_components.code, {\n        children: \"\u003cyour-web-app-name\u003e.azurewebsites.net\"\n      }), \"ï¼Œè¿™ä¸ªåœ°å€é»˜è®¤æ˜¯å¯ä»¥åœ¨å…¬ç½‘è®¿é—®çš„ã€‚æˆ‘ç°åœ¨åˆ†åˆ«ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åˆ›å»ºäº†app serviceï¼š\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/21/Ya7ORDTrQgMijAP.png\",\n        alt: \"app services\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"5-è®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡\",\n      children: \"5. è®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"è¿˜è®°å¾—æˆ‘ä»¬åœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡ç«¯åº”ç”¨çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ç”¨åˆ°äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ä¹ˆ\", _jsx(_components.code, {\n        children: \"DATABASE_URL\"\n      }), \"ï¼Ÿè¿™ä¸ªç¯å¢ƒå˜é‡å‘Šè¯‰æœåŠ¡ç«¯ï¼ŒPrismaå¦‚ä½•è¿æ¥æ•°æ®åº“ã€‚åœ¨æœ¬åœ°çš„æ—¶å€™ï¼Œç¯å¢ƒå˜é‡çš„å€¼æ˜¯ï¼š\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"DATABASE_URL=\\\"postgresql://myuser:mypassword@localhost:5432/mydb?schema=public\\\"\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"è¿™ä¸ªå€¼çš„ç»“æ„æ˜¯ï¼š\", _jsx(_components.code, {\n        children: \"postgresql://\u003cusername\u003e:\u003cpassword\u003e@\u003cserver-domain\u003e:\u003cserver-port\u003e/\u003cdatabase-name\u003e?schema=public\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å‡è®¾æˆ‘ä»¬çš„Azure Databaseçš„ä¿¡æ¯æ˜¯è¿™æ ·ï¼š\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Server Nameï¼štest.postgres.database.azure.com\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"è´¦å·ï¼štestuser\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"å¯†ç ï¼šHolyPostgres9876\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"é‚£çº¿ä¸Šçš„\", _jsx(_components.code, {\n        children: \"DATABASE_URL\"\n      }), \"å°±æ˜¯\", _jsx(_components.code, {\n        children: \"postgresql://testuser:HolyPostgres9876@test.postgres.database.azure.com:5432/mydb?schema=public\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"é‚£ä¹ˆåœ¨å“ªé‡Œè®¾ç½®è¿™ä¸ªå€¼å‘¢ï¼Ÿç”±äºè¿™ä¸ªå€¼ç°åœ¨æ˜¯æœåŠ¡ç«¯çš„App Serviceè¿è¡Œcontaineræ‰€éœ€è¦çš„ï¼Œæˆ‘ä»¬åº”è¯¥å»å¯¹åº”çš„App Serviceçš„\", _jsx(_components.code, {\n        children: \"Environment variables\"\n      }), \"å»è®¾ç½®å®ƒï¼š\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/22/BnUcxqrh2WYOXNT.png\",\n        alt: \"Environment variables\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"6-æ–°å¢workflowè®©azureæ‹‰å–æˆ‘ä»¬çš„docker-imageå¹¶è¿›è¡Œéƒ¨ç½²\",\n      children: \"6. æ–°å¢workflowï¼Œè®©Azureæ‹‰å–æˆ‘ä»¬çš„docker imageå¹¶è¿›è¡Œéƒ¨ç½²\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-yml\",\n      children: _jsxs(_components.code, {\n        className: \"language-yml\",\n        children: [_jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# ä»¥éƒ¨ç½²client imageä¸ºä¾‹\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Deploy Client Image to Azure App Service\\n\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"on\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"workflow_dispatch\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"jobs\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"deploy\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"runs-on\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" ubuntu\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"latest\\n\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"steps\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Deploy to Azure Web App\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"id\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" deploy\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"to\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"webapp\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"uses\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" azure/webapps\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"deploy@v2\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"with\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"app-name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"test-fullstack-client\\\"\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"slot-name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"production\\\"\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"publish-profile\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" $\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \" secrets.AZURE_CLIENT_PUBLISH_PROFILE \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"images\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"index.docker.io/${{ vars.CLIENT_IMAGE }}:latest\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªAzureçš„å®˜æ–¹actionï¼š(Azure/webapps-deploy)[https://github.com/Azure/webapps-deploy/tree/v2]ï¼Œå¯ä»¥ç›´æ¥æŠŠå¯¹åº”çš„imageéƒ¨ç½²åˆ°ä½ æŒ‡å®šçš„azure app serviceã€‚\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"è¯•ç€è¿è¡Œä¸‹ä½ çš„workflowï¼Œå¦‚æœæˆåŠŸçš„è¯ï¼Œåˆ·æ–°Azureåä½ åº”è¯¥èƒ½çœ‹åˆ°\", _jsx(_components.code, {\n        children: \"Container Image\"\n      }), \"å˜ä¸ºäº†ä½ è‡ªå·±çš„Imageï¼š\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/21/8swD7kLSUcWhqu4.png\",\n        alt: \"container image updated\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"7-migrate-azureæ•°æ®åº“\",\n      children: \"7. Migrate Azureæ•°æ®åº“\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å¯¹äºçº¿ä¸Šæ•°æ®åº“ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿéœ€è¦Migrateã€‚\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨æœ¬åœ°è¿è¡Œé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿è¡Œäº†\", _jsx(_components.code, {\n        children: \"yarn migrate\"\n      }), \"ï¼Œå®ƒå®é™…ä¸Šè°ƒç”¨äº†\", _jsx(_components.code, {\n        children: \"npx prisma migrate dev\"\n      }), \"ï¼Œprismaä¼šè¯»å–æœ¬åœ°çš„\", _jsx(_components.code, {\n        children: \".env\"\n      }), \"ï¼Œè¿æ¥åˆ°æœ¬åœ°æ•°æ®åº“ï¼Œå¹¶è¿›è¡Œmigrateã€‚\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"å°½ç®¡æˆ‘ä»¬è¿™ä¸èƒ½ç®—ä¸€ä¸ªproductionæ¡ˆä¾‹ï¼Œä½†æ€»çš„æ¥è¯´è¿˜æ˜¯ä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼å»æ“ä½œçº¿ä¸Šæ•°æ®åº“ã€‚å› æ­¤ä¾ç…§\", _jsx(_components.a, {\n        href: \"https://www.prisma.io/docs/orm/prisma-client/deployment/deploy-database-changes-with-prisma-migrate\",\n        children: \"Prismaæ–‡æ¡£\"\n      }), \"çš„å»ºè®®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Deploy Service Imageçš„æ—¶å€™å»Migrateçº¿ä¸Šæ•°æ®åº“ï¼š\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-yml\",\n      children: _jsxs(_components.code, {\n        className: \"language-yml\",\n        children: [_jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Deploy Server Image to Azure App Service\\n\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"on\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"workflow_dispatch\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"jobs\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"deploy\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"runs-on\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" ubuntu\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"latest\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"environment\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" dev\\n\\n    \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"steps\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Checkout repo\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"uses\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" actions/checkout@v4\\n\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Setup Node\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"uses\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" actions/setup\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"node@v4\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"with\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"node-version\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"'18'\"\n        }), \"\\n\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Install Dependencies\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"working-directory\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" ./server\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"run\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" yarn\\n\\n\\t\\t\\t\", _jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# é‡ç‚¹åœ¨è¿™é‡Œï¼\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Apply all pending migrations to the database\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"working-directory\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" ./server\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"run\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" npx prisma migrate deploy\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"env\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"DATABASE_URL\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" $\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \" secrets.DATABASE_URL \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n      \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" Deploy to Azure Web App\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"id\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" deploy\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"to\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"webapp\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"uses\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" azure/webapps\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"-\"\n        }), \"deploy@v2\\n        \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"with\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"app-name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"test-fullstack-server\\\"\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"slot-name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"production\\\"\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"publish-profile\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" $\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \" secrets.AZURE_SERVER_PUBLISH_PROFILE \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n          \", _jsx(_components.span, {\n          className: \"token key atrule\",\n          children: \"images\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"index.docker.io/${{ vars.SERVER_IMAGE }}:latest\\\"\"\n        }), \"\\n\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ç°åœ¨æˆ‘ä»¬åœ¨éƒ¨ç½²æœåŠ¡ç«¯é•œåƒæ—¶ï¼Œæ•°æ®åº“ç»“æ„ä¹Ÿèƒ½ä¿æŒæ›´æ–°ã€‚\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"8-éªŒè¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„çŠ¶æ€\",\n      children: \"8. éªŒè¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„çŠ¶æ€\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åˆ†åˆ«è®¿é—®å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„é»˜è®¤åŸŸåã€‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å®¢æˆ·ç«¯åŸŸåæ­¤æ—¶åº”è¯¥å¯ä»¥åŠ è½½å‡ºé¡µé¢ï¼Œå°½ç®¡è¯·æ±‚éƒ½404â€”â€”éå¸¸åˆç†ï¼Œå› ä¸ºè¯·æ±‚ç›®å‰éƒ½æ²¡æœ‰å‘½ä¸­åˆ°åç«¯æœåŠ¡ï¼š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/22/TmcA8yVxHfqoUgG.png\",\n        alt: \"request 404\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è€ŒæœåŠ¡ç«¯åŸŸåæ­¤æ—¶åº”è¯¥å¯ä»¥è¿”å›ä¸€äº›æ¥å£å“åº”äº†ï¼š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/22/RQmLkVydwxEOoez.png\",\n        alt: \"server\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"9-é…ç½®nginx\",\n      children: \"9. é…ç½®Nginx\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Webpack Dev Serveræä¾›çš„proxyèƒ½åŠ›ï¼Œè¿æ¥èµ·äº†å‰åç«¯ã€‚èƒ½å¤Ÿåšåˆ°ç±»ä¼¼äº‹æƒ…çš„å¸¸è§æœåŠ¡è¿˜æœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯Nginxï¼\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"é‚£ä¹ˆå¦‚ä½•åœ¨çº¿ä¸Šè¿è¡Œè¿™æ ·ä¸€ä¸ªNginxæœåŠ¡ï¼Ÿèªæ˜çš„ä½ ä¸€å®šæƒ³åˆ°äº†ï¼Œå†æ‰“ä¸€ä¸ªé•œåƒä¸å°±è¡Œäº†ï¼\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æˆ‘ä»¬å…ˆä¾è‘«èŠ¦ç”»ç“¢æ–°å»ºä¸€ä¸ªApp Serviceä¾›Nginxä½¿ç”¨ï¼ŒDefault Domainä¸º\", _jsx(_components.code, {\n        children: \"test-fullstack.azurewebsites.net\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ç„¶ååœ¨ä»£ç æ–°å»ºä¸€ä¸ªnginxé…ç½®æ–‡ä»¶ï¼š\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-nginx\",\n      children: _jsxs(_components.code, {\n        className: \"language-nginx\",\n        children: [_jsx(_components.span, {\n          className: \"token comment\",\n          children: \"# nginx.conf\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token directive\",\n          children: _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"events\"\n          })\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token directive\",\n          children: _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"http\"\n          })\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token directive\",\n          children: _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"server\"\n          })\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n    \", _jsxs(_components.span, {\n          className: \"token directive\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"server_name\"\n          }), \" \u003cyour-nginx-app-service-name\u003e.azurewebsites.net\"]\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\\n    \", _jsxs(_components.span, {\n          className: \"token directive\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"location\"\n          }), \" /\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n      \", _jsxs(_components.span, {\n          className: \"token directive\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"proxy_pass\"\n          }), \" \u003cyour-client-app-service-name\u003e.azurewebsites.net\"]\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n    \", _jsxs(_components.span, {\n          className: \"token directive\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"location\"\n          }), \" /api\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n      \", _jsxs(_components.span, {\n          className: \"token directive\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"rewrite\"\n          }), \" /api/(.*) /\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"  break\"]\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n      \", _jsxs(_components.span, {\n          className: \"token directive\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"proxy_pass\"\n          }), \" \u003cyour-server-app-service-name\u003e.azurewebsites.net\"]\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ä¸€ç›®äº†ç„¶ï¼Œæˆ‘ä»¬çš„nginxæœåŠ¡ä¼šåˆ†åˆ«å°†è·¯ç”±æŒ‡å‘å¯¹åº”çš„æœåŠ¡ï¼Œå’Œwebpack-dev-serverçš„proxyä½œç”¨å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ¥ä¸‹æ¥æˆ‘ä»¬åªè¦ä»¿ç…§å‰é¢çš„æ­¥éª¤å»å°†è¿™ä¸ªé•œåƒæ„å»ºå¹¶æ¨é€åˆ°docker hubï¼Œå¹¶è¿›è¡Œéƒ¨ç½²ã€‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¿™ä¸€æ­¥å®Œæˆåï¼Œç›´æ¥è®¿é—®ä½ çš„Nginxçš„Default Domainï¼Œæˆ‘ä»¬çš„æœåŠ¡åº”è¯¥å°±å¯ä»¥æ­£å¸¸åœ¨çº¿ä¸Šè¿è¡Œäº†ï¼\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/24/fGhBPDpskeIX3jC.png\",\n        alt: \"çº¿ä¸ŠæˆåŠŸè¿è¡Œ\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"10-çº¿ä¸Šæ¶æ„\",\n      children: \"10. çº¿ä¸Šæ¶æ„\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªåº”ç”¨çš„çº¿ä¸Šæ¶æ„ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œè€Œä¸”ä¸æœ¬åœ°æœåŠ¡ç»“æ„ç±»ä¼¼ï¼š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/24/QvESPtTRUKLAbdh.png\",\n        alt: \"å®¢æˆ·ç«¯çº¿ä¸Šæ¶æ„\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"æ€»ç»“æå‡\",\n      children: \"æ€»ç»“\u0026æå‡\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æœ¬æ–‡çš„æ–¹æ¡ˆéå¸¸çš„å•çº¯ï¼Œæ ¸å¿ƒå°±æ˜¯æŠŠæœ¬åœ°åº”ç”¨éƒ½åˆ†åˆ«é•œåƒåŒ–ï¼Œç„¶åéƒ¨ç½²åˆ°çº¿ä¸Šè€Œå·²ã€‚ä½†æˆ‘ä»¬ç›®å‰çš„åº”ç”¨æœ‰ä¸€ä¸ªæ˜¾ç„¶çš„é—®é¢˜ï¼šå®¢æˆ·ç«¯æœåŠ¡çš„åŸŸåå’ŒæœåŠ¡ç«¯æœåŠ¡çš„åŸŸåéƒ½æ˜¯å¯ä»¥åœ¨å…¬ç½‘è¢«è®¿é—®çš„ï¼è€ƒè™‘åˆ°æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨NginxæœåŠ¡ä½œä¸ºå…¬ç½‘æµé‡çš„å…¥å£ï¼Œå°†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åŸŸåé™åˆ¶åœ¨å†…ç½‘æ‰æ›´ä¸ºåˆç†ã€‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è¯·å‡ºä¸¤ä¸ªå…³é”®çš„æœåŠ¡ï¼š\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Applicatoin Gateway\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Virtual networks\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"é€šè¿‡å°†å‰åç«¯æœåŠ¡é™åˆ¶åœ¨Virtual Networksä¸­ï¼Œå¹¶é€šè¿‡Application Gatewayè®¿é—®ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„æœåŠ¡æ›´åŠ å®‰å…¨ã€‚è€Œä¸”æ˜¾ç„¶Application Gatewayè¿˜æä¾›äº†è®¸å¤šå…¶ä»–åŠŸèƒ½ï¼ˆè´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨æ‰©å®¹ç­‰ç­‰ï¼‰ã€‚åªä¸è¿‡å®ƒæœ‰ç‚¹è´µï¼Œæˆ‘å°è¯•äº†ä¸€ä¸‹ä¸€å¤©å°†è¿‘50å—ï¼ˆè´§å¸å•ä½ä¸ºæ—¥å…ƒï¼‰ï¼š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://s2.loli.net/2024/05/22/AjYx8kU7aGHMemf.png\",\n        alt: \"åº”ç”¨ç½‘å…³è´¹ç”¨\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ä½†å¦‚æœä½ å¯¹è¿™éƒ¨åˆ†å†…å®¹æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªæ²¹ç®¡è§†é¢‘ï¼š\", _jsx(_components.a, {\n        href: \"https://www.youtube.com/watch?v=1HG_TKG468w\",\n        children: \"App Service Application Gateway Configuration\"\n      }), \"ã€‚\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æœ€åï¼Œæœ¬æ–‡ä½œè€…åœ¨äº‘æœåŠ¡æ–¹é¢å®Œå®Œå…¨å…¨æ˜¯ä¸ªæ–°æ‰‹ï¼Œå¦‚æœä½ é˜…è¯»æœ¬æ–‡åå‘ç°æœ‰é”™è¯¯æˆ–è€…å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œæ„Ÿè°¢ğŸ™\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"description":"æœ¬åœ°åº”ç”¨å¦‚ä½•éƒ¨ç½²çº¿ä¸Šï¼Œdockerå¦‚ä½•å¸®ä½ è§£æ”¾åŒæ‰‹ï¼Œäº‘æœåŠ¡ç©¶ç«Ÿé•¿ä½œä»€æ ·ï¼Œæœ¬æ–‡å¸¦ä½ ä¸€æ¢ç©¶ç«Ÿï¼","usedCustomComponentNames":[]},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"deploy-fullstack-application-with-docker-on-azure"},"buildId":"DHSDf10hmJmuXZS4WGULG","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>