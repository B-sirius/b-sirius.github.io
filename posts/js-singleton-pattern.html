<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>LWDW!</title><meta name="description" content="jsè®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼"/><meta property="og:title" content="jsè®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼"/><meta property="og:description" content="å•ä¾‹æ¨¡å¼åº”è¯¥æ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå‰ä¸¤å¤©åœ¨å†™IFEçš„ä»»åŠ¡æ—¶è¿˜æ˜¯æ‡µæ¯”äº†å¥½ä¸€é˜µï¼Œä»–å–µçš„è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚......"/><meta name="next-head-count" content="6"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#ffffff"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#000"/><meta property="og:type" content="website"/><meta property="og:image" content="https://s2.loli.net/2023/01/18/42YTZxzePtR7jy9.png"/><meta property="og:url" content="https://b-sirius.github.io"/><link rel="preload" href="/_next/static/css/aef510c8abf24c2c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aef510c8abf24c2c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b51a0fb142b75fa0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b51a0fb142b75fa0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-673a4fae4a27af6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0da236044dc4e5fc.js" defer=""></script><script src="/_next/static/chunks/664-1b4479b4462ded63.js" defer=""></script><script src="/_next/static/chunks/332-e879213584d084bf.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-ca2b821b98344017.js" defer=""></script><script src="/_next/static/8iFDsdjaTfV5KLx0s_qSu/_buildManifest.js" defer=""></script><script src="/_next/static/8iFDsdjaTfV5KLx0s_qSu/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-590e23a2-0 iUjvom"><div class="sc-7fa12c98-0 iqAzDm"><div class="sc-357ac6e1-1 blSmbb"><div class="sc-357ac6e1-0 fqUBXX"><a class="sc-357ac6e1-2 gfNIvm" href="/">[<!-- -->Home<!-- -->]</a><a class="sc-357ac6e1-2 gfNIvm" href="/posts">[<!-- -->Posts<!-- -->]</a><a class="sc-357ac6e1-3 eNeEmH" rel="noopener noreferrer" target="_blank" href="https://github.com/B-sirius">[<!-- -->Github<!-- -->]</a><a class="sc-357ac6e1-3 eNeEmH" rel="noopener noreferrer" target="_blank" href="https://b-sirius.github.io/rss.xml">[<!-- -->RSS<!-- -->]</a></div><div class="sc-f5ce872-0 drvesR"><h1 class="sc-f5ce872-1 jPBPjm">LWDW!</h1><p class="sc-f5ce872-2 djaGsH">Learn the work from doing the workğŸº</p></div></div><div class="sc-920e94b6-0 sc-659069c1-0 cMfBpD jHWfVM"><div><div class="sc-32c5999b-0 iFBmZi"><div class="sc-32c5999b-2 fHkOeB">jsè®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼</div><div class="sc-32c5999b-3 deKveP">Posted on <!-- -->2016-11-28</div></div></div></div><div class="sc-920e94b6-0 cMfBpD"><div><div class="sc-32c5999b-1 fNXLto"><div class="sc-ba7d3cad-0 gyeaXD"><div><html><head></head><body><p>å•ä¾‹æ¨¡å¼åº”è¯¥æ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå‰ä¸¤å¤©åœ¨å†™IFEçš„ä»»åŠ¡æ—¶è¿˜æ˜¯æ‡µæ¯”äº†å¥½ä¸€é˜µï¼Œä»–å–µçš„è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚</p>
<p><strong>PS:ä»¥ä¸‹ä»£ç åŠç›¸å½“ä¸€éƒ¨åˆ†å†…å®¹æ¥æºäº ã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹â€”â€”æ›¾æ¢  ï¼Œéå®Œå…¨åŸåˆ›ï¼</strong></p>
<h2 id="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼">ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼</h2>
<p><strong>â€œä¿è¯ä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®ä»–çš„å…¨å±€è®¿é—®ç‚¹â€ã€‚</strong></p>
<h2 id="æ ‡å‡†çš„å•ä¾‹æ¨¡å¼">æ ‡å‡†çš„å•ä¾‹æ¨¡å¼</h2>
<p>åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªå˜é‡æ¥æ ‡å¿—å½“å‰æ˜¯å¦ä¸ºæŸä¸ªç±»åˆ›å»ºè¿‡å¯¹è±¡ï¼Œå¦‚æœåˆ›å»ºè¿‡ï¼Œä¸‹ä¸€æ¬¡è·å–è¯¥ç±»çš„å®ä¾‹æ—¶ï¼Œç›´æ¥è¿”å›è¯¥å¯¹è±¡ï¼š</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function"><span class="token maybe-class-name">Singleton</span></span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">instance</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Singleton</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">getInstance</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">instance</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">instance</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token maybe-class-name">Singleton</span><span class="token punctuation">.</span><span class="token method function property-access">getInstance</span><span class="token punctuation">(</span><span class="token string">'sven1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token maybe-class-name">Singleton</span><span class="token punctuation">.</span><span class="token method function property-access">getInstance</span><span class="token punctuation">(</span><span class="token string">'sven2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function"><span class="token maybe-class-name">Singleton</span></span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Singleton</span><span class="token punctuation">.</span><span class="token property-access">getInstance</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword control-flow">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>è¿™ä¸¤ç§æ–¹æ³•éƒ½æ˜¯é€šè¿‡getInstanceæ–¹æ³•æ¥è·å–å”¯ä¸€å¯¹è±¡ï¼Œä¸è¿‡ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå¦‚æœè¿™ä¸ªç±»ä½¿ç”¨è€…ä½¿ç”¨newæ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œè¿˜æ˜¯ä¼šæœ‰æ–°çš„å®ä¾‹äº§ç”Ÿã€‚</p>
<h2 id="jsçš„å•ä¾‹æ¨¡å¼">JSçš„å•ä¾‹æ¨¡å¼</h2>
<p>JSå…¶å®æœ¬èº«æ²¡æœ‰æä¾›ç±»çš„å®ç°æ–¹æ³•ï¼Œå½“ç„¶åœ¨ES6ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CLASSäº†ï¼Œä¸è¿‡è¿™åªæ˜¯è¯­æ³•ç³–è€Œå·²ï¼Œå¹¶éæ˜¯æ–°çš„ç»§æ‰¿æ¨¡å‹ï¼Œé‚£æˆ‘ä»¬å…¶å®å¯ä»¥æä¸€äº›JSç‰¹è‰²çš„å•ä¾‹æ¨¡å¼å•Šã€‚</p>
<h3 id="å…¨å±€å˜é‡">å…¨å±€å˜é‡ï¼Ÿ</h3>
<p>å…¨å±€å˜é‡å½“ç„¶ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œä½†æ˜¯æˆ‘ä»¬å…¶å®å¸¸å¸¸è¿™ä¹ˆç”¨ï¼Œæ¯”å¦‚<code>var a = {};</code>ï¼Œè¿™æ ·åˆ›å»ºå¯¹è±¡è‡ªç„¶æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸è¿‡å…¨å±€å˜é‡å®¹æ˜“é€ æˆå‘½åç©ºé—´æ±¡æŸ“ï¼Œå¯¹æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ï¼š</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> namespace1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>æˆ–ä½¿ç”¨é—­åŒ…ï¼š</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> __name <span class="token operator">=</span> <span class="token string">'sven'</span><span class="token punctuation">,</span>
        __age <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">getUserInfo</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword control-flow">return</span> __name <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> __age<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="æƒ°æ€§å•ä¾‹">æƒ°æ€§å•ä¾‹</h3>
<p>æƒ°æ€§å•ä¾‹å°±æ˜¯æŒ‡åœ¨éœ€è¦æ—¶æ‰åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä¸Šæ–‡çš„ä»£ç å…¶å®å°±æ˜¯æƒ°æ€§å•ä¾‹äº†ï¼Œä½†æ˜¯å®åœ¨æ˜¯ä¸å¤ŸæŠ½è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç¦»å‡ºçœŸæ­£interestingçš„éƒ¨åˆ†ï¼š</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">getSingle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result<span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> result <span class="token operator">||</span> <span class="token punctuation">(</span>result <span class="token operator">=</span> fn<span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>æ³¨æ„æ˜¯åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•è¢«å½“æˆå‚æ•°ä¼ å…¥getSingleå‡½æ•°ï¼Œåœ¨è®©getSingleè¿”å›ä¸€ä¸ªæ–°çš„**å‡½æ•°ï¼**å¹¶ä¸”ç”¨resultè¿”å›fnçš„è®¡ç®—ç»“æœï¼Œå› ä¸ºresultåœ¨é—­åŒ…ä¸­ï¼Œæ‰€ä»¥ä¸ä¼šè¢«é”€æ¯ï¼Œä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼š</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">createLoginLayer</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> div <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">'æˆ‘æ˜¯ç™»å½•æµ®çª—'</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
    <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> div<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> createSingleLoginLayer <span class="token operator">=</span> <span class="token function">getSingle</span><span class="token punctuation">(</span>createLoginLayer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'loginBtn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> loginLayer <span class="token operator">=</span> <span class="token function">createSingleLoginLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    loginLayer<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="æœ€ç–¼çš„æ–¹æ³•é‡å†™æ„é€ å‡½æ•°">æœ€ç–¼çš„æ–¹æ³•â€”â€”é‡å†™æ„é€ å‡½æ•°</h2>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨<a href="https://cnodejs.org/topic/520dc59899f5db772c01ce1f" target="_blank" rel="nofollow">è¿™ç¯‡åšå®¢</a>çœ‹åˆ°çš„ï¼Œç»™äººä¸€ç§ã€Šé€ƒç”Ÿ2ã€‹çš„æ–­å­ç»å­™ä¹‹æ„Ÿï¼š</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Person</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//ç¼“å­˜å®ä¾‹ </span>
    <span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">//é‡å†™æ„é€ å‡½æ•° </span>
    <span class="token function-variable function"><span class="token maybe-class-name">Person</span></span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword control-flow">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//ä¿ç•™åŸå‹å±æ€§ </span>
    <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token property-access">prototype</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">//å®ä¾‹ </span>
    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//é‡ç½®æ„é€ å‡½æ•°å¼•ç”¨ </span>
    instance<span class="token punctuation">.</span><span class="token property-access">constructor</span> <span class="token operator">=</span> <span class="token maybe-class-name">Person</span><span class="token punctuation">;</span>

    <span class="token comment">//å…¶ä»–åˆå§‹åŒ– </span>
    instance<span class="token punctuation">.</span><span class="token property-access">createTime</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">return</span> instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ç®€å•çš„æ¥è¯´å°±æ˜¯æ„é€ å‡½æ•°ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œä¸€å¼€å§‹å°±ç›´æ¥æ”¹å†™è‡ªèº«çš„æ„é€ å‡½æ•°ä»¤å…¶å°†æ¥æ‰§è¡Œæ—¶ç›´æ¥è¿”å›å®ä¾‹ï¼Œå†æœ‰æ¡ä¸ç´Šåœ°ä¿ç•™<strong>åŸå‹å±æ€§</strong>ä¸<strong>æ„é€ å‡½æ•°å¼•ç”¨</strong>ï¼ˆå¦åˆ™ä¸€æ—¦å¯¹è±¡è¢«åˆ›å»ºï¼Œå…¶åŸå‹å°†è¢«æ”¹å˜ï¼‰ï¼Œæœ€åå†å¼€å§‹æ„é€ å®ä¾‹çš„å·¥ä½œï¼Œå®åœ¨å¤ªä¼˜é›…ï¼ˆè€Œä¸”æ„Ÿè§‰å¾ˆç–¼ï¼‰äº†[èŒ¶]ã€‚</p>
<hr>
<p>è¯¶ï½è®¾è®¡æ¨¡å¼çœŸæ˜¯å››å›½ä¸€å•Šá•• ( á› ) á•—</p>
</body></html></div></div></div></div></div><div class="sc-bbd5e802-0 cbkQsN"><div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"js-singleton-pattern","title":"jsè®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼","date":"2016-11-28","htmlText":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003cp\u003eå•ä¾‹æ¨¡å¼åº”è¯¥æ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå‰ä¸¤å¤©åœ¨å†™IFEçš„ä»»åŠ¡æ—¶è¿˜æ˜¯æ‡µæ¯”äº†å¥½ä¸€é˜µï¼Œä»–å–µçš„è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003ePS:ä»¥ä¸‹ä»£ç åŠç›¸å½“ä¸€éƒ¨åˆ†å†…å®¹æ¥æºäº ã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹â€”â€”æ›¾æ¢  ï¼Œéå®Œå…¨åŸåˆ›ï¼\u003c/strong\u003e\u003c/p\u003e\n\u003ch2 id=\"ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼\"\u003eä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eâ€œä¿è¯ä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®ä»–çš„å…¨å±€è®¿é—®ç‚¹â€ã€‚\u003c/strong\u003e\u003c/p\u003e\n\u003ch2 id=\"æ ‡å‡†çš„å•ä¾‹æ¨¡å¼\"\u003eæ ‡å‡†çš„å•ä¾‹æ¨¡å¼\u003c/h2\u003e\n\u003cp\u003eåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªå˜é‡æ¥æ ‡å¿—å½“å‰æ˜¯å¦ä¸ºæŸä¸ªç±»åˆ›å»ºè¿‡å¯¹è±¡ï¼Œå¦‚æœåˆ›å»ºè¿‡ï¼Œä¸‹ä¸€æ¬¡è·å–è¯¥ç±»çš„å®ä¾‹æ—¶ï¼Œç›´æ¥è¿”å›è¯¥å¯¹è±¡ï¼š\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eSingleton\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ename\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einstance\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword null nil\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token class-name\"\u003eSingleton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprototype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method-variable function-variable method function property-access\"\u003egetName\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003ealert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token maybe-class-name\"\u003eSingleton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method-variable function-variable method function property-access\"\u003egetInstance\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einstance\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSingleton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e a \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eSingleton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'sven1'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e b \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eSingleton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'sven2'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003ealert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæˆ–è€…ï¼š\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eSingleton\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ename\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token class-name\"\u003eSingleton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprototype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method-variable function-variable method function property-access\"\u003egetName\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003ealert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token maybe-class-name\"\u003eSingleton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003egetInstance\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword null nil\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003einstance\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSingleton\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eè¿™ä¸¤ç§æ–¹æ³•éƒ½æ˜¯é€šè¿‡getInstanceæ–¹æ³•æ¥è·å–å”¯ä¸€å¯¹è±¡ï¼Œä¸è¿‡ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå¦‚æœè¿™ä¸ªç±»ä½¿ç”¨è€…ä½¿ç”¨newæ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œè¿˜æ˜¯ä¼šæœ‰æ–°çš„å®ä¾‹äº§ç”Ÿã€‚\u003c/p\u003e\n\u003ch2 id=\"jsçš„å•ä¾‹æ¨¡å¼\"\u003eJSçš„å•ä¾‹æ¨¡å¼\u003c/h2\u003e\n\u003cp\u003eJSå…¶å®æœ¬èº«æ²¡æœ‰æä¾›ç±»çš„å®ç°æ–¹æ³•ï¼Œå½“ç„¶åœ¨ES6ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CLASSäº†ï¼Œä¸è¿‡è¿™åªæ˜¯è¯­æ³•ç³–è€Œå·²ï¼Œå¹¶éæ˜¯æ–°çš„ç»§æ‰¿æ¨¡å‹ï¼Œé‚£æˆ‘ä»¬å…¶å®å¯ä»¥æä¸€äº›JSç‰¹è‰²çš„å•ä¾‹æ¨¡å¼å•Šã€‚\u003c/p\u003e\n\u003ch3 id=\"å…¨å±€å˜é‡\"\u003eå…¨å±€å˜é‡ï¼Ÿ\u003c/h3\u003e\n\u003cp\u003eå…¨å±€å˜é‡å½“ç„¶ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œä½†æ˜¯æˆ‘ä»¬å…¶å®å¸¸å¸¸è¿™ä¹ˆç”¨ï¼Œæ¯”å¦‚\u003ccode\u003evar a = {};\u003c/code\u003eï¼Œè¿™æ ·åˆ›å»ºå¯¹è±¡è‡ªç„¶æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸è¿‡å…¨å±€å˜é‡å®¹æ˜“é€ æˆå‘½åç©ºé—´æ±¡æŸ“ï¼Œå¯¹æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ï¼š\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e namespace1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003ea\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token function\"\u003ealert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003eb\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token function\"\u003ealert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæˆ–ä½¿ç”¨é—­åŒ…ï¼š\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e user \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e __name \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'sven'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        __age \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e29\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token function-variable function\"\u003egetUserInfo\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e __name \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e'-'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e __age\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"æƒ°æ€§å•ä¾‹\"\u003eæƒ°æ€§å•ä¾‹\u003c/h3\u003e\n\u003cp\u003eæƒ°æ€§å•ä¾‹å°±æ˜¯æŒ‡åœ¨éœ€è¦æ—¶æ‰åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä¸Šæ–‡çš„ä»£ç å…¶å®å°±æ˜¯æƒ°æ€§å•ä¾‹äº†ï¼Œä½†æ˜¯å®åœ¨æ˜¯ä¸å¤ŸæŠ½è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç¦»å‡ºçœŸæ­£interestingçš„éƒ¨åˆ†ï¼š\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003egetSingle\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003efn\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e result\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e result \u003cspan class=\"token operator\"\u003e||\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresult \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e fn\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eapply\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e arguments\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæ³¨æ„æ˜¯åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•è¢«å½“æˆå‚æ•°ä¼ å…¥getSingleå‡½æ•°ï¼Œåœ¨è®©getSingleè¿”å›ä¸€ä¸ªæ–°çš„**å‡½æ•°ï¼**å¹¶ä¸”ç”¨resultè¿”å›fnçš„è®¡ç®—ç»“æœï¼Œå› ä¸ºresultåœ¨é—­åŒ…ä¸­ï¼Œæ‰€ä»¥ä¸ä¼šè¢«é”€æ¯ï¼Œä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼š\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003ecreateLoginLayer\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e div \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreateElement\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'div'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    div\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einnerHTML\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'æˆ‘æ˜¯ç™»å½•æµ®çª—'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    div\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003estyle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003edisplay\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'none'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ebody\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eappendChild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ediv\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e div\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e createSingleLoginLayer \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetSingle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecreateLoginLayer\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'loginBtn'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method-variable function-variable method function property-access\"\u003eonclick\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e loginLayer \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ecreateSingleLoginLayer\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    loginLayer\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003estyle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003edisplay\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'block'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"æœ€ç–¼çš„æ–¹æ³•é‡å†™æ„é€ å‡½æ•°\"\u003eæœ€ç–¼çš„æ–¹æ³•â€”â€”é‡å†™æ„é€ å‡½æ•°\u003c/h2\u003e\n\u003cp\u003eè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨\u003ca href=\"https://cnodejs.org/topic/520dc59899f5db772c01ce1f\" target=\"_blank\" rel=\"nofollow\"\u003eè¿™ç¯‡åšå®¢\u003c/a\u003eçœ‹åˆ°çš„ï¼Œç»™äººä¸€ç§ã€Šé€ƒç”Ÿ2ã€‹çš„æ–­å­ç»å­™ä¹‹æ„Ÿï¼š\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003ePerson\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e//ç¼“å­˜å®ä¾‹ \u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e//é‡å†™æ„é€ å‡½æ•° \u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003ePerson\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e//ä¿ç•™åŸå‹å±æ€§ \u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003ePerson\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprototype\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e//å®ä¾‹ \u003c/span\u003e\n    instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003ePerson\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e//é‡ç½®æ„é€ å‡½æ•°å¼•ç”¨ \u003c/span\u003e\n    instance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003econstructor\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003ePerson\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e//å…¶ä»–åˆå§‹åŒ– \u003c/span\u003e\n    instance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecreateTime\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eç®€å•çš„æ¥è¯´å°±æ˜¯æ„é€ å‡½æ•°ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œä¸€å¼€å§‹å°±ç›´æ¥æ”¹å†™è‡ªèº«çš„æ„é€ å‡½æ•°ä»¤å…¶å°†æ¥æ‰§è¡Œæ—¶ç›´æ¥è¿”å›å®ä¾‹ï¼Œå†æœ‰æ¡ä¸ç´Šåœ°ä¿ç•™\u003cstrong\u003eåŸå‹å±æ€§\u003c/strong\u003eä¸\u003cstrong\u003eæ„é€ å‡½æ•°å¼•ç”¨\u003c/strong\u003eï¼ˆå¦åˆ™ä¸€æ—¦å¯¹è±¡è¢«åˆ›å»ºï¼Œå…¶åŸå‹å°†è¢«æ”¹å˜ï¼‰ï¼Œæœ€åå†å¼€å§‹æ„é€ å®ä¾‹çš„å·¥ä½œï¼Œå®åœ¨å¤ªä¼˜é›…ï¼ˆè€Œä¸”æ„Ÿè§‰å¾ˆç–¼ï¼‰äº†[èŒ¶]ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eè¯¶ï½è®¾è®¡æ¨¡å¼çœŸæ˜¯å››å›½ä¸€å•Šá•• ( á› ) á•—\u003c/p\u003e\n\u003c/body\u003e\u003c/html\u003e","description":"å•ä¾‹æ¨¡å¼åº”è¯¥æ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå‰ä¸¤å¤©åœ¨å†™IFEçš„ä»»åŠ¡æ—¶è¿˜æ˜¯æ‡µæ¯”äº†å¥½ä¸€é˜µï¼Œä»–å–µçš„è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚......"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"js-singleton-pattern"},"buildId":"8iFDsdjaTfV5KLx0s_qSu","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>