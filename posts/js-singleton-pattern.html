<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>LWDW!</title><meta name="description" content="jsè®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼"/><meta property="og:title" content="jsè®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼"/><meta property="og:description" content="å•ä¾‹æ¨¡å¼åº”è¯¥æ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå‰ä¸¤å¤©åœ¨å†™IFEçš„ä»»åŠ¡æ—¶è¿˜æ˜¯æ‡µæ¯”äº†å¥½ä¸€é˜µï¼Œä»–å–µçš„è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚......"/><meta name="next-head-count" content="6"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#ffffff"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#000"/><meta property="og:type" content="website"/><meta property="og:image" content="https://s2.loli.net/2023/01/18/42YTZxzePtR7jy9.png"/><meta property="og:url" content="https://b-sirius.github.io"/><link rel="preload" href="/_next/static/css/aef510c8abf24c2c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aef510c8abf24c2c.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-673a4fae4a27af6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0da236044dc4e5fc.js" defer=""></script><script src="/_next/static/chunks/664-1b4479b4462ded63.js" defer=""></script><script src="/_next/static/chunks/332-e879213584d084bf.js" defer=""></script><script src="/_next/static/chunks/740-8163689fd2f6810b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-09693cab6fb7ef9a.js" defer=""></script><script src="/_next/static/qK3XdjXrKg_JAR2H1GNBN/_buildManifest.js" defer=""></script><script src="/_next/static/qK3XdjXrKg_JAR2H1GNBN/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-b711fa3b-0 dxGMRG"><div class="sc-7fa12c98-0 iqAzDm"><div class="sc-357ac6e1-1 blSmbb"><div class="sc-357ac6e1-0 fqUBXX"><a class="sc-357ac6e1-2 gfNIvm" href="/">[<!-- -->Home<!-- -->]</a><a class="sc-357ac6e1-2 gfNIvm" href="/posts">[<!-- -->Posts<!-- -->]</a><a class="sc-357ac6e1-3 eNeEmH" rel="noopener noreferrer" target="_blank" href="https://github.com/B-sirius">[<!-- -->Github<!-- -->]</a><a class="sc-357ac6e1-3 eNeEmH" rel="noopener noreferrer" target="_blank" href="https://b-sirius.github.io/rss.xml">[<!-- -->RSS<!-- -->]</a></div><div class="sc-f5ce872-0 drvesR"><h1 class="sc-f5ce872-1 jPBPjm">LWDW!</h1><p class="sc-f5ce872-2 djaGsH">Learn the work from doing the workğŸº</p></div></div><div class="sc-920e94b6-0 sc-20291786-0 cMfBpD eCERES"><div><div class="sc-edf62e18-0 kyUQvd"><div class="sc-edf62e18-2 irplQW">jsè®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼</div><div class="sc-edf62e18-3 hMZjOA">Posted on <!-- -->2016-11-28</div></div></div></div><div class="sc-920e94b6-0 cMfBpD"><div><div class="sc-edf62e18-1 jVTVVD"><div class="sc-29ea8e37-0 bjoUyc"></div></div></div></div><div class="sc-bbd5e802-0 cbkQsN"><div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"js-singleton-pattern","title":"jsè®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼","date":"2016-11-28","mdText":"\nå•ä¾‹æ¨¡å¼åº”è¯¥æ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå‰ä¸¤å¤©åœ¨å†™IFEçš„ä»»åŠ¡æ—¶è¿˜æ˜¯æ‡µæ¯”äº†å¥½ä¸€é˜µï¼Œä»–å–µçš„è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚\n\n**PS:ä»¥ä¸‹ä»£ç åŠç›¸å½“ä¸€éƒ¨åˆ†å†…å®¹æ¥æºäº ã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹â€”â€”æ›¾æ¢  ï¼Œéå®Œå…¨åŸåˆ›ï¼**\n\n## ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼\n\n**â€œä¿è¯ä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®ä»–çš„å…¨å±€è®¿é—®ç‚¹â€ã€‚**\n\n## æ ‡å‡†çš„å•ä¾‹æ¨¡å¼\n\nåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªå˜é‡æ¥æ ‡å¿—å½“å‰æ˜¯å¦ä¸ºæŸä¸ªç±»åˆ›å»ºè¿‡å¯¹è±¡ï¼Œå¦‚æœåˆ›å»ºè¿‡ï¼Œä¸‹ä¸€æ¬¡è·å–è¯¥ç±»çš„å®ä¾‹æ—¶ï¼Œç›´æ¥è¿”å›è¯¥å¯¹è±¡ï¼š\n\n```javascript\nvar Singleton = function(name) {\n    this.name = name;\n    this.instance = null;\n};\nSingleton.prototype.getName = function() {\n    alert(this.name);\n};\nSingleton.getInstance = function(name) {\n    if (!this.instance) {\n        this.instance = new Singleton(name);\n    }\n    return this.instance;\n};\nvar a = Singleton.getInstance('sven1');\nvar b = Singleton.getInstance('sven2');\nalert(a === b);\n// true\n```\næˆ–è€…ï¼š\n\n```javascript\nvar Singleton = function(name) {\n    this.name = name;\n};\nSingleton.prototype.getName = function() {\n    alert(this.name);\n};\nSingleton.getInstance = (function() {\n    var instance = null;\n    return function(name) {\n        if (!instance) {\n            instance = new Singleton(name);\n        }\n        return instance;\n    }\n})();\n```\n\nè¿™ä¸¤ç§æ–¹æ³•éƒ½æ˜¯é€šè¿‡getInstanceæ–¹æ³•æ¥è·å–å”¯ä¸€å¯¹è±¡ï¼Œä¸è¿‡ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå¦‚æœè¿™ä¸ªç±»ä½¿ç”¨è€…ä½¿ç”¨newæ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œè¿˜æ˜¯ä¼šæœ‰æ–°çš„å®ä¾‹äº§ç”Ÿã€‚\n\n## JSçš„å•ä¾‹æ¨¡å¼\n\nJSå…¶å®æœ¬èº«æ²¡æœ‰æä¾›ç±»çš„å®ç°æ–¹æ³•ï¼Œå½“ç„¶åœ¨ES6ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CLASSäº†ï¼Œä¸è¿‡è¿™åªæ˜¯è¯­æ³•ç³–è€Œå·²ï¼Œå¹¶éæ˜¯æ–°çš„ç»§æ‰¿æ¨¡å‹ï¼Œé‚£æˆ‘ä»¬å…¶å®å¯ä»¥æä¸€äº›JSç‰¹è‰²çš„å•ä¾‹æ¨¡å¼å•Šã€‚\n\n### å…¨å±€å˜é‡ï¼Ÿ\n\nå…¨å±€å˜é‡å½“ç„¶ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œä½†æ˜¯æˆ‘ä»¬å…¶å®å¸¸å¸¸è¿™ä¹ˆç”¨ï¼Œæ¯”å¦‚`var a = {};`ï¼Œè¿™æ ·åˆ›å»ºå¯¹è±¡è‡ªç„¶æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸è¿‡å…¨å±€å˜é‡å®¹æ˜“é€ æˆå‘½åç©ºé—´æ±¡æŸ“ï¼Œå¯¹æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ï¼š\n\n```javascript\nvar namespace1 = {\n    a: function() {\n        alert(1);\n    },\n    b: function() {\n        alert(2);\n    }\n};\n```\n\næˆ–ä½¿ç”¨é—­åŒ…ï¼š\n\n```javascript\nvar user = (function() {\n    var __name = 'sven',\n        __age = 29;\n    return {\n        getUserInfo: function() {\n            return __name + '-' + __age;\n        }\n    }\n})();\n```\n\n### æƒ°æ€§å•ä¾‹\n\næƒ°æ€§å•ä¾‹å°±æ˜¯æŒ‡åœ¨éœ€è¦æ—¶æ‰åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä¸Šæ–‡çš„ä»£ç å…¶å®å°±æ˜¯æƒ°æ€§å•ä¾‹äº†ï¼Œä½†æ˜¯å®åœ¨æ˜¯ä¸å¤ŸæŠ½è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç¦»å‡ºçœŸæ­£interestingçš„éƒ¨åˆ†ï¼š\n\n```javascript\nvar getSingle = function(fn) {\n    var result;\n    return function() {\n        return result || (result = fn.apply(this, arguments));\n    }\n};\n```\n\næ³¨æ„æ˜¯åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•è¢«å½“æˆå‚æ•°ä¼ å…¥getSingleå‡½æ•°ï¼Œåœ¨è®©getSingleè¿”å›ä¸€ä¸ªæ–°çš„**å‡½æ•°ï¼**å¹¶ä¸”ç”¨resultè¿”å›fnçš„è®¡ç®—ç»“æœï¼Œå› ä¸ºresultåœ¨é—­åŒ…ä¸­ï¼Œæ‰€ä»¥ä¸ä¼šè¢«é”€æ¯ï¼Œä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼š\n\n```javascript\nvar createLoginLayer = function() {\n    var div = document.createElement('div');\n    div.innerHTML = 'æˆ‘æ˜¯ç™»å½•æµ®çª—';\n    div.style.display = 'none';\n    document.body.appendChild(div);\n    return div;\n};\nvar createSingleLoginLayer = getSingle(createLoginLayer);\ndocument.getElementById('loginBtn').onclick = function() {\n    var loginLayer = createSingleLoginLayer();\n    loginLayer.style.display = 'block';\n};\n```\n\n## æœ€ç–¼çš„æ–¹æ³•â€”â€”é‡å†™æ„é€ å‡½æ•°\n\nè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨[è¿™ç¯‡åšå®¢](https://cnodejs.org/topic/520dc59899f5db772c01ce1f)çœ‹åˆ°çš„ï¼Œç»™äººä¸€ç§ã€Šé€ƒç”Ÿ2ã€‹çš„æ–­å­ç»å­™ä¹‹æ„Ÿï¼š\n\n```javascript\nfunction Person() {\n    //ç¼“å­˜å®ä¾‹ \n    var instance = this;\n    //é‡å†™æ„é€ å‡½æ•° \n    Person = function() {\n            return instance;\n        }\n        //ä¿ç•™åŸå‹å±æ€§ \n    Person.prototype = this;\n    //å®ä¾‹ \n    instance = new Person();\n    //é‡ç½®æ„é€ å‡½æ•°å¼•ç”¨ \n    instance.constructor = Person;\n\n    //å…¶ä»–åˆå§‹åŒ– \n    instance.createTime = new Date();\n\n    return instance;\n}\n```\n\nç®€å•çš„æ¥è¯´å°±æ˜¯æ„é€ å‡½æ•°ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œä¸€å¼€å§‹å°±ç›´æ¥æ”¹å†™è‡ªèº«çš„æ„é€ å‡½æ•°ä»¤å…¶å°†æ¥æ‰§è¡Œæ—¶ç›´æ¥è¿”å›å®ä¾‹ï¼Œå†æœ‰æ¡ä¸ç´Šåœ°ä¿ç•™**åŸå‹å±æ€§**ä¸**æ„é€ å‡½æ•°å¼•ç”¨**ï¼ˆå¦åˆ™ä¸€æ—¦å¯¹è±¡è¢«åˆ›å»ºï¼Œå…¶åŸå‹å°†è¢«æ”¹å˜ï¼‰ï¼Œæœ€åå†å¼€å§‹æ„é€ å®ä¾‹çš„å·¥ä½œï¼Œå®åœ¨å¤ªä¼˜é›…ï¼ˆè€Œä¸”æ„Ÿè§‰å¾ˆç–¼ï¼‰äº†[èŒ¶]ã€‚\n\n--------------------\n\nè¯¶ï½è®¾è®¡æ¨¡å¼çœŸæ˜¯å››å›½ä¸€å•Šá•• ( á› ) á•—","description":"å•ä¾‹æ¨¡å¼åº”è¯¥æ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå‰ä¸¤å¤©åœ¨å†™IFEçš„ä»»åŠ¡æ—¶è¿˜æ˜¯æ‡µæ¯”äº†å¥½ä¸€é˜µï¼Œä»–å–µçš„è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚......"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"js-singleton-pattern"},"buildId":"qK3XdjXrKg_JAR2H1GNBN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>