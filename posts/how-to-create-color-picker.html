<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>LWDW!</title><meta name="description" content="俺的colorPicker制作思路"/><meta property="og:title" content="俺的colorPicker制作思路"/><meta property="og:description" content="说实话，一开始看到这个任务内心是相当懵比的——主要就是有两个点一下子没有头绪，但说实话，只要get到这两点的思路，这个任务也就完成了一半了。接下来俺就具体展开一下：......"/><meta name="next-head-count" content="6"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#ffffff"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#000"/><meta property="og:type" content="website"/><meta property="og:image" content="https://s2.loli.net/2023/01/18/42YTZxzePtR7jy9.png"/><meta property="og:url" content="https://b-sirius.github.io"/><link rel="preload" href="/_next/static/css/aef510c8abf24c2c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aef510c8abf24c2c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b51a0fb142b75fa0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b51a0fb142b75fa0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-673a4fae4a27af6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0da236044dc4e5fc.js" defer=""></script><script src="/_next/static/chunks/664-1b4479b4462ded63.js" defer=""></script><script src="/_next/static/chunks/332-e879213584d084bf.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-1001914fc6870d3d.js" defer=""></script><script src="/_next/static/OaPNOeFLxAYYRzaUmDxi4/_buildManifest.js" defer=""></script><script src="/_next/static/OaPNOeFLxAYYRzaUmDxi4/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-b711fa3b-0 dxGMRG"><div class="sc-7fa12c98-0 iqAzDm"><div class="sc-357ac6e1-1 blSmbb"><div class="sc-357ac6e1-0 fqUBXX"><a class="sc-357ac6e1-2 gfNIvm" href="/">[<!-- -->Home<!-- -->]</a><a class="sc-357ac6e1-2 gfNIvm" href="/posts">[<!-- -->Posts<!-- -->]</a><a class="sc-357ac6e1-3 eNeEmH" rel="noopener noreferrer" target="_blank" href="https://github.com/B-sirius">[<!-- -->Github<!-- -->]</a><a class="sc-357ac6e1-3 eNeEmH" rel="noopener noreferrer" target="_blank" href="https://b-sirius.github.io/rss.xml">[<!-- -->RSS<!-- -->]</a></div><div class="sc-f5ce872-0 drvesR"><h1 class="sc-f5ce872-1 jPBPjm">LWDW!</h1><p class="sc-f5ce872-2 djaGsH">Learn the work from doing the work🍺</p></div></div><div class="sc-920e94b6-0 sc-20291786-0 cMfBpD eCERES"><div><div class="sc-32c5999b-0 iFBmZi"><div class="sc-32c5999b-2 fHkOeB">俺的colorPicker制作思路</div><div class="sc-32c5999b-3 deKveP">Posted on <!-- -->2017-04-09</div></div></div></div><div class="sc-920e94b6-0 cMfBpD"><div><div class="sc-32c5999b-1 fNXLto"><div class="sc-29ea8e37-0 bjoUyc"><div><html><head></head><body><p><a href="http://ife.baidu.com/course/detail/id/16" target="_blank" rel="nofollow">原任务地址</a></p>
<p>说实话，一开始看到这个任务内心是相当懵比的——主要就是有两个点一下子没有头绪，但说实话，只要get到这两点的思路，这个任务也就完成了一半了。接下来俺就具体展开一下：</p>
<h2 id="1-如何渲染颜色选取面板">1. 如何渲染颜色选取面板</h2>
<p>讲道理我不知道为什么前端技术学院给了这么个示意图，因为这个图根本就取不到所有颜色啊喂！</p>
<p><img src="https://bj.bcebos.com/imagelib/150/share_pic/03e6aae2b36fd74ca68bf930c031fc6b.png" alt="任务图"></p>
<p>为什么呢，颜色通常都是由三种成分（so我们最后确定颜色其实就是用三个变量）定义的，因此在我们通常用三维空间来描述颜色模型，RGB，HSL，以及此次任务中我用到的HSV都是这样，弄清楚颜色模型，也就知道该用什么方法来渲染了，下文将详细阐释：</p>
<h3 id="rgb参考维基词条三原色光模式">RGB（参考维基词条：<a href="https://zh.wikipedia.org/wiki/%E4%B8%89%E5%8E%9F%E8%89%B2%E5%85%89%E6%A8%A1%E5%BC%8F" target="_blank" rel="nofollow">三原色光模式</a>）</h3>
<p>当前表示RGB的主流方法是用三个0-255间的整数，相信大家都知道，那么用脚趾头都能想出来，RGB的颜色模型是一个方块儿，这张图可以很直接的看出来。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/RGB_color_solid_cube.png/200px-RGB_color_solid_cube.png" alt="RGB色彩模型"></p>
<p>那么我们要用RGB颜色模型作为渲染标准么，我个人觉得不太靠谱，这个任务给出的示例图的选择器由两部分组成，一个长长的颜色条，和以这个颜色条的某个颜色（也就是我们的第一个变量）为标准渲染出的颜色面板（这个面板的上某点的横纵坐标正好是第二，第三个变量，也就确定了唯一的颜色）。那么以我小学水平的数学水平，我的第一反应就是以x,y,z的某个轴为颜色条，把这个方块儿切片儿，那不就成了么！然而切开来一看俺就傻逼了，这里面花花绿绿的我压根不知道咋渲染啊！所以，RGB被我pass掉了。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/RGBR.png/256px-RGBR.png" alt="切面"></p>
<h3 id="hsl与hsv参考维基词条hsl和hsv的色彩空间">HSL与HSV（参考维基词条：<a href="https://zh.wikipedia.org/wiki/HSL%E5%92%8CHSV%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4" target="_blank" rel="nofollow">HSL和HSV的色彩空间</a>）</h3>
<p>HSL和HSV是将RGB色彩模型中的点在圆柱坐标系中的表示法，H一般用0-360之间的整数，代表圆柱的一周的角度，S和L/V是0-1之间的小数或对应的百分数（一般取到两位即可满足人眼的需要），也就是说，他们的模型是一个圆柱体。HSL即<a href="https://zh.wikipedia.org/wiki/%E8%89%B2%E7%9B%B8" target="_blank" rel="nofollow">色相</a>、<a href="https://zh.wikipedia.org/wiki/%E8%89%B2%E5%BA%A6_(%E8%89%B2%E5%BD%A9%E5%AD%A6)" target="_blank" rel="nofollow">饱和度</a>、<a href="https://zh.wikipedia.org/wiki/%E4%BA%AE%E5%BA%A6" target="_blank" rel="nofollow">亮度</a>，而HSV指<a href="https://zh.wikipedia.org/wiki/%E8%89%B2%E7%9B%B8" target="_blank" rel="nofollow">色相</a>、<a href="https://zh.wikipedia.org/wiki/%E8%89%B2%E5%BA%A6_(%E8%89%B2%E5%BD%A9%E5%AD%A6)" target="_blank" rel="nofollow">饱和度</a>、<a href="https://zh.wikipedia.org/wiki/%E6%98%8E%E5%BA%A6" target="_blank" rel="nofollow">明度</a>。但是，你说这个谁懂啊！还是看图直接。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Hsl-hsv_models.svg/400px-Hsl-hsv_models.svg.png" alt="HSL和HSV"></p>
<p>比较一番之后，咱们就发现这个圆柱体相当适合切片儿——以圆柱的轴进行360度切片儿，切出来的截面非常好渲染，基本就是主色向着白色和黑色进行过渡，大家肯定都用过各种colorPicker工具，看这个截面应该会觉得很熟悉吧。那么再看一眼360度的颜色条，这个其实HSL和HSV都是可以的，如果是HSL要取S为1，L为0.5的环，HSV要取S为1,V为1的环，分别对应两种色彩模型最明艳的环。我个人选择了HSV作为取色标准，因为谷歌的colorPicker工具和sublime的colorPicker工具都采用的是这种，但HSV本身不在CSS规定中（HSL在CSS3标准中，可在代码里直接使用），所以在展现时要做转换。</p>
<h3 id="具体渲染">具体渲染</h3>
<p>渲染其实很简单，canvas和CSS都支持渐变渲染，只不过要渲染两层才能达到截面的效果，竖着渲染一层 透明——>黑 ，再横着渲染 白——>颜色条选取色 。具体见代码：</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> colorPanel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> canvas <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'panel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token method function property-access">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> lightGradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token method function property-access">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 亮度渲染</span>

    lightGradient<span class="token punctuation">.</span><span class="token method function property-access">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'rgba(0, 0, 0, 0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lightGradient<span class="token punctuation">.</span><span class="token method function property-access">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'rgba(0, 0, 0, 1)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 需要渲染两次</span>
            ctx<span class="token punctuation">.</span><span class="token method function property-access">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token comment">// 清除画布</span>

            <span class="token keyword">let</span> colorGradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token method function property-access">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 颜色渲染</span>

            colorGradient<span class="token punctuation">.</span><span class="token method function property-access">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'rgb(255, 255, 255)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            colorGradient<span class="token punctuation">.</span><span class="token method function property-access">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>

            ctx<span class="token punctuation">.</span><span class="token property-access">fillStyle</span> <span class="token operator">=</span> colorGradient<span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token method function property-access">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            ctx<span class="token punctuation">.</span><span class="token property-access">fillStyle</span> <span class="token operator">=</span> lightGradient<span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token method function property-access">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>相对的，颜色条其实就是将360度的色带剪开拉直了，因为色带不需要改变，所以渲染时利用CSS的渐变便可，注意颜色要首尾相接。</p>
<p>顺带提一下为啥前文说这次任务给的示例图不靠谱，因为示例图的渲染只需要一次啊，以此作为标准，不管怎么选取都相当于只改变一个变量（以HSL来讲，S会固定为1）,加上色带的改变，总共就只改变两个变量，当然不能选取到所有颜色。</p>
<h2 id="2-如何取色">2. 如何取色</h2>
<p>其实在确定了渲染逻辑后，取色逻辑相应的就确定了，在我以HSV作为渲染模型后，取色逻辑便是——色带是竖着的，那么就以点击色带的纵坐标，代表H，取值范围0-360；取色板主体是个方块儿，则以取色点的横纵坐标代表S和V，取值范围0-1。不行就看看谷歌的colorPicker的变化规律，相当好懂。这样取色就唯一确定了，接下来只要按照公式HSV值转换成RGB和HSL值即可，在改变RGB和HSL时，也同样的先转换为HSV再进行选取。</p>
<hr>
<p>这个任务的难点也就是这样吧，在学习过程中有很多个人的情感化理解，表述出来总感觉太过口语化，很可能有许多不严谨甚至错误的观点，欢迎各位指出。总之希望能提供一种思路，也希望看到更多新的思路。</p>
</body></html></div></div></div></div></div><div class="sc-bbd5e802-0 cbkQsN"><div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"how-to-create-color-picker","title":"俺的colorPicker制作思路","date":"2017-04-09","htmlText":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003cp\u003e\u003ca href=\"http://ife.baidu.com/course/detail/id/16\" target=\"_blank\" rel=\"nofollow\"\u003e原任务地址\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e说实话，一开始看到这个任务内心是相当懵比的——主要就是有两个点一下子没有头绪，但说实话，只要get到这两点的思路，这个任务也就完成了一半了。接下来俺就具体展开一下：\u003c/p\u003e\n\u003ch2 id=\"1-如何渲染颜色选取面板\"\u003e1. 如何渲染颜色选取面板\u003c/h2\u003e\n\u003cp\u003e讲道理我不知道为什么前端技术学院给了这么个示意图，因为这个图根本就取不到所有颜色啊喂！\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://bj.bcebos.com/imagelib/150/share_pic/03e6aae2b36fd74ca68bf930c031fc6b.png\" alt=\"任务图\"\u003e\u003c/p\u003e\n\u003cp\u003e为什么呢，颜色通常都是由三种成分（so我们最后确定颜色其实就是用三个变量）定义的，因此在我们通常用三维空间来描述颜色模型，RGB，HSL，以及此次任务中我用到的HSV都是这样，弄清楚颜色模型，也就知道该用什么方法来渲染了，下文将详细阐释：\u003c/p\u003e\n\u003ch3 id=\"rgb参考维基词条三原色光模式\"\u003eRGB（参考维基词条：\u003ca href=\"https://zh.wikipedia.org/wiki/%E4%B8%89%E5%8E%9F%E8%89%B2%E5%85%89%E6%A8%A1%E5%BC%8F\" target=\"_blank\" rel=\"nofollow\"\u003e三原色光模式\u003c/a\u003e）\u003c/h3\u003e\n\u003cp\u003e当前表示RGB的主流方法是用三个0-255间的整数，相信大家都知道，那么用脚趾头都能想出来，RGB的颜色模型是一个方块儿，这张图可以很直接的看出来。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/RGB_color_solid_cube.png/200px-RGB_color_solid_cube.png\" alt=\"RGB色彩模型\"\u003e\u003c/p\u003e\n\u003cp\u003e那么我们要用RGB颜色模型作为渲染标准么，我个人觉得不太靠谱，这个任务给出的示例图的选择器由两部分组成，一个长长的颜色条，和以这个颜色条的某个颜色（也就是我们的第一个变量）为标准渲染出的颜色面板（这个面板的上某点的横纵坐标正好是第二，第三个变量，也就确定了唯一的颜色）。那么以我小学水平的数学水平，我的第一反应就是以x,y,z的某个轴为颜色条，把这个方块儿切片儿，那不就成了么！然而切开来一看俺就傻逼了，这里面花花绿绿的我压根不知道咋渲染啊！所以，RGB被我pass掉了。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/RGBR.png/256px-RGBR.png\" alt=\"切面\"\u003e\u003c/p\u003e\n\u003ch3 id=\"hsl与hsv参考维基词条hsl和hsv的色彩空间\"\u003eHSL与HSV（参考维基词条：\u003ca href=\"https://zh.wikipedia.org/wiki/HSL%E5%92%8CHSV%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4\" target=\"_blank\" rel=\"nofollow\"\u003eHSL和HSV的色彩空间\u003c/a\u003e）\u003c/h3\u003e\n\u003cp\u003eHSL和HSV是将RGB色彩模型中的点在圆柱坐标系中的表示法，H一般用0-360之间的整数，代表圆柱的一周的角度，S和L/V是0-1之间的小数或对应的百分数（一般取到两位即可满足人眼的需要），也就是说，他们的模型是一个圆柱体。HSL即\u003ca href=\"https://zh.wikipedia.org/wiki/%E8%89%B2%E7%9B%B8\" target=\"_blank\" rel=\"nofollow\"\u003e色相\u003c/a\u003e、\u003ca href=\"https://zh.wikipedia.org/wiki/%E8%89%B2%E5%BA%A6_(%E8%89%B2%E5%BD%A9%E5%AD%A6)\" target=\"_blank\" rel=\"nofollow\"\u003e饱和度\u003c/a\u003e、\u003ca href=\"https://zh.wikipedia.org/wiki/%E4%BA%AE%E5%BA%A6\" target=\"_blank\" rel=\"nofollow\"\u003e亮度\u003c/a\u003e，而HSV指\u003ca href=\"https://zh.wikipedia.org/wiki/%E8%89%B2%E7%9B%B8\" target=\"_blank\" rel=\"nofollow\"\u003e色相\u003c/a\u003e、\u003ca href=\"https://zh.wikipedia.org/wiki/%E8%89%B2%E5%BA%A6_(%E8%89%B2%E5%BD%A9%E5%AD%A6)\" target=\"_blank\" rel=\"nofollow\"\u003e饱和度\u003c/a\u003e、\u003ca href=\"https://zh.wikipedia.org/wiki/%E6%98%8E%E5%BA%A6\" target=\"_blank\" rel=\"nofollow\"\u003e明度\u003c/a\u003e。但是，你说这个谁懂啊！还是看图直接。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Hsl-hsv_models.svg/400px-Hsl-hsv_models.svg.png\" alt=\"HSL和HSV\"\u003e\u003c/p\u003e\n\u003cp\u003e比较一番之后，咱们就发现这个圆柱体相当适合切片儿——以圆柱的轴进行360度切片儿，切出来的截面非常好渲染，基本就是主色向着白色和黑色进行过渡，大家肯定都用过各种colorPicker工具，看这个截面应该会觉得很熟悉吧。那么再看一眼360度的颜色条，这个其实HSL和HSV都是可以的，如果是HSL要取S为1，L为0.5的环，HSV要取S为1,V为1的环，分别对应两种色彩模型最明艳的环。我个人选择了HSV作为取色标准，因为谷歌的colorPicker工具和sublime的colorPicker工具都采用的是这种，但HSV本身不在CSS规定中（HSL在CSS3标准中，可在代码里直接使用），所以在展现时要做转换。\u003c/p\u003e\n\u003ch3 id=\"具体渲染\"\u003e具体渲染\u003c/h3\u003e\n\u003cp\u003e渲染其实很简单，canvas和CSS都支持渐变渲染，只不过要渲染两层才能达到截面的效果，竖着渲染一层 透明——\u003e黑 ，再横着渲染 白——\u003e颜色条选取色 。具体见代码：\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e colorPanel \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e canvas \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'panel'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e ctx \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e canvas\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'2d'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e lightGradient \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreateLinearGradient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 亮度渲染\u003c/span\u003e\n\n    lightGradient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eaddColorStop\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'rgba(0, 0, 0, 0)'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    lightGradient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eaddColorStop\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'rgba(0, 0, 0, 1)'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token function-variable function\"\u003erender\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ecolor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 需要渲染两次\u003c/span\u003e\n            ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eclearRect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 清除画布\u003c/span\u003e\n\n            \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e colorGradient \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreateLinearGradient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 颜色渲染\u003c/span\u003e\n\n            colorGradient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eaddColorStop\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'rgb(255, 255, 255)'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            colorGradient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eaddColorStop\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e color\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n            ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efillStyle\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e colorGradient\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efillRect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n            ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efillStyle\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e lightGradient\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efillRect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e相对的，颜色条其实就是将360度的色带剪开拉直了，因为色带不需要改变，所以渲染时利用CSS的渐变便可，注意颜色要首尾相接。\u003c/p\u003e\n\u003cp\u003e顺带提一下为啥前文说这次任务给的示例图不靠谱，因为示例图的渲染只需要一次啊，以此作为标准，不管怎么选取都相当于只改变一个变量（以HSL来讲，S会固定为1）,加上色带的改变，总共就只改变两个变量，当然不能选取到所有颜色。\u003c/p\u003e\n\u003ch2 id=\"2-如何取色\"\u003e2. 如何取色\u003c/h2\u003e\n\u003cp\u003e其实在确定了渲染逻辑后，取色逻辑相应的就确定了，在我以HSV作为渲染模型后，取色逻辑便是——色带是竖着的，那么就以点击色带的纵坐标，代表H，取值范围0-360；取色板主体是个方块儿，则以取色点的横纵坐标代表S和V，取值范围0-1。不行就看看谷歌的colorPicker的变化规律，相当好懂。这样取色就唯一确定了，接下来只要按照公式HSV值转换成RGB和HSL值即可，在改变RGB和HSL时，也同样的先转换为HSV再进行选取。\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e这个任务的难点也就是这样吧，在学习过程中有很多个人的情感化理解，表述出来总感觉太过口语化，很可能有许多不严谨甚至错误的观点，欢迎各位指出。总之希望能提供一种思路，也希望看到更多新的思路。\u003c/p\u003e\n\u003c/body\u003e\u003c/html\u003e","description":"说实话，一开始看到这个任务内心是相当懵比的——主要就是有两个点一下子没有头绪，但说实话，只要get到这两点的思路，这个任务也就完成了一半了。接下来俺就具体展开一下：......"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-create-color-picker"},"buildId":"OaPNOeFLxAYYRzaUmDxi4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>