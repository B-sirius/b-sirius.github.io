<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>LWDW!</title><meta name="description" content="Ré¡¹ç›®å°ç»“"/><meta property="og:title" content="Ré¡¹ç›®å°ç»“"/><meta property="og:description" content="æœ€è¿‘ç»“æŸçš„ä¸€ä¸ªé¡¹ç›®æœ‰å¾ˆå¤šå€¼å¾—å­¦ä¹ çš„åœ°æ–¹ï¼ŒæŒ‘ä¸€äº›ä¸æ•æ„Ÿçš„åœ¨æ­¤è®°å½•ã€‚å…¶ä¸­çš„æ¯ä¸€ç‚¹å…¶å®éƒ½æœ‰æ·±å…¥æŒ–æ˜çš„ç©ºé—´ï¼Œæ—¥åæƒ³å¿…ä¼šå†æ¬¡é‡åˆ°ã€‚......"/><meta name="next-head-count" content="6"/><meta name="theme-color" content="#000"/><meta property="og:type" content="website"/><meta property="og:image" content="https://s2.loli.net/2023/01/18/42YTZxzePtR7jy9.png"/><meta property="og:url" content="https://b-sirius.github.io"/><link rel="preload" href="/_next/static/css/aef510c8abf24c2c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aef510c8abf24c2c.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-673a4fae4a27af6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c873aea89b84d215.js" defer=""></script><script src="/_next/static/chunks/664-1b4479b4462ded63.js" defer=""></script><script src="/_next/static/chunks/332-e879213584d084bf.js" defer=""></script><script src="/_next/static/chunks/740-8163689fd2f6810b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-59c7c20c7e4526c3.js" defer=""></script><script src="/_next/static/UGjvZ1cg4mAT920l-Wf-X/_buildManifest.js" defer=""></script><script src="/_next/static/UGjvZ1cg4mAT920l-Wf-X/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-b711fa3b-0 dxGMRG"><div class="sc-7fa12c98-0 iqAzDm"><div class="sc-43499fa6-1 fpwtCg"><div class="sc-43499fa6-0 kHEYvc"><a class="sc-43499fa6-2 clMnXF" href="/">[<!-- -->Home<!-- -->]</a><a class="sc-43499fa6-2 clMnXF" href="/posts">[<!-- -->Posts<!-- -->]</a><a class="sc-43499fa6-3 knmsGc" rel="noopener noreferrer" target="_blank" href="https://github.com/B-sirius">[<!-- -->Github<!-- -->]</a><a class="sc-43499fa6-3 knmsGc" rel="noopener noreferrer" target="_blank" href="https://b-sirius.github.io/rss.xml">[<!-- -->RSS<!-- -->]</a></div><div class="sc-f5ce872-0 drvesR"><h1 class="sc-f5ce872-1 jPBPjm">LWDW!</h1><p class="sc-f5ce872-2 djaGsH">Learn the work from doing the workğŸº</p></div></div><div class="sc-c80897d2-0 sc-20291786-0 xdBKv eCERES"><div><div class="sc-d1e34df0-0 krSayT"><div class="sc-d1e34df0-2 kbnqSs">Ré¡¹ç›®å°ç»“</div><div class="sc-d1e34df0-3 fkAXua">Posted on <!-- -->2023-01-09</div></div></div></div><div class="sc-c80897d2-0 xdBKv"><div><div class="sc-d1e34df0-1 dvNdMl"><div class="sc-3393aa3b-0 IVYKM"></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"163","title":"Ré¡¹ç›®å°ç»“","date":"2023-01-09","mdText":"\næœ€è¿‘ç»“æŸçš„ä¸€ä¸ªé¡¹ç›®æœ‰å¾ˆå¤šå€¼å¾—å­¦ä¹ çš„åœ°æ–¹ï¼ŒæŒ‘ä¸€äº›ä¸æ•æ„Ÿçš„åœ¨æ­¤è®°å½•ã€‚å…¶ä¸­çš„æ¯ä¸€ç‚¹å…¶å®éƒ½æœ‰æ·±å…¥æŒ–æ˜çš„ç©ºé—´ï¼Œæ—¥åæƒ³å¿…ä¼šå†æ¬¡é‡åˆ°ã€‚\n\n---\n\nç›®å½•ï¼š\n\n- [æ–‡æ¡£è®¾è®¡](#æ–‡æ¡£è®¾è®¡)\n  - [ç³»ç»Ÿè®¾è®¡æ–‡æ¡£](#ç³»ç»Ÿè®¾è®¡æ–‡æ¡£)\n  - [ç»„ä»¶æ–‡æ¡£](#ç»„ä»¶æ–‡æ¡£)\n  - [å¼€å‘è€…FAQ](#å¼€å‘è€…faq)\n  - [å¼€å‘è€…éªŒè¯æŒ‡å—](#å¼€å‘è€…éªŒè¯æŒ‡å—)\n- [AWSæœåŠ¡](#awsæœåŠ¡)\n  - [ECS](#ecs)\n  - [EKS](#eks)\n  - [ECR](#ecr)\n  - [ELB](#elb)\n  - [AWS lambda](#aws-lambda)\n- [ç¯å¢ƒå˜é‡](#ç¯å¢ƒå˜é‡)\n  - [ç¯å¢ƒå˜é‡ in Next.js](#ç¯å¢ƒå˜é‡-in-nextjs)\n  - [æœ¬åœ°ç¯å¢ƒå˜é‡](#æœ¬åœ°ç¯å¢ƒå˜é‡)\n  - [ç¯å¢ƒå˜é‡ in Jest](#ç¯å¢ƒå˜é‡-in-jest)\n  - [åœ¨jestçš„setupæ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡](#åœ¨jestçš„setupæ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡)\n  - [åœ¨æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡](#åœ¨æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡)\n- [å…¶ä»–](#å…¶ä»–)\n  - [æœ¬åœ°ä¸€åˆ‡å®‰å¥½ï¼Œçº¿ä¸Šå‘å¸ƒç¼ºå°‘ä¾èµ–ï¼Œå¯èƒ½æ˜¯ï¼Ÿ](#æœ¬åœ°ä¸€åˆ‡å®‰å¥½çº¿ä¸Šå‘å¸ƒç¼ºå°‘ä¾èµ–å¯èƒ½æ˜¯)\n  - [å¦‚ä½•æ›´æ–°åŒ…/ç»„ä»¶/æœåŠ¡](#å¦‚ä½•æ›´æ–°åŒ…ç»„ä»¶æœåŠ¡)\n  - [JWT](#jwt)\n  - [Yarn2](#yarn2)\n  - [çº¿ä¸Šç›‘æ§æœåŠ¡å¼‚å¸¸æ’æŸ¥](#çº¿ä¸Šç›‘æ§æœåŠ¡å¼‚å¸¸æ’æŸ¥)\n\n## æ–‡æ¡£è®¾è®¡\n\næœ‰å“ªäº›æ–‡æ¡£å¯ä»¥æ•´ç†å½’æ€»ï¼Ÿæœ‰çš„æ–‡æ¡£é€‚åˆå•ç‹¬æ€»ç»“ï¼Œæœ‰çš„é€‚åˆæ”¾åœ¨Readmeä¸­ï¼Œä½†æ€»ä¹‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¯ä»¥è€ƒè™‘çš„ç‚¹ã€‚\n\n### ç³»ç»Ÿè®¾è®¡æ–‡æ¡£\n\nè¿™é‡Œçš„è®¾è®¡æŒ‡çš„æ˜¯ç³»ç»Ÿçš„æ¶æ„ï¼Œå°¤å…¶è¦å…³æ³¨**ç³»ç»Ÿä¹‹é—´æ˜¯å¦‚ä½•è¿æ¥çš„**ã€‚\n\nè€Œä»¥ä¸‹å†…å®¹ä¸åº”è¯¥è¢«åŒ…å«åœ¨å…¶ä¸­ï¼š\n\n- æœåŠ¡çš„å…·ä½“ç»†èŠ‚ã€‚\n- ç»„ä»¶çš„è®¾è®¡æ¨¡å¼ã€‚\n\n### ç»„ä»¶æ–‡æ¡£\n\næ•´ç†æ‰€æœ‰çš„ç»„ä»¶/æœåŠ¡ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹å…³æ³¨ç‚¹ï¼š\n\n- ä»‹ç»\n- æœåŠ¡ç±»å‹ï¼ˆæ¯”å¦‚SSR /Staticï¼‰\n- è·¯ç”±å‰ç¼€\n- ç”Ÿäº§ç¯å¢ƒåŸŸå\n- é¢„å‘ç¯å¢ƒåŸŸå\n- æµ‹è¯•ç¯å¢ƒåŸŸåï¼ˆè§„åˆ™ï¼‰\n- ä»“åº“åœ°å€\n- æµæ°´çº¿åœ°å€\n- å‘å¸ƒåˆ†æ”¯\n- æ¶‰åŠæŠ€æœ¯æ ˆ\n\n### å¼€å‘è€…FAQ\n\nç›®çš„æ˜¯æ”¶é›†å¼€å‘è€…å…³å¿ƒçš„å¸¸è§é—®é¢˜ï¼Œæ¯”å¦‚é¡¹ç›®å¦‚ä½•æœ¬åœ°å¯åŠ¨ï¼Œå¿…è¦æƒé™å¦‚ä½•ç”³è¯·ç­‰ã€‚\n\n### å¼€å‘è€…éªŒè¯æŒ‡å—\n\nç›®çš„æ˜¯ä¿è¯å¼€å‘è€…æäº¤çš„ç»„ä»¶å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯å®Œå…¨ä¾èµ–QAã€‚å¸¸è§çš„æ‰‹æ®µæœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œcode reviewç­‰ï¼Œä¸”å¾ˆå¯èƒ½ä¸CI/CDæµç¨‹æœ‰å…³ã€‚ä¸ªäººè§‰å¾—å¼€å‘è€…å¾ˆå®¹æ˜“å¯¹ä¸€äº›å°æ”¹åŠ¨æœ‰è¿·ä¹‹è‡ªä¿¡ï¼Œç»“æœå´æäº¤æ— æ³•åœ¨æµ‹è¯•ç¯å¢ƒè¿è¡Œçš„ä»£ç ç”šè‡³æå´©çº¿ä¸Šã€‚è¯¥æ­¥éª¤éå¸¸é‡è¦åˆå®¹æ˜“è¢«å¿½è§†ã€‚\n\n## AWSæœåŠ¡\n\nawsæœåŠ¡å¤ªå¸¸è§äº†ï¼Œç¨å¾®è®°å½•ä¸€ä¸‹æˆ‘æœ¬æ¬¡æ¥è§¦çš„ï¼Œä¸è‡³äºä¸€äº›åè¯éƒ½æ²¡æœ‰æ¦‚å¿µã€‚\n\n### ECS\n\nECS is Amazon Elastic **Container Service**.\n\n- Container Orchestration Service (å®¹å™¨ç¼–æ’å·¥å…·ï¼‰\n- Manages the whole container lifecycle.\n  - start\n  - re-schedule\n  - load balance\n- ECS Clusterï¼ˆECSé›†ç¾¤ï¼‰æ˜¯Control Planeï¼Œç®¡ç†æ‰€æœ‰è¿è¡Œç€å®¹å™¨çš„è™šæ‹Ÿæœºå™¨ã€‚\n\n![How does ECS work](https://s2.loli.net/2023/01/09/u8ytTRfvmx7gk4n.jpg)\n\n- è€Œè¿™äº›è™šæ‹Ÿæœºæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯EC2 Instanceï¼Œä½ è¿˜æ˜¯éœ€è¦ç®¡ç†è¿™äº›Instanceçš„ï¼Œæ¯”å¦‚åœ¨å¢åŠ containerçš„æ—¶å€™ï¼Œéœ€è¦ç¡®ä¿Instanceçš„èµ„æºè¶³å¤Ÿã€‚\n- ä½†å¦‚æœæˆ‘ä»¬æƒ³åœ¨AWSä¸Šhosting infrastructureã€‚å¯ä»¥ç”¨AWS Fargateã€‚é‚£å°±ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç†Instanceï¼Œä»–ä¼šæ ¹æ®ä½ æƒ³è¦è¿è¡Œçš„containeræ¥è‡ªåŠ¨åˆ†é…èµ„æºã€‚èŠ‚çœå‘€ï¼\n\n### EKS\n\nEKS is Elastic **Kubernetes** Service.\n\nKubernetes æ˜¯ECSçš„ç«å“ï¼Œéå¸¸Popularï¼Œæ‰€ä»¥EKSå°±æ˜¯ä¸ºäº†åœ¨AWSä½¿ç”¨Kubernetesæ¨å‡ºçš„ã€‚\n\nEKSçš„å·¥ä½œæ–¹å¼å’ŒECSå·®ä¸å¤šã€‚\n\n### ECR\n\nECR is Elastic **Container Registry**, a private docker registry.\n\n![whole story, Jenkins involved here!](https://s2.loli.net/2023/01/09/Lw6m7geKZ9A4YSW.png)\n\n### ELB\n\nELB is Elastic load balancing service.\n\n![è´Ÿè½½å‡è¡¡æœåŠ¡](https://s2.loli.net/2023/01/09/EaFjZvJ731LDGRA.png)\n\nä½¿ç”¨è¿™æ ·ä¸€ä¸ª load balanceræœ‰å¾ˆå¤šå¥½å¤„\n\n- å°†æµé‡åˆ†é…ç»™äº†å¾ˆå¤šä¸‹çº§å®ä¾‹\n- åªæš´éœ²å‡ºä¸€ä¸ªå…¥å£ï¼ˆDNSï¼‰\n- æ— ç¼å¤„ç†ä¸‹çº§åº”ç”¨çš„failures\n- å¯¹å®ä¾‹è¿›è¡Œå¥åº·æ£€æŸ¥\n- æä¾›https\n- å¼ºåˆ¶ä½¿ç”¨cookiesï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥è®¿é—®åˆ°åŒä¸€ä¸ªinstance\n- â€¦\n\n### AWS lambda\n\nè¿™æ˜¯ä¸€ä¸ªServerlessæœåŠ¡ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç†è§£ä¸ºå®ƒæä¾›äº†æ ¹æ®äº‹ä»¶è‡ªåŠ¨è§¦å‘Functionçš„èƒ½åŠ›ã€‚\n\nå…¶ä¸­äº‹ä»¶å¯ä»¥æŒ‡çš„æ˜¯S3çš„å†…å®¹å˜åŒ–ï¼ŒAPIçš„è¯·æ±‚ï¼Œæˆ–å…¶ä»–å„ç§å„æ ·çš„AWSæœåŠ¡äº‹ä»¶ã€‚\n\nè¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µï¼ŒServerlessï¼Œå€¼å¾—è¯´ä¸€è¯´ã€‚\n\næˆ‘ä¸ªäººçš„ç†è§£æ˜¯è¿™æ ·çš„ï¼š\n\né¦–å…ˆServerlesså¹¶ä¸æ˜¯è¯´æ²¡æœ‰Serverï¼Œè€Œæ˜¯Serverå¯¹ç”¨æˆ·ä¸å¯è§ï¼Œwhich meansï¼š\n\n- ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç†serverã€‚\n- ä¼šæ ¹æ®ä½¿ç”¨è‡ªåŠ¨æ‰©å®¹ã€‚\n- åªæœ‰å½“è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šäº§ç”Ÿè´¹ç”¨ï¼ˆè€Œä¸æ˜¯ä¸ºServeræœ¬èº«ä»˜è´¹ï¼‰ã€‚\n\n![](https://s2.loli.net/2023/01/09/B2oTW3lrEuznZGK.png)\n\n## ç¯å¢ƒå˜é‡\n\n### ç¯å¢ƒå˜é‡ in Next.js\n\nBefore `const HOST_NAME = 'www.sample.com'`.\n\nAfter `const HOST_NAME = 'process.env.NEXT_PUBLIC_HOST_NAME'`.\n\nè¿™é‡Œæ¶‰åŠåˆ°Next.jsçš„ä¸€ä¸ªç‰¹æ€§ï¼š[expose env vars to the browser](https://nextjs.org/docs/basic-features/environment-variables#exposing-environment-variables-to-the-browser)ã€‚\n\n- During the **build stage**, next.js will find these env vars start with **NEXT_PUBLIC_** and replace them with literal.\n- build stageå¾ˆå…³é”®ï¼Œåœ¨CI/CDæµç¨‹ä¸­ï¼Œå¯èƒ½æœ‰buildã€releaseç­‰å¤šä¸ªç¯èŠ‚ï¼Œåœ¨å“ªé‡Œä¼ å…¥ç¯å¢ƒå˜é‡å¾ˆå…³é”®ã€‚\n\n**Trick: å¦‚æœåœ¨ä¸€äº›æƒ…å½¢ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç”¨äºnodeç«¯çš„ç¯å¢ƒå˜é‡æš´éœ²ç»™æµè§ˆå™¨ï¼Œå¯ä»¥æ€ä¹ˆåšï¼Ÿ**\n\n- Read these env vars inside `getServerSideProps` and return them as props. [More to read about it](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props#when-does-getserversideprops-run).\n\n```javascript\n  export const getServerSideProps = () =\u003e {\n    // we can read server side env vars here.\n    return {\n      serverConstants: {\n        TEST_HOST_NAME: process.env.TEST_HOST_NAME\n      }\n    }\n  }\n  \n  // client side.\n  export const Page = (props) =\u003e {\n    const { serverConstants } = props;\n    return (\n      \u003cp\u003eTEST_HOST_NAME: {serverConstants.TEST_HOST_NAME}\u003c/p\u003e\n    )\n  }\n  ```\n\n\n### æœ¬åœ°ç¯å¢ƒå˜é‡\n\nå…³äºåœ¨æœ¬åœ°å¼€å‘ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œnext.js å·²ç»æœ‰äº†å¾ˆå¥½çš„æ”¯æŒï¼ŒæŸ¥çœ‹ [è¿™é‡Œ](https://nextjs.org/docs/basic-features/environment-variables#loading-environment-variables)ã€‚\n\nåœ¨å®é™…åœºæ™¯ä¸‹ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª.env.local.examlpeæ–‡ä»¶ã€‚\n\nå¼€å‘è€…å¯ä»¥æ‹·è´è¯¥æ–‡ä»¶å¹¶å°†å…¶ä½œä¸ºè‡ªå·±çš„.env.localæ–‡ä»¶ã€‚\n\n**.env.local ä¸åº”è¯¥è¢«æäº¤åˆ°repoä¸­ï¼**\n\n### ç¯å¢ƒå˜é‡ in Jest\n\næ–¹æ³•æ˜¯æœ‰å¾ˆå¤šçš„ï¼ŒæŒ‰éœ€é‡‡ç”¨ï¼Œè¿™é‡Œè®°å½•ä¸¤ç§ã€‚\n\n### åœ¨jestçš„setupæ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡\n\n[æ–‡æ¡£åœ¨æ­¤](https://jestjs.io/docs/configuration#setupfilesafterenv-array)ã€‚ç®€å•æ¥è¯´ï¼Œåœ¨è¿™é‡Œè®¾ç½®çš„ç¯å¢ƒå˜é‡ä¼šä½œç”¨äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ã€‚\n\né€‚åˆç”¨äºè®¾ç½®é»˜è®¤ç¯å¢ƒå˜é‡ï¼Œä½†æ— æ³•æ»¡è¶³éœ€è¦æµ‹è¯•ä¸åŒçš„ç¯å¢ƒå˜é‡çš„åœºæ™¯ã€‚\n\n### åœ¨æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡\n\nå½“ç„¶æˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ã€‚\n\nåªæ˜¯è¦è®°ä½ï¼Œåœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å‰ï¼Œä¸€å®šè¦ä½¿ç”¨ [**restModules**](https://jestjs.io/docs/jest-object#jestresetmodules) ï¼Œä¸”**åŠ¨æ€å¼•å…¥**æ¶‰åŠç¯å¢ƒå˜é‡çš„æ¨¡å—ã€‚\n\n```javascript\ndescribe('environmental variables', () =\u003e {\n  const OLD_ENV = process.env;\n\n  beforeEach(() =\u003e {\n    jest.resetModules() // Most important - it clears the cache\n    process.env = { ...OLD_ENV }; // Make a copy\n  });\n\n  afterAll(() =\u003e {\n    process.env = OLD_ENV; // Restore old environment\n  });\n\n  test('will receive process.env variables', () =\u003e {\n    // Set the variables\n    process.env.NODE_ENV = 'dev';\n    process.env.PROXY_PREFIX = '/new-prefix/';\n    process.env.API_URL = 'https://new-api.com/';\n    process.env.APP_PORT = '7080';\n    process.env.USE_PROXY = 'false';\n\n    const testedModule = require('../../config/env').default // dynamic import\n\n    // ... actual testing\n  });\n});\n```\n\n## å…¶ä»–\n\n### æœ¬åœ°ä¸€åˆ‡å®‰å¥½ï¼Œçº¿ä¸Šå‘å¸ƒç¼ºå°‘ä¾èµ–ï¼Œå¯èƒ½æ˜¯ï¼Ÿ\n\nè§„åˆ™ï¼šå¦‚æœ`NODE_ENV`è¢«è®¾ç½®æˆ`production`ï¼Œyarnä¸ä¼šå®‰è£…`devDependencies`ä¸­çš„ä¾èµ–ï¼Œå…·ä½“å¯çœ‹[è¿™é‡Œ](https://classic.yarnpkg.com/en/docs/cli/install#toc-yarn-install-production-true-false)ã€‚\n\næ‰€ä»¥è¿™ç§cmdæ˜¯åˆç†çš„ï¼š`yarn install \u0026\u0026 yarn test \u0026\u0026 NODE_ENV=production yarn export`ã€‚\n\nç›¸å¯¹çš„ï¼Œå¦‚æœ`NODE_ENV`è¢«è®¾ç½®çš„å¤ªæ—©ï¼Œå¾ˆå¯èƒ½ä¼šå¯¼è‡´`yarn test`ç¼ºå°‘ä¾èµ–ã€‚\n\n### å¦‚ä½•æ›´æ–°åŒ…/ç»„ä»¶/æœåŠ¡\n\né™¤äº†æ›´æ–°é€»è¾‘ï¼Œä¸€èˆ¬è¿˜æœ‰å“ªäº›æ­¥éª¤ï¼Ÿ\n\n1. æ›´æ–°æµ‹è¯•ç”¨ä¾‹ï¼Œä¿è¯æœ¬åœ°æµ‹è¯•ç”¨ä¾‹é€šè¿‡ã€‚\n2. æœ¬åœ°æˆåŠŸè¿è¡ŒæœåŠ¡ã€‚\n3. å¼€ä¸€ä¸ªdraft PR.\n   1. å°†å…¶éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒã€‚\n   2. åœ¨æµ‹è¯•ç¯å¢ƒæˆåŠŸè¿è¡Œã€‚\n4. æ›´æ–°ç‰ˆæœ¬ã€‚ï¼ˆè§†å…·ä½“æƒ…å½¢ï¼‰\n5. æ‰¾äººreviewã€‚\n6. æœ‰äº†approvalsï¼Œå¯ä»¥mergeã€‚\n7. å…¶ä½™çš„å°±æ˜¯QAã€éƒ¨ç½²æµç¨‹ç­‰ã€‚\n\n### JWT\n\nJWTï¼ˆJSON web tokenï¼‰æ˜¯ä¸€ç§å¸¸è§çš„åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é—´ä¼ é€’ä¿¡æ¯çš„æ–¹å¼ã€‚\n\n1. é™¤éçŸ¥é“ç­¾åï¼Œç”¨æˆ·æ˜¯æ— æ³•ä¼ªé€ æ•°æ®çš„ã€‚\n2. è€Œheaderå’Œpayloadæœ¬èº«æ˜¯å¹¶æ²¡æœ‰è¢«åŠ å¯†çš„ã€‚\n\næ‰€ä»¥åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œä»»ä½•äººéƒ½å¯ä»¥æŸ¥çœ‹è¯·æ±‚çš„æ•°æ®ï¼Œä½†ä¸çŸ¥é“ç­¾åçš„æ™®é€šç”¨æˆ·æ²¡åŠæ³•è‡ªå·±æ„é€ ã€ç¯¡æ”¹è¯·æ±‚ã€‚\n\n[è¿›ä¸€æ­¥äº†è§£JWT](https://en.wikipedia.org/wiki/JSON_Web_Token)ã€‚\n\n### Yarn2\n\nYarn2 = **yarn berry**ï¼ˆæ›´åŠ å‡†ç¡®ï¼‰ã€‚å’Œ yarn 1.x æ¯”èµ·æ¥ç®—æ˜¯å¤§æ”¹ã€‚\n\nå¦‚æœä½¿ç”¨PnPç‰¹æ€§ï¼Œyarnä¼šç”Ÿæˆ`.pnp.cjs`ä»¥ä»£æ›¿`node_modules`ã€‚\n\n`.pnp.cjs`åªæ˜¯ä¸€äº›mapsï¼ŒåŒ…æ‹¬å¦‚ä½•åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æ‰¾åˆ°packagesã€‚\n\nè€Œpackagesæœ¬èº«ï¼Œæ˜¯è¢«zippedå‹ç¼©è¿‡çš„ï¼Œæ‰€ä»¥æ–‡ä»¶çš„æ•°é‡è¿œè¿œå°‘äº`node_modules`ã€‚\n\nå°½ç®¡packageè¢«å‹ç¼©è¿‡ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥å€ŸåŠ©`fs`çš„èƒ½åŠ›è¯»å–æ–‡ä»¶ã€‚\n\n**æ›´å¤šyarn2ï¼Œæ¬¢è¿é˜…è¯»ï¼š**\n\n- [JavaScript package managers compared: npm, Yarn, or pnpm?](https://blog.logrocket.com/javascript-package-managers-compared/)\n- [Plug'n'Play](https://www.yarnpkg.cn/features/pnp)\n\n### çº¿ä¸Šç›‘æ§æœåŠ¡å¼‚å¸¸æ’æŸ¥\n\nå¦‚æœæ€€ç–‘æœ‰å¼‚å¸¸çš„çº¿ä¸Šæµé‡ï¼Œå¦‚ä½•æ’æŸ¥ï¼š\n\n1. è°ƒæ•´æ—¶é—´åŒºé—´ï¼Œæ¥è§‚å¯Ÿæµé‡æ˜¯å¦æ˜¯ä¸€ç¬é—´æ¶Œå…¥çš„ã€‚\n2. æ¯”è¾ƒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æµé‡ï¼Œè§‚å¯Ÿæµé‡æ˜¯å¦æ˜¯ç›´æ¥æ‰“åˆ°æœåŠ¡ç«¯çš„ã€‚\n3. æ¯”è¾ƒæµé‡å³°å€¼æ—¥å¿—æ˜¯å¦æœ‰å…±åŒç‚¹ï¼šClient IP, Country, Region, Cityâ€¦","description":"æœ€è¿‘ç»“æŸçš„ä¸€ä¸ªé¡¹ç›®æœ‰å¾ˆå¤šå€¼å¾—å­¦ä¹ çš„åœ°æ–¹ï¼ŒæŒ‘ä¸€äº›ä¸æ•æ„Ÿçš„åœ¨æ­¤è®°å½•ã€‚å…¶ä¸­çš„æ¯ä¸€ç‚¹å…¶å®éƒ½æœ‰æ·±å…¥æŒ–æ˜çš„ç©ºé—´ï¼Œæ—¥åæƒ³å¿…ä¼šå†æ¬¡é‡åˆ°ã€‚......"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"163"},"buildId":"UGjvZ1cg4mAT920l-Wf-X","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>