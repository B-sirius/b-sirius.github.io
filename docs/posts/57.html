<!DOCTYPE html><html lang="zh-Hans"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>LWDW!</title><meta name="description" content="jså¯¹è±¡å…‹éš†ä¹‹è°œ"/><meta name="next-head-count" content="4"/><meta name="theme-color" content="#000"/><link rel="preload" href="/_next/static/css/aef510c8abf24c2c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aef510c8abf24c2c.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-673a4fae4a27af6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c873aea89b84d215.js" defer=""></script><script src="/_next/static/chunks/664-1b4479b4462ded63.js" defer=""></script><script src="/_next/static/chunks/332-870bd19cd67b43d2.js" defer=""></script><script src="/_next/static/chunks/740-8163689fd2f6810b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-42a5e3c436df5483.js" defer=""></script><script src="/_next/static/Mla5crxgZTbiqkAKR9xSA/_buildManifest.js" defer=""></script><script src="/_next/static/Mla5crxgZTbiqkAKR9xSA/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-a1085f02-0 eHZcHI"><div class="sc-7fa12c98-0 iqAzDm"><div class="sc-78f004b3-1 hMmnK"><div class="sc-78f004b3-0 MUgkG"><a class="sc-78f004b3-2 kiBeJX" href="/">[<!-- -->Home<!-- -->]</a><a class="sc-78f004b3-2 kiBeJX" href="/posts">[<!-- -->Posts<!-- -->]</a></div><div class="sc-f5ce872-0 drvesR"><h1 class="sc-f5ce872-1 jPBPjm">LWDW!</h1><p class="sc-f5ce872-2 djaGsH">Learn the work from doing the workğŸº</p></div></div><div class="sc-c80897d2-0 sc-20291786-0 xdBKv eCERES"><div><div class="sc-a388caea-0 gsccIu"><div class="sc-a388caea-2 oIrUR">jså¯¹è±¡å…‹éš†ä¹‹è°œ</div><div class="sc-a388caea-3 cAaIFf">Posted on <!-- -->2017-08-26</div></div></div></div><div class="sc-c80897d2-0 xdBKv"><div><div class="sc-a388caea-1 ffWHKI"><div class="sc-d48aeb73-0 icKMYn"></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"57","title":"jså¯¹è±¡å…‹éš†ä¹‹è°œ","date":"2017-08-26","mdText":"\n## å…ˆè°ˆè°ˆæ·±æ‹·è´\n\nå¦‚ä½•åœ¨jsä¸­è·å¾—ä¸€ä¸ªå…‹éš†å¯¹è±¡ï¼Œå¯ä»¥è¯´æ˜¯å–œé—»ä¹è§çš„è¯é¢˜äº†ã€‚ç›¸ä¿¡å¤§å®¶éƒ½äº†è§£å¼•ç”¨ç±»å‹ä¸åŸºæœ¬ç±»å‹ï¼Œä¹Ÿéƒ½çŸ¥é“æœ‰ç§å«åšæ·±æ‹·è´çš„ä¸œè¥¿ï¼Œä¼ è¯´æ·±æ‹·è´å¯ä»¥è·å¾—ä¸€ä¸ªå…‹éš†å¯¹è±¡ï¼é‚£ä¹ˆåƒæˆ‘è¿™æ ·çš„èŒæ–°è‡ªç„¶å°±å»å­¦ä¹ äº†ä¸€æ³¢ï¼Œæˆ‘ä»¬èƒ½æ‰¾åˆ°çš„ä»£ç åŸºæœ¬éƒ½æ˜¯è¿™æ ·çš„ï¼š\n\n### ä½é…ç‰ˆæ·±æ‹·è´\n\n```javascript\nvar deepClone = function(currobj){\n    if(typeof currobj !== 'object'){\n        return currobj;\n    }\n    if(currobj instanceof Array){\n        var newobj = [];\n    }else{\n        var newobj = {}\n    }\n    for(var key in currobj){\n        if(typeof currobj[key] !== 'object'){\n            newobj[key] = currobj[key];\n        }else{\n            newobj[key] = deepClone(currobj[key])    \n        }\n    }\n    return newobj\n}\n```\n\nå•§å•§çœŸæ˜¯å¾ˆç²¾å·§å•Šï¼å¯¹äºArrayå’Œæ™®é€šObjectéƒ½åšäº†åŒºåˆ†ã€‚ä½†æ˜¯æ˜¾ç„¶ï¼Œå€ŸåŠ©é€’å½’å®ç°çš„æ·±æ‹·è´å¦‚æœè¦å…‹éš†å±‚çº§å¾ˆå¤šçš„å¤æ‚å¯¹è±¡ï¼Œå®¹æ˜“é€ æˆå†…å­˜æº¢å‡ºï¼Œå’±å¯ä»¥åšå‡ºä¸€ä¸ªå°å°æ”¹è¿›ï¼š\n\n### çœ‹èµ·æ¥é…·ä¸€ç‚¹çš„æ·±æ‹·è´\n\n```javascript\nvar deepClone = function(currobj){\n    if(typeof currobj !== 'object'){\n        return currobj;\n    }\n    if(currobj instanceof Array){\n        var newobj = [];\n    }else{\n        var newobj = {}\n    }\n    var currQue = [currobj], newQue = [newobj]; //å…³é”®åœ¨è¿™é‡Œ\n    while(currQue.length){\n        var obj1 = currQue.shift(),obj2 = newQue.shift();\n        for(var key in obj1){\n            if(typeof obj1[key] !== 'object'){\n                obj2[key] = obj1[key];\n            }else{\n                if(obj1[key] instanceof Array ){\n                    obj2[key] = [];\n                }else{\n                    obj2[key] = {}\n                };\n                // å¦™å•Š\n                currQue.push(obj1[key]);\n                newQue.push(obj2[key]);\n            }\n        }\n    }\n    return newobj;\n};\n```\n\nè¿™é‡Œåˆ©ç”¨äº†ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œè¿˜ç®—ä¼˜é›…çš„é¿å…äº†é€’å½’çš„å¼Šç«¯ã€‚\n\n### JSONåºåˆ—åŒ–\n\nè¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯åˆ©ç”¨JSONçš„å†…ç½®æ–¹æ³•ï¼Œå³æ‰€è°“çš„JSONåºåˆ—åŒ–ï¼š\n\n```javascript\nvar deepClone = function(obj){\n    var str, newobj = obj.constructor === Array ? [] : {};\n    if(typeof obj !== 'object'){\n        return;\n    } else if(window.JSON){\n        str = JSON.stringify(obj), //ç³»åˆ—åŒ–å¯¹è±¡\n        newobj = JSON.parse(str); //è¿˜åŸ\n    } else {\n        for(var i in obj){\n            newobj[i] = typeof obj[i] === 'object' ? \n            deepClone(obj[i]) : obj[i]; \n        }\n    }\n    return newobj;\n};\n```\n\nä¸è¿‡ä¸æ‰“ç´§ï¼Œå®ƒä¸ä¸Šé¢æ–¹æ³•çš„æ•ˆæœåŸºæœ¬ç›¸åŒã€‚\n\n### ä¸Šé¢å‡ ç§æ·±æ‹·è´çš„å±€é™\n\næ‹œæ‰˜ï¼Œå¤§å®¶éƒ½å¾ˆæ‡‚å¯¹è±¡ï¼Œä¸Šé¢çš„æ–¹æ³•æœ‰å‡ ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼š\n\n- é‡åˆ°å¯¹è±¡å†…éƒ¨çš„**å¾ªç¯å¼•ç”¨**ç›´æ¥gg\n- æ— æ³•æ‹·è´**å‡½æ•°**ï¼ˆtypeof å‡½æ•° å¾—åˆ°çš„æ˜¯ 'function'ï¼‰ï¼Œå‡½æ•°ä»æ˜¯å¼•ç”¨ç±»å‹\n- æ— æ³•æ­£ç¡®ä¿ç•™**å®ä¾‹å¯¹è±¡çš„åŸå‹**\n\näºæ˜¯ï¼Œæˆ‘ä»¬å°±è¦å¼€å§‹æ”¹é€ ä¸Šé¢çš„æ·±æ‹·è´æ–¹æ³•æ¥è¿›è¡Œå®Œç¾çš„å…‹éš†äº†ï¼.............ä¹ˆï¼Ÿ\n\n## ç­‰ä¸‹ï¼Œä½ åˆ°åº•è¦å•¥\n\nå…‹éš†å…‹éš†ï¼Œæˆ‘ä»¬å¹³å¸¸æŠŠå®ƒæŒ‚åœ¨å˜´ä¸Šï¼Œä½†é¢å¯¹ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬çœŸæ­£æƒ³å…‹éš†çš„æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘æƒ³åœ¨99%çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³å…‹éš†çš„æ˜¯å¯¹è±¡çš„**æ•°æ®**ï¼Œè€Œä¿ç•™å®ƒçš„**åŸå‹å¼•ç”¨**å’Œ**æ–¹æ³•å¼•ç”¨**ï¼Œå› æ­¤ä¸Šé¢æåˆ°çš„å±€é™ä¸­çš„ç¬¬äºŒç‚¹ï¼ŒåŸºæœ¬å¯ä»¥ä¸è€ƒè™‘ã€‚ç°åœ¨å’±å†æ¥çœ‹çœ‹æ€ä¹ˆè§£å†³å‰©ä¸‹ä¸¤ç‚¹ã€‚\n\n## è§£å†³å¾ªç¯å¼•ç”¨\n\né¦–å…ˆææ¸…ä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨ï¼Œå¸¸è§çš„å¾ªç¯å¼•ç”¨æœ‰ä¸¤ç§ï¼š\n\n### è‡ªèº«å¾ªç¯å¼•ç”¨\n\n```javascript\nvar a = {};\na._self = a;\n```\n\nè¿™ç§å¾ªç¯å¼•ç”¨å¯ä»¥è¯´å¾ˆæ˜¯å¸¸è§ã€‚\n\n### å¤šä¸ªå¯¹è±¡äº’ç›¸å¼•ç”¨\n\n```javascript\nvar a = {};\nvar b = {};\na.brother = b;\nb.brother = a;\n```\n\nä¹Ÿä¸æ˜¯æ²¡è§è¿‡ï¼Œä¸è¿‡è¿™æ˜¯å…¸å‹å¯¼è‡´å¯¹è±¡å†…å­˜æ— æ³•è¢«å›æ”¶çš„å†™æ³•ï¼Œæœ¬èº«å°±ä¸æ¨èã€‚\n\n### è§£å†³ä¹‹é“\n\nç›®å‰åªæ‰¾åˆ°äº†é’ˆå¯¹ç¬¬ä¸€ç§å¼•ç”¨çš„è§£å†³æ–¹æ³•ï¼Œæ¥è‡ªäºJqueryæºç ï¼š\n\n```javascript\njQuery.extend = jQuery.fn.extend = function() {\n  // optionsæ˜¯ä¸€ä¸ªç¼“å­˜å˜é‡ï¼Œç”¨æ¥ç¼“å­˜arguments[i]\n  // nameæ˜¯ç”¨æ¥æ¥æ”¶å°†è¦è¢«æ‰©å±•å¯¹è±¡çš„key\n  // srcæ”¹å˜ä¹‹å‰targetå¯¹è±¡ä¸Šæ¯ä¸ªkeyå¯¹åº”çš„value\n  // copyä¼ å…¥å¯¹è±¡ä¸Šæ¯ä¸ªkeyå¯¹åº”çš„valu\n  // copyIsArrayåˆ¤å®šcopyæ˜¯å¦ä¸ºä¸€ä¸ªæ•°ç»„\n  // cloneæ·±æ‹·è´ä¸­ç”¨æ¥ä¸´æ—¶å­˜å¯¹è±¡æˆ–æ•°ç»„çš„src\n  var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\n  i = 1,\n  length = arguments.length,\n  deep = false;\n\n  // å¤„ç†æ·±æ‹·è´çš„æƒ…å†µ\n  if (typeof target === \"boolean\") {\n    deep = target;\n    target = arguments[1] || {};\n    //è·³è¿‡å¸ƒå°”å€¼å’Œç›®æ ‡ \n    i++;\n  }\n\n  // æ§åˆ¶å½“targetä¸æ˜¯objectæˆ–è€…functionçš„æƒ…å†µ\n  if (typeof target !== \"object\" \u0026\u0026 !jQuery.isFunction(target)) {\n    target = {};\n  }\n\n  // å½“å‚æ•°åˆ—è¡¨é•¿åº¦ç­‰äºiçš„æ—¶å€™ï¼Œæ‰©å±•jQueryå¯¹è±¡è‡ªèº«\n  if (length === i) {\n    target = this; --i;\n  }\n  for (; i \u003c length; i++) {\n    if ((options = arguments[i]) != null) {\n      // æ‰©å±•åŸºç¡€å¯¹è±¡\n      for (name in options) {\n        src = target[name];\t\n        copy = options[name];\n\n        // é˜²æ­¢æ°¸æ— æ­¢å¢ƒçš„å¾ªç¯ï¼Œè¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚var i = {};i.a = i;$.extend(true,{},i);å¦‚æœæ²¡æœ‰è¿™ä¸ªåˆ¤æ–­å˜æˆæ­»å¾ªç¯äº†\n        if (target === copy) {\n          continue;\n        }\n        if (deep \u0026\u0026 copy \u0026\u0026 (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\n          if (copyIsArray) {\n            copyIsArray = false;\n            clone = src \u0026\u0026 jQuery.isArray(src) ? src: []; // å¦‚æœsrcå­˜åœ¨ä¸”æ˜¯æ•°ç»„çš„è¯å°±è®©cloneå‰¯æœ¬ç­‰äºsrcå¦åˆ™ç­‰äºç©ºæ•°ç»„ã€‚\n          } else {\n            clone = src \u0026\u0026 jQuery.isPlainObject(src) ? src: {}; // å¦‚æœsrcå­˜åœ¨ä¸”æ˜¯å¯¹è±¡çš„è¯å°±è®©cloneå‰¯æœ¬ç­‰äºsrcå¦åˆ™ç­‰äºç©ºæ•°ç»„ã€‚\n          }\n          // é€’å½’æ‹·è´\n          target[name] = jQuery.extend(deep, clone, copy);\n        } else if (copy !== undefined) {\n          target[name] = copy; // è‹¥åŸå¯¹è±¡å­˜åœ¨nameå±æ€§ï¼Œåˆ™ç›´æ¥è¦†ç›–æ‰ï¼›è‹¥ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°çš„å±æ€§ã€‚\n        }\n      }\n    }\n  }\n  // è¿”å›ä¿®æ”¹çš„å¯¹è±¡\n  return target;\n};\n```\n\n## è§£å†³åŸå‹çš„å¼•ç”¨\n\nåœ¨æˆ‘ä»¬æƒ³åŠæ³•é­”æ”¹æ·±æ‹·è´æ—¶ï¼Œå…ˆçœ‹ä¸‹ä»¥ä¸Šè¿™ä¹ˆå¤šæ·±æ‹·è´çš„åŸºæœ¬åŸç†ï¼š\n\n**åˆ©ç”¨for-inå¾ªç¯éå†å¯¹è±¡å±æ€§ï¼Œå¦‚æœå±æ€§å€¼æ˜¯å¯¹è±¡åˆ™æ·±æ‹·è´ï¼Œä¸æ˜¯åˆ™ç›´æ¥èµ‹å€¼**\n\näºæ˜¯ä¿ºçœ‰å¤´ä¸€çš±å‘ç°äº‹æƒ…å¹¶ä¸ç®€å•ï¼Œä¿ºä¸Šä¸€ç¯‡åšå®¢å·²ç»è¯´æ˜ï¼š**for-inéå†çš„æ˜¯å¯¹è±¡ä»¥åŠå…¶åŸå‹é“¾ä¸Šå¯æšä¸¾å±æ€§**ï¼Œå› æ­¤æƒ³åœ¨éå†æ—¶å¯¹æºå¯¹è±¡çš„`__proto__`åšæ‰‹è„šæ˜¯æ ¹æœ¬ä¸å­˜åœ¨çš„ï¼Œ**`__proto__`ä»¥åŠå®ƒçš„ä¸å¯æšä¸¾å±æ€§æ ¹æœ¬ä¸ä¼šè¢«éå†åˆ°**ã€‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¾‹å­çœ‹å‡ºï¼š\n\n```javascript\nvar deepClone = function() {...} // éšä¾¿ä»ä¸Šé¢æ‹¿ä¸€ä¸ª\nvar A = function() {\n  this.val = 1;\n}\nA.prototype.log = function() {\n  console.log(this.val);\n}\n\nvar obj1 = new A();\nvar obj2 = deepClone(obj1);\n\nconsole.log(obj1); // A {val: 1}\nconsole.log(obj2); // {val: 1, log: function(){...}}\n```\n\nå› æ­¤ï¼Œä¸€ä¸ªè§£å†³æ–¹æ³•å¾ˆå•çº¯ï¼Œå°±æ˜¯åƒä¸Šé¢çš„jQuery.extendæ–¹æ³•ä¸€æ ·ï¼Œ**è‡ªå·±ä¼ å…¥æ‹·è´çš„ç›®æ ‡å¯¹è±¡**ï¼Œextendæ–¹æ³•æœ¬è´¨ä¸Šåªæ˜¯**æ‹“å±•ç›®æ ‡å¯¹è±¡çš„å±æ€§ï¼Œä½¿å…¶è·å¾—æºå¯¹è±¡ä¸Šçš„æ•°æ®**ï¼Œè¿™æ ·ä¸€æ¥åªè¦æˆ‘ä»¬å…ˆåˆ›å»ºå¥½ç¬¦åˆéœ€æ±‚çš„ç›®æ ‡å¯¹è±¡å³å¯ã€‚\n\nå¦ä¸€ç§æ–¹æ³•åˆ™æ˜¯ä¸é‡‡ç”¨æ·±æ‹·è´ï¼Œ**ç›´æ¥å–å‡ºéœ€è¦è¿›è¡Œæ‹·è´çš„å¯¹è±¡çš„æ•°æ®ï¼Œç„¶åå†åˆ©ç”¨è¿™ä»½æ•°æ®æ¥å®ä¾‹åŒ–å’Œè®¾ç½®ä¸€ä¸ªæ–°çš„å¯¹è±¡å‡ºæ¥**ï¼š\n\n```javascript\nvar Foo = function( obj ){\n    this.name = obj.name;\n    this.sex = obj.sex\n};\n\nFoo.prototype.toJSON = funciton(){\n    return { name: this.name, sex: this.sex };\n};\n\nvar foo = new Foo({ name: \"bandit\", sex: \"male\" });\nvar fooCopy = new Foo( foo.toJSON() );\n```\n\né—®é¢˜åŒæ ·å¾—åˆ°è§£å†³ã€é¼“æŒã€‘\n\n------\n\nå›é¡¾ä¸€ä¸‹ï¼Œæ²¡æœ‰å“ªç§æ–¹æ³•æ˜¯ä¸‡ç”¨çš„é­”æ³• â€”â€” åœ¨æˆ‘ä»¬æƒ³è¦è·å¾—ä¸€ä¸ªå…‹éš†å¯¹è±¡ä¹‹å‰ï¼Œæˆ–è®¸æœ€å¥½å…ˆææ¸…æ¥šæˆ‘ä»¬åˆ°åº•æ˜¯åœ¨å…‹éš†ä»€ä¹ˆï¼Œå†é‡‡ç”¨æœ€é€‚åˆçš„æ–¹æ³•ã€‚è€Œéæ˜¯æ‹˜æ³¥äºâ€œæ·±æ‹·è´æµ…æ‹·è´â€çš„è¯´æ³•ï¼Œå»å¤åˆ¶ä¸€æ®µä»£ç ç¥ˆç¥·ä»–èƒ½ç”Ÿæ•ˆã€‚æˆ‘ç›¸ä¿¡ä»¥ä¸Šçš„ç¤ºä¾‹ä»£ç è¿˜æ²¡æœ‰è€ƒè™‘åˆ°å…‹éš†å¯¹è±¡çš„æ‰€æœ‰é—®é¢˜ï¼Œä½†å®ƒä»¬åœ¨åˆé€‚çš„åœºæ™¯ä¸‹èƒ½å¤Ÿå¤„ç†åˆé€‚çš„é—®é¢˜ã€‚å—¯ï¼Œå…¶å®å¾ˆå¤šäº‹æƒ…éƒ½æ˜¯è¿™æ ·è›¤ã€å¸¦ï¼ã€‘"},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"57"},"buildId":"Mla5crxgZTbiqkAKR9xSA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>